import{S as Wn,P as Xn,W as qn,l as or,G as Ye,a as Yr,T as Kn,b as et,V as de,c as Wt,M as sn,g as L,d as rt,e as $e,D as $r,O as Yn,C as wt,L as Ue,f as fs,h as hs,i as Sn,j as Qr,k as ds,m as dt,F as Zr,n as oe,o as pe,p as me,q as ps,r as ms,s as Jr,t as Xt,u as Ve,I as gs,Q as ei,v as vs,w as ti,x as ys,B as fn,y as ws,z as ni,N as xs,A as Ts,E as Ss,H as ri,R as bn,J as bs,K as Es,U as hn,X as _s,Y as ii,Z as As,_ as at,$ as Rs,a0 as si,a1 as Ms,a2 as Ls,a3 as Ps,a4 as Cs,a5 as Is,a6 as Os,a7 as Ns,a8 as Ds,a9 as Fs,aa as ks,ab as oi,ac as Us,ad as ar,ae as lr,af as cr,ag as ur,ah as En,ai as Hs,aj as js,ak as Bs,al as Gs,am as fr,an as ai,ao as zs,ap as Vs,aq as Ws,ar as Xs,as as qs,at as Ks,au as Ys,av as $s,aw as Qs,ax as li,ay as Zs,az as Js,aA as eo,aB as to,aC as _n,aD as hr,aE as dr,aF as no,aG as ro}from"./Draggable-BB7o2ADm.js";function io(i,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,typeof(r=(function(s,o){if(typeof s!="object"||s===null)return s;var l=s[Symbol.toPrimitive];if(l!==void 0){var a=l.call(s,"string");if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(s)})(n.key))=="symbol"?r:String(r),n)}var r}function $n(i,e,t){return e&&io(i.prototype,e),Object.defineProperty(i,"prototype",{writable:!1}),i}function ne(){return ne=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},ne.apply(this,arguments)}function on(i,e){i.prototype=Object.create(e.prototype),i.prototype.constructor=i,xt(i,e)}function An(i){return An=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},An(i)}function xt(i,e){return xt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},xt(i,e)}function so(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Rn(i,e,t){return Rn=so()?Reflect.construct.bind():function(n,r,s){var o=[null];o.push.apply(o,r);var l=new(Function.bind.apply(n,o));return s&&xt(l,s.prototype),l},Rn.apply(null,arguments)}function Mn(i){var e=typeof Map=="function"?new Map:void 0;return Mn=function(t){if(t===null||Function.toString.call(t).indexOf("[native code]")===-1)return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return Rn(t,arguments,An(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),xt(n,t)},Mn(i)}function oo(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}var Te,ao=function(){this.before=void 0,this.beforeLeave=void 0,this.leave=void 0,this.afterLeave=void 0,this.beforeEnter=void 0,this.enter=void 0,this.afterEnter=void 0,this.after=void 0};(function(i){i[i.off=0]="off",i[i.error=1]="error",i[i.warning=2]="warning",i[i.info=3]="info",i[i.debug=4]="debug"})(Te||(Te={}));var pr=Te.off,Ce=(function(){function i(t){this.t=void 0,this.t=t}i.getLevel=function(){return pr},i.setLevel=function(t){return pr=Te[t]};var e=i.prototype;return e.error=function(){this.i(console.error,Te.error,[].slice.call(arguments))},e.warn=function(){this.i(console.warn,Te.warning,[].slice.call(arguments))},e.info=function(){this.i(console.info,Te.info,[].slice.call(arguments))},e.debug=function(){this.i(console.log,Te.debug,[].slice.call(arguments))},e.i=function(t,n,r){n<=i.getLevel()&&t.apply(console,["["+this.t+"] "].concat(r))},i})();function je(i){return i.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function mr(i){return i&&i.sensitive?"":"i"}var ie={container:"container",history:"history",namespace:"namespace",prefix:"data-barba",prevent:"prevent",wrapper:"wrapper"},Ie=new((function(){function i(){this.o=ie,this.u=void 0,this.h={after:null,before:null,parent:null}}var e=i.prototype;return e.toString=function(t){return t.outerHTML},e.toDocument=function(t){return this.u||(this.u=new DOMParser),this.u.parseFromString(t,"text/html")},e.toElement=function(t){var n=document.createElement("div");return n.innerHTML=t,n},e.getHtml=function(t){return t===void 0&&(t=document),this.toString(t.documentElement)},e.getWrapper=function(t){return t===void 0&&(t=document),t.querySelector("["+this.o.prefix+'="'+this.o.wrapper+'"]')},e.getContainer=function(t){return t===void 0&&(t=document),t.querySelector("["+this.o.prefix+'="'+this.o.container+'"]')},e.removeContainer=function(t){document.body.contains(t)&&(this.v(t),t.parentNode.removeChild(t))},e.addContainer=function(t,n){var r=this.getContainer()||this.h.before;r?this.l(t,r):this.h.after?this.h.after.parentNode.insertBefore(t,this.h.after):this.h.parent?this.h.parent.appendChild(t):n.appendChild(t)},e.getSibling=function(){return this.h},e.getNamespace=function(t){t===void 0&&(t=document);var n=t.querySelector("["+this.o.prefix+"-"+this.o.namespace+"]");return n?n.getAttribute(this.o.prefix+"-"+this.o.namespace):null},e.getHref=function(t){if(t.tagName&&t.tagName.toLowerCase()==="a"){if(typeof t.href=="string")return t.href;var n=t.getAttribute("href")||t.getAttribute("xlink:href");if(n)return this.resolveUrl(n.baseVal||n)}return null},e.resolveUrl=function(){var t=[].slice.call(arguments).length;if(t===0)throw new Error("resolveUrl requires at least one argument; got none.");var n=document.createElement("base");if(n.href=arguments[0],t===1)return n.href;var r=document.getElementsByTagName("head")[0];r.insertBefore(n,r.firstChild);for(var s,o=document.createElement("a"),l=1;l<t;l++)o.href=arguments[l],n.href=s=o.href;return r.removeChild(n),s},e.l=function(t,n){n.parentNode.insertBefore(t,n.nextSibling)},e.v=function(t){return this.h={after:t.nextElementSibling,before:t.previousElementSibling,parent:t.parentElement},this.h},i})()),lo=(function(){function i(){this.p=void 0,this.m=[],this.P=-1}var e=i.prototype;return e.init=function(t,n){this.p="barba";var r={data:{},ns:n,scroll:{x:window.scrollX,y:window.scrollY},url:t};this.P=0,this.m.push(r);var s={from:this.p,index:this.P,states:[].concat(this.m)};window.history&&window.history.replaceState(s,"",t)},e.change=function(t,n,r){if(r&&r.state){var s=r.state,o=s.index;n=this.g(this.P-o),this.replace(s.states),this.P=o}else this.add(t,n);return n},e.add=function(t,n,r,s){var o=r??this.R(n),l={data:s??{},ns:"tmp",scroll:{x:window.scrollX,y:window.scrollY},url:t};switch(o){case"push":this.P=this.size,this.m.push(l);break;case"replace":this.set(this.P,l)}var a={from:this.p,index:this.P,states:[].concat(this.m)};switch(o){case"push":window.history&&window.history.pushState(a,"",t);break;case"replace":window.history&&window.history.replaceState(a,"",t)}},e.store=function(t,n){var r=n||this.P,s=this.get(r);s.data=ne({},s.data,t),this.set(r,s);var o={from:this.p,index:this.P,states:[].concat(this.m)};window.history.replaceState(o,"")},e.update=function(t,n){var r=n||this.P,s=ne({},this.get(r),t);this.set(r,s)},e.remove=function(t){t?this.m.splice(t,1):this.m.pop(),this.P--},e.clear=function(){this.m=[],this.P=-1},e.replace=function(t){this.m=t},e.get=function(t){return this.m[t]},e.set=function(t,n){return this.m[t]=n},e.R=function(t){var n="push",r=t,s=ie.prefix+"-"+ie.history;return r.hasAttribute&&r.hasAttribute(s)&&(n=r.getAttribute(s)),n},e.g=function(t){return Math.abs(t)>1?t>0?"forward":"back":t===0?"popstate":t>0?"back":"forward"},$n(i,[{key:"current",get:function(){return this.m[this.P]}},{key:"previous",get:function(){return this.P<1?null:this.m[this.P-1]}},{key:"size",get:function(){return this.m.length}}]),i})(),ci=new lo,qt=function(i,e){try{var t=(function(){if(!e.next.html)return Promise.resolve(i).then(function(n){var r=e.next;if(n){var s=Ie.toElement(n.html);r.namespace=Ie.getNamespace(s),r.container=Ie.getContainer(s),r.url=n.url,r.html=n.html,ci.update({ns:r.namespace});var o=Ie.toDocument(n.html);document.title=o.title}})})();return Promise.resolve(t&&t.then?t.then(function(){}):void 0)}catch(n){return Promise.reject(n)}},ui=function i(e,t,n){return e instanceof RegExp?(function(r,s){if(!s)return r;for(var o=/\((?:\?<(.*?)>)?(?!\?)/g,l=0,a=o.exec(r.source);a;)s.push({name:a[1]||l++,prefix:"",suffix:"",modifier:"",pattern:""}),a=o.exec(r.source);return r})(e,t):Array.isArray(e)?(function(r,s,o){var l=r.map(function(a){return i(a,s,o).source});return new RegExp("(?:".concat(l.join("|"),")"),mr(o))})(e,t,n):(function(r,s,o){return(function(l,a,c){c===void 0&&(c={});for(var f=c.strict,u=f!==void 0&&f,h=c.start,d=h===void 0||h,p=c.end,m=p===void 0||p,v=c.encode,y=v===void 0?function(G){return G}:v,x=c.delimiter,T=x===void 0?"/#?":x,w=c.endsWith,b="[".concat(je(w===void 0?"":w),"]|$"),S="[".concat(je(T),"]"),_=d?"^":"",R=0,A=l;R<A.length;R++){var E=A[R];if(typeof E=="string")_+=je(y(E));else{var P=je(y(E.prefix)),M=je(y(E.suffix));if(E.pattern)if(a&&a.push(E),P||M)if(E.modifier==="+"||E.modifier==="*"){var O=E.modifier==="*"?"?":"";_+="(?:".concat(P,"((?:").concat(E.pattern,")(?:").concat(M).concat(P,"(?:").concat(E.pattern,"))*)").concat(M,")").concat(O)}else _+="(?:".concat(P,"(").concat(E.pattern,")").concat(M,")").concat(E.modifier);else _+=E.modifier==="+"||E.modifier==="*"?"((?:".concat(E.pattern,")").concat(E.modifier,")"):"(".concat(E.pattern,")").concat(E.modifier);else _+="(?:".concat(P).concat(M,")").concat(E.modifier)}}if(m)u||(_+="".concat(S,"?")),_+=c.endsWith?"(?=".concat(b,")"):"$";else{var C=l[l.length-1],F=typeof C=="string"?S.indexOf(C[C.length-1])>-1:C===void 0;u||(_+="(?:".concat(S,"(?=").concat(b,"))?")),F||(_+="(?=".concat(S,"|").concat(b,")"))}return new RegExp(_,mr(c))})((function(l,a){a===void 0&&(a={});for(var c=(function(M){for(var O=[],C=0;C<M.length;){var F=M[C];if(F!=="*"&&F!=="+"&&F!=="?")if(F!=="\\")if(F!=="{")if(F!=="}")if(F!==":")if(F!=="(")O.push({type:"CHAR",index:C,value:M[C++]});else{var G=1,ae="";if(M[H=C+1]==="?")throw new TypeError('Pattern cannot start with "?" at '.concat(H));for(;H<M.length;)if(M[H]!=="\\"){if(M[H]===")"){if(--G==0){H++;break}}else if(M[H]==="("&&(G++,M[H+1]!=="?"))throw new TypeError("Capturing groups are not allowed at ".concat(H));ae+=M[H++]}else ae+=M[H++]+M[H++];if(G)throw new TypeError("Unbalanced pattern at ".concat(C));if(!ae)throw new TypeError("Missing pattern at ".concat(C));O.push({type:"PATTERN",index:C,value:ae}),C=H}else{for(var ve="",H=C+1;H<M.length;){var J=M.charCodeAt(H);if(!(J>=48&&J<=57||J>=65&&J<=90||J>=97&&J<=122||J===95))break;ve+=M[H++]}if(!ve)throw new TypeError("Missing parameter name at ".concat(C));O.push({type:"NAME",index:C,value:ve}),C=H}else O.push({type:"CLOSE",index:C,value:M[C++]});else O.push({type:"OPEN",index:C,value:M[C++]});else O.push({type:"ESCAPED_CHAR",index:C++,value:M[C++]});else O.push({type:"MODIFIER",index:C,value:M[C++]})}return O.push({type:"END",index:C,value:""}),O})(l),f=a.prefixes,u=f===void 0?"./":f,h="[^".concat(je(a.delimiter||"/#?"),"]+?"),d=[],p=0,m=0,v="",y=function(M){if(m<c.length&&c[m].type===M)return c[m++].value},x=function(M){var O=y(M);if(O!==void 0)return O;var C=c[m],F=C.index;throw new TypeError("Unexpected ".concat(C.type," at ").concat(F,", expected ").concat(M))},T=function(){for(var M,O="";M=y("CHAR")||y("ESCAPED_CHAR");)O+=M;return O};m<c.length;){var w=y("CHAR"),b=y("NAME"),S=y("PATTERN");if(b||S)u.indexOf(R=w||"")===-1&&(v+=R,R=""),v&&(d.push(v),v=""),d.push({name:b||p++,prefix:R,suffix:"",pattern:S||h,modifier:y("MODIFIER")||""});else{var _=w||y("ESCAPED_CHAR");if(_)v+=_;else if(v&&(d.push(v),v=""),y("OPEN")){var R=T(),A=y("NAME")||"",E=y("PATTERN")||"",P=T();x("CLOSE"),d.push({name:A||(E?p++:""),pattern:A&&!E?h:E,prefix:R,suffix:P,modifier:y("MODIFIER")||""})}else x("END")}}return d})(r,o),s,o)})(e,t,n)},co={__proto__:null,update:qt,nextTick:function(){return new Promise(function(i){window.requestAnimationFrame(i)})},pathToRegexp:ui},fi=function(){return window.location.origin},Tt=function(i){return i===void 0&&(i=window.location.href),Se(i).port},Se=function(i){var e,t=i.match(/:\d+/);if(t===null)/^http/.test(i)&&(e=80),/^https/.test(i)&&(e=443);else{var n=t[0].substring(1);e=parseInt(n,10)}var r,s=i.replace(fi(),""),o={},l=s.indexOf("#");l>=0&&(r=s.slice(l+1),s=s.slice(0,l));var a=s.indexOf("?");return a>=0&&(o=hi(s.slice(a+1)),s=s.slice(0,a)),{hash:r,path:s,port:e,query:o}},hi=function(i){return i.split("&").reduce(function(e,t){var n=t.split("=");return e[n[0]]=n[1],e},{})},Ln=function(i){return i===void 0&&(i=window.location.href),i.replace(/(\/#.*|\/|#.*)$/,"")},uo={__proto__:null,getHref:function(){return window.location.href},getAbsoluteHref:function(i,e){return e===void 0&&(e=document.baseURI),new URL(i,e).href},getOrigin:fi,getPort:Tt,getPath:function(i){return i===void 0&&(i=window.location.href),Se(i).path},getQuery:function(i,e){return e===void 0&&(e=!1),e?JSON.stringify(Se(i).query):Se(i).query},getHash:function(i){return Se(i).hash},parse:Se,parseQuery:hi,clean:Ln};function fo(i,e,t,n,r){return e===void 0&&(e=2e3),new Promise(function(s,o){var l=new XMLHttpRequest;l.onreadystatechange=function(){if(l.readyState===XMLHttpRequest.DONE){if(l.status===200){var a=l.responseURL!==""&&l.responseURL!==i?l.responseURL:i;s({html:l.responseText,url:ne({href:a},Se(a))}),n.update(i,{status:"fulfilled",target:a})}else if(l.status){var c={status:l.status,statusText:l.statusText};t(i,c),o(c),n.update(i,{status:"rejected"})}}},l.ontimeout=function(){var a=new Error("Timeout error ["+e+"]");t(i,a),o(a),n.update(i,{status:"rejected"})},l.onerror=function(){var a=new Error("Fetch error");t(i,a),o(a),n.update(i,{status:"rejected"})},l.open("GET",i),l.timeout=e,l.setRequestHeader("Accept","text/html,application/xhtml+xml,application/xml"),l.setRequestHeader("x-barba","yes"),r.all().forEach(function(a,c){l.setRequestHeader(c,a)}),l.send()})}function ho(i){return!!i&&(typeof i=="object"||typeof i=="function")&&typeof i.then=="function"}function We(i,e){return e===void 0&&(e={}),function(){var t=arguments,n=!1,r=new Promise(function(s,o){e.async=function(){return n=!0,function(a,c){a?o(a):s(c)}};var l=i.apply(e,[].slice.call(t));n||(ho(l)?l.then(s,o):s(l))});return r}}var xe=new((function(i){function e(){var n;return(n=i.call(this)||this).logger=new Ce("@barba/core"),n.all=["ready","page","reset","currentAdded","currentRemoved","nextAdded","nextRemoved","beforeOnce","once","afterOnce","before","beforeLeave","leave","afterLeave","beforeEnter","enter","afterEnter","after"],n.registered=new Map,n.init(),n}on(e,i);var t=e.prototype;return t.init=function(){var n=this;this.registered.clear(),this.all.forEach(function(r){n[r]||(n[r]=function(s,o){n.registered.has(r)||n.registered.set(r,new Set),n.registered.get(r).add({ctx:o||{},fn:s})})})},t.do=function(n){var r=arguments,s=this;if(this.registered.has(n)){var o=Promise.resolve();return this.registered.get(n).forEach(function(l){o=o.then(function(){return We(l.fn,l.ctx).apply(void 0,[].slice.call(r,1))})}),o.catch(function(l){s.logger.debug("Hook error ["+n+"]"),s.logger.error(l)})}return Promise.resolve()},t.clear=function(){var n=this;this.all.forEach(function(r){delete n[r]}),this.init()},t.help=function(){this.logger.info("Available hooks: "+this.all.join(","));var n=[];this.registered.forEach(function(r,s){return n.push(s)}),this.logger.info("Registered hooks: "+n.join(","))},e})(ao)),di=(function(){function i(e){if(this.k=void 0,this.O=[],typeof e=="boolean")this.k=e;else{var t=Array.isArray(e)?e:[e];this.O=t.map(function(n){return ui(n)})}}return i.prototype.checkHref=function(e){if(typeof this.k=="boolean")return this.k;var t=Se(e).path;return this.O.some(function(n){return n.exec(t)!==null})},i})(),po=(function(i){function e(n){var r;return(r=i.call(this,n)||this).T=new Map,r}on(e,i);var t=e.prototype;return t.set=function(n,r,s,o,l){return this.T.set(n,{action:s,request:r,status:o,target:l??n}),{action:s,request:r,status:o,target:l}},t.get=function(n){return this.T.get(n)},t.getRequest=function(n){return this.T.get(n).request},t.getAction=function(n){return this.T.get(n).action},t.getStatus=function(n){return this.T.get(n).status},t.getTarget=function(n){return this.T.get(n).target},t.has=function(n){return!this.checkHref(n)&&this.T.has(n)},t.delete=function(n){return this.T.delete(n)},t.update=function(n,r){var s=ne({},this.T.get(n),r);return this.T.set(n,s),s},e})(di),mo=(function(){function i(){this.A=new Map}var e=i.prototype;return e.set=function(t,n){return this.A.set(t,n),{name:n}},e.get=function(t){return this.A.get(t)},e.all=function(){return this.A},e.has=function(t){return this.A.has(t)},e.delete=function(t){return this.A.delete(t)},e.clear=function(){return this.A.clear()},i})(),go=function(){return!window.history.pushState},vo=function(i){return!i.el||!i.href},yo=function(i){var e=i.event;return e.which>1||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey},wo=function(i){var e=i.el;return e.hasAttribute("target")&&e.target==="_blank"},xo=function(i){var e=i.el;return e.protocol!==void 0&&window.location.protocol!==e.protocol||e.hostname!==void 0&&window.location.hostname!==e.hostname},To=function(i){var e=i.el;return e.port!==void 0&&Tt()!==Tt(e.href)},So=function(i){var e=i.el;return e.getAttribute&&typeof e.getAttribute("download")=="string"},bo=function(i){return i.el.hasAttribute(ie.prefix+"-"+ie.prevent)},Eo=function(i){return!!i.el.closest("["+ie.prefix+"-"+ie.prevent+'="all"]')},_o=function(i){var e=i.href;return Ln(e)===Ln()&&Tt(e)===Tt()},Ao=(function(i){function e(n){var r;return(r=i.call(this,n)||this).suite=[],r.tests=new Map,r.init(),r}on(e,i);var t=e.prototype;return t.init=function(){this.add("pushState",go),this.add("exists",vo),this.add("newTab",yo),this.add("blank",wo),this.add("corsDomain",xo),this.add("corsPort",To),this.add("download",So),this.add("preventSelf",bo),this.add("preventAll",Eo),this.add("sameUrl",_o,!1)},t.add=function(n,r,s){s===void 0&&(s=!0),this.tests.set(n,r),s&&this.suite.push(n)},t.run=function(n,r,s,o){return this.tests.get(n)({el:r,event:s,href:o})},t.checkLink=function(n,r,s){var o=this;return this.suite.some(function(l){return o.run(l,n,r,s)})},e})(di),dn=(function(i){function e(t,n){var r;return n===void 0&&(n="Barba error"),(r=i.call.apply(i,[this].concat([].slice.call(arguments,2)))||this).error=void 0,r.label=void 0,r.error=t,r.label=n,Error.captureStackTrace&&Error.captureStackTrace(oo(r),e),r.name="BarbaError",r}return on(e,i),e})(Mn(Error)),Ro=(function(){function i(t){t===void 0&&(t=[]),this.logger=new Ce("@barba/core"),this.all=[],this.page=[],this.once=[],this.j=[{name:"namespace",type:"strings"},{name:"custom",type:"function"}],t&&(this.all=this.all.concat(t)),this.update()}var e=i.prototype;return e.add=function(t,n){t==="rule"?this.j.splice(n.position||0,0,n.value):this.all.push(n),this.update()},e.resolve=function(t,n){var r=this;n===void 0&&(n={});var s=n.once?this.once:this.page;s=s.filter(n.self?function(h){return h.name&&h.name==="self"}:function(h){return!h.name||h.name!=="self"});var o=new Map,l=s.find(function(h){var d=!0,p={};return n.self&&h.name==="self"?(o.set(h,p),!0):(r.j.reverse().forEach(function(m){d&&(d=r.M(h,m,t,p),h.from&&h.to&&(d=r.M(h,m,t,p,"from")&&r.M(h,m,t,p,"to")),h.from&&!h.to&&(d=r.M(h,m,t,p,"from")),!h.from&&h.to&&(d=r.M(h,m,t,p,"to")))}),o.set(h,p),d)}),a=o.get(l),c=[];if(c.push(n.once?"once":"page"),n.self&&c.push("self"),a){var f,u=[l];Object.keys(a).length>0&&u.push(a),(f=this.logger).info.apply(f,["Transition found ["+c.join(",")+"]"].concat(u))}else this.logger.info("No transition found ["+c.join(",")+"]");return l},e.update=function(){var t=this;this.all=this.all.map(function(n){return t.N(n)}).sort(function(n,r){return n.priority-r.priority}).reverse().map(function(n){return delete n.priority,n}),this.page=this.all.filter(function(n){return n.leave!==void 0||n.enter!==void 0}),this.once=this.all.filter(function(n){return n.once!==void 0})},e.M=function(t,n,r,s,o){var l=!0,a=!1,c=t,f=n.name,u=f,h=f,d=f,p=o?c[o]:c,m=o==="to"?r.next:r.current;if(o?p&&p[f]:p[f]){switch(n.type){case"strings":default:var v=Array.isArray(p[u])?p[u]:[p[u]];m[u]&&v.indexOf(m[u])!==-1&&(a=!0),v.indexOf(m[u])===-1&&(l=!1);break;case"object":var y=Array.isArray(p[h])?p[h]:[p[h]];m[h]?(m[h].name&&y.indexOf(m[h].name)!==-1&&(a=!0),y.indexOf(m[h].name)===-1&&(l=!1)):l=!1;break;case"function":p[d](r)?a=!0:l=!1}a&&(o?(s[o]=s[o]||{},s[o][f]=c[o][f]):s[f]=c[f])}return l},e.S=function(t,n,r){var s=0;return(t[n]||t.from&&t.from[n]||t.to&&t.to[n])&&(s+=Math.pow(10,r),t.from&&t.from[n]&&(s+=1),t.to&&t.to[n]&&(s+=2)),s},e.N=function(t){var n=this;t.priority=0;var r=0;return this.j.forEach(function(s,o){r+=n.S(t,s.name,o+1)}),t.priority=r,t},i})();function it(i,e){try{var t=i()}catch(n){return e(n)}return t&&t.then?t.then(void 0,e):t}var Mo=(function(){function i(t){t===void 0&&(t=[]),this.logger=new Ce("@barba/core"),this.store=void 0,this.C=!1,this.store=new Ro(t)}var e=i.prototype;return e.get=function(t,n){return this.store.resolve(t,n)},e.doOnce=function(t){var n=t.data,r=t.transition;try{var s=function(){o.C=!1},o=this,l=r||{};o.C=!0;var a=it(function(){return Promise.resolve(o.L("beforeOnce",n,l)).then(function(){return Promise.resolve(o.once(n,l)).then(function(){return Promise.resolve(o.L("afterOnce",n,l)).then(function(){})})})},function(c){o.C=!1,o.logger.debug("Transition error [before/after/once]"),o.logger.error(c)});return Promise.resolve(a&&a.then?a.then(s):s())}catch(c){return Promise.reject(c)}},e.doPage=function(t){var n=t.data,r=t.transition,s=t.page,o=t.wrapper;try{var l=function(h){a.C=!1},a=this,c=r||{},f=c.sync===!0||!1;a.C=!0;var u=it(function(){function h(){return Promise.resolve(a.L("before",n,c)).then(function(){function p(v){return Promise.resolve(a.remove(n)).then(function(){return Promise.resolve(a.L("after",n,c)).then(function(){})})}var m=(function(){if(f)return it(function(){return Promise.resolve(a.add(n,o)).then(function(){return Promise.resolve(a.L("beforeLeave",n,c)).then(function(){return Promise.resolve(a.L("beforeEnter",n,c)).then(function(){return Promise.resolve(Promise.all([a.leave(n,c),a.enter(n,c)])).then(function(){return Promise.resolve(a.L("afterLeave",n,c)).then(function(){return Promise.resolve(a.L("afterEnter",n,c)).then(function(){})})})})})})},function(T){if(a.H(T))throw new dn(T,"Transition error [sync]")});var v=function(T){return it(function(){var w=(function(){if(y!==!1)return Promise.resolve(a.add(n,o)).then(function(){return Promise.resolve(a.L("beforeEnter",n,c)).then(function(){return Promise.resolve(a.enter(n,c,y)).then(function(){return Promise.resolve(a.L("afterEnter",n,c)).then(function(){})})})})})();if(w&&w.then)return w.then(function(){})},function(w){if(a.H(w))throw new dn(w,"Transition error [before/after/enter]")})},y=!1,x=it(function(){return Promise.resolve(a.L("beforeLeave",n,c)).then(function(){return Promise.resolve(Promise.all([a.leave(n,c),qt(s,n)]).then(function(T){return T[0]})).then(function(T){return y=T,Promise.resolve(a.L("afterLeave",n,c)).then(function(){})})})},function(T){if(a.H(T))throw new dn(T,"Transition error [before/after/leave]")});return x&&x.then?x.then(v):v()})();return m&&m.then?m.then(p):p()})}var d=(function(){if(f)return Promise.resolve(qt(s,n)).then(function(){})})();return d&&d.then?d.then(h):h()},function(h){throw a.C=!1,h.name&&h.name==="BarbaError"?(a.logger.debug(h.label),a.logger.error(h.error),h):(a.logger.debug("Transition error [page]"),a.logger.error(h),h)});return Promise.resolve(u&&u.then?u.then(l):l())}catch(h){return Promise.reject(h)}},e.once=function(t,n){try{return Promise.resolve(xe.do("once",t,n)).then(function(){return n.once?We(n.once,n)(t):Promise.resolve()})}catch(r){return Promise.reject(r)}},e.leave=function(t,n){try{return Promise.resolve(xe.do("leave",t,n)).then(function(){return n.leave?We(n.leave,n)(t):Promise.resolve()})}catch(r){return Promise.reject(r)}},e.enter=function(t,n,r){try{return Promise.resolve(xe.do("enter",t,n)).then(function(){return n.enter?We(n.enter,n)(t,r):Promise.resolve()})}catch(s){return Promise.reject(s)}},e.add=function(t,n){try{return Ie.addContainer(t.next.container,n),xe.do("nextAdded",t),Promise.resolve()}catch(r){return Promise.reject(r)}},e.remove=function(t){try{return Ie.removeContainer(t.current.container),xe.do("currentRemoved",t),Promise.resolve()}catch(n){return Promise.reject(n)}},e.H=function(t){return t.message?!/Timeout error|Fetch error/.test(t.message):!t.status},e.L=function(t,n,r){try{return Promise.resolve(xe.do(t,n,r)).then(function(){return r[t]?We(r[t],r)(n):Promise.resolve()})}catch(s){return Promise.reject(s)}},$n(i,[{key:"isRunning",get:function(){return this.C},set:function(t){this.C=t}},{key:"hasOnce",get:function(){return this.store.once.length>0}},{key:"hasSelf",get:function(){return this.store.all.some(function(t){return t.name==="self"})}},{key:"shouldWait",get:function(){return this.store.all.some(function(t){return t.to&&!t.to.route||t.sync})}}]),i})(),Lo=(function(){function i(e){var t=this;this.names=["beforeLeave","afterLeave","beforeEnter","afterEnter"],this.byNamespace=new Map,e.length!==0&&(e.forEach(function(n){t.byNamespace.set(n.namespace,n)}),this.names.forEach(function(n){xe[n](t._(n))}))}return i.prototype._=function(e){var t=this;return function(n){var r=e.match(/enter/i)?n.next:n.current,s=t.byNamespace.get(r.namespace);return s&&s[e]?We(s[e],s)(n):Promise.resolve()}},i})();Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(i){var e=this;do{if(e.matches(i))return e;e=e.parentElement||e.parentNode}while(e!==null&&e.nodeType===1);return null});var Po={container:null,html:"",namespace:"",url:{hash:"",href:"",path:"",port:null,query:{}}},Co=new((function(){function i(){this.version="2.10.3",this.schemaPage=Po,this.Logger=Ce,this.logger=new Ce("@barba/core"),this.plugins=[],this.timeout=void 0,this.cacheIgnore=void 0,this.cacheFirstPage=void 0,this.prefetchIgnore=void 0,this.preventRunning=void 0,this.hooks=xe,this.cache=void 0,this.headers=void 0,this.prevent=void 0,this.transitions=void 0,this.views=void 0,this.dom=Ie,this.helpers=co,this.history=ci,this.request=fo,this.url=uo,this.D=void 0,this.B=void 0,this.q=void 0,this.F=void 0}var e=i.prototype;return e.use=function(t,n){var r=this.plugins;r.indexOf(t)>-1?this.logger.warn("Plugin ["+t.name+"] already installed."):typeof t.install=="function"?(t.install(this,n),r.push(t)):this.logger.warn("Plugin ["+t.name+'] has no "install" method.')},e.init=function(t){var n=t===void 0?{}:t,r=n.transitions,s=r===void 0?[]:r,o=n.views,l=o===void 0?[]:o,a=n.schema,c=a===void 0?ie:a,f=n.requestError,u=n.timeout,h=u===void 0?2e3:u,d=n.cacheIgnore,p=d!==void 0&&d,m=n.cacheFirstPage,v=m!==void 0&&m,y=n.prefetchIgnore,x=y!==void 0&&y,T=n.preventRunning,w=T!==void 0&&T,b=n.prevent,S=b===void 0?null:b,_=n.debug,R=n.logLevel;if(Ce.setLevel((_!==void 0&&_)===!0?"debug":R===void 0?"off":R),this.logger.info(this.version),Object.keys(c).forEach(function(P){ie[P]&&(ie[P]=c[P])}),this.B=f,this.timeout=h,this.cacheIgnore=p,this.cacheFirstPage=v,this.prefetchIgnore=x,this.preventRunning=w,this.q=this.dom.getWrapper(),!this.q)throw new Error("[@barba/core] No Barba wrapper found");this.I();var A=this.data.current;if(!A.container)throw new Error("[@barba/core] No Barba container found");if(this.cache=new po(p),this.headers=new mo,this.prevent=new Ao(x),this.transitions=new Mo(s),this.views=new Lo(l),S!==null){if(typeof S!="function")throw new Error("[@barba/core] Prevent should be a function");this.prevent.add("preventCustom",S)}this.history.init(A.url.href,A.namespace),v&&this.cache.set(A.url.href,Promise.resolve({html:A.html,url:A.url}),"init","fulfilled"),this.U=this.U.bind(this),this.$=this.$.bind(this),this.X=this.X.bind(this),this.G(),this.plugins.forEach(function(P){return P.init()});var E=this.data;E.trigger="barba",E.next=E.current,E.current=ne({},this.schemaPage),this.hooks.do("ready",E),this.once(E),this.I()},e.destroy=function(){this.I(),this.J(),this.history.clear(),this.hooks.clear(),this.plugins=[]},e.force=function(t){window.location.assign(t)},e.go=function(t,n,r){var s;if(n===void 0&&(n="barba"),this.F=null,this.transitions.isRunning)this.force(t);else if(!(s=n==="popstate"?this.history.current&&this.url.getPath(this.history.current.url)===this.url.getPath(t)&&this.url.getQuery(this.history.current.url,!0)===this.url.getQuery(t,!0):this.prevent.run("sameUrl",null,null,t))||this.transitions.hasSelf)return n=this.history.change(this.cache.has(t)?this.cache.get(t).target:t,n,r),r&&(r.stopPropagation(),r.preventDefault()),this.page(t,n,r??void 0,s)},e.once=function(t){try{var n=this;return Promise.resolve(n.hooks.do("beforeEnter",t)).then(function(){function r(){return Promise.resolve(n.hooks.do("afterEnter",t)).then(function(){})}var s=(function(){if(n.transitions.hasOnce){var o=n.transitions.get(t,{once:!0});return Promise.resolve(n.transitions.doOnce({transition:o,data:t})).then(function(){})}})();return s&&s.then?s.then(r):r()})}catch(r){return Promise.reject(r)}},e.page=function(t,n,r,s){try{var o,l=function(){var u=a.data;return Promise.resolve(a.hooks.do("page",u)).then(function(){var h=(function(d,p){try{var m=(v=a.transitions.get(u,{once:!1,self:s}),Promise.resolve(a.transitions.doPage({data:u,page:o,transition:v,wrapper:a.q})).then(function(){a.I()}))}catch{return p()}var v;return m&&m.then?m.then(void 0,p):m})(0,function(){Ce.getLevel()===0&&a.force(u.next.url.href)});if(h&&h.then)return h.then(function(){})})},a=this;if(a.data.next.url=ne({href:t},a.url.parse(t)),a.data.trigger=n,a.data.event=r,a.cache.has(t))o=a.cache.update(t,{action:"click"}).request;else{var c=a.request(t,a.timeout,a.onRequestError.bind(a,n),a.cache,a.headers);c.then(function(u){u.url.href!==t&&a.history.add(u.url.href,n,"replace")}),o=a.cache.set(t,c,"click","pending").request}var f=(function(){if(a.transitions.shouldWait)return Promise.resolve(qt(o,a.data)).then(function(){})})();return Promise.resolve(f&&f.then?f.then(l):l())}catch(u){return Promise.reject(u)}},e.onRequestError=function(t){this.transitions.isRunning=!1;var n=[].slice.call(arguments,1),r=n[0],s=n[1],o=this.cache.getAction(r);return this.cache.delete(r),this.B&&this.B(t,o,r,s)===!1||o==="click"&&this.force(r),!1},e.prefetch=function(t){var n=this;t=this.url.getAbsoluteHref(t),this.cache.has(t)||this.cache.set(t,this.request(t,this.timeout,this.onRequestError.bind(this,"barba"),this.cache,this.headers).catch(function(r){n.logger.error(r)}),"prefetch","pending")},e.G=function(){this.prefetchIgnore!==!0&&(document.addEventListener("mouseover",this.U),document.addEventListener("touchstart",this.U)),document.addEventListener("click",this.$),window.addEventListener("popstate",this.X)},e.J=function(){this.prefetchIgnore!==!0&&(document.removeEventListener("mouseover",this.U),document.removeEventListener("touchstart",this.U)),document.removeEventListener("click",this.$),window.removeEventListener("popstate",this.X)},e.U=function(t){var n=this,r=this.W(t);if(r){var s=this.url.getAbsoluteHref(this.dom.getHref(r));this.prevent.checkHref(s)||this.cache.has(s)||this.cache.set(s,this.request(s,this.timeout,this.onRequestError.bind(this,r),this.cache,this.headers).catch(function(o){n.logger.error(o)}),"enter","pending")}},e.$=function(t){var n=this.W(t);if(n){if(this.transitions.isRunning&&this.preventRunning)return t.preventDefault(),void t.stopPropagation();this.F=t,this.go(this.dom.getHref(n),n,t)}},e.X=function(t){this.go(this.url.getHref(),"popstate",t)},e.W=function(t){for(var n=t.target;n&&!this.dom.getHref(n);)n=n.parentNode;if(n&&!this.prevent.checkLink(n,t,this.dom.getHref(n)))return n},e.I=function(){var t=this.url.getHref(),n={container:this.dom.getContainer(),html:this.dom.getHtml(),namespace:this.dom.getNamespace(),url:ne({href:t},this.url.parse(t))};this.D={current:n,event:void 0,next:ne({},this.schemaPage),trigger:void 0},this.hooks.do("reset",this.data)},$n(i,[{key:"data",get:function(){return this.D}},{key:"wrapper",get:function(){return this.q}}]),i})());let Qe=null;const pt=new Map;let gr=0;const Io=16,Oo=`
uniform float uScrollSpeed;
uniform float uCurveStrength;
uniform float uCurveFrequency;

varying vec2 vUv;

#define PI 3.141592653

void main() {
  vec3 pos = position;
  vec3 worldPosition = (modelMatrix * vec4(position, 1.0)).xyz;

  // X Displacement depending on the world position Y
  float xDisplacement = uCurveStrength * cos(worldPosition.y * uCurveFrequency);
  pos.x += xDisplacement;
  pos.x -= uCurveStrength;

  // Y Displacement according to the scroll speed
  float yDisplacement = -sin(uv.x * PI) * uScrollSpeed;
  pos.y += yDisplacement;

  gl_Position = projectionMatrix * modelViewMatrix * vec4( pos, 1.0 );

  vUv = uv;
}
`,No=`
precision highp float;

uniform sampler2D uTexture;
uniform vec2 uPlaneSizes;
uniform vec2 uImageSizes;

varying vec2 vUv;

void main() {
  vec2 ratio = vec2(
    min((uPlaneSizes.x / uPlaneSizes.y) / (uImageSizes.x / uImageSizes.y), 1.0),
    min((uPlaneSizes.y / uPlaneSizes.x) / (uImageSizes.y / uImageSizes.x), 1.0)
  );

  vec2 uv = vec2(
    vUv.x * ratio.x + (1.0 - ratio.x) * 0.5,
    vUv.y * ratio.y + (1.0 - ratio.y) * 0.5
  );

  vec4 finalColor = texture2D(uTexture, uv);
  
  gl_FragColor = finalColor;
}
`,pn=Array.from({length:20},(i,e)=>`/middle-carousel/spotlight-${e+1}.jpg`);let U=null,tt=null,be=null,we=null,Ft=null,St=!1,mt=null,Ae=[],kt=null;function Do(i,e){return(i%e+e)%e}class Be{constructor({position:e,rotation:t,imageSize:n,gap:r,wheelFactor:s,wheelDirection:o,curveStrength:l,curveFrequency:a}){this.group=new Ye,this.meshes=[],this.imageSize=n,this.gap=r,this.wheelFactor=s||1,this.wheelDirection=o||1,this.curveStrength=l||0,this.curveFrequency=a||0,this.group.position.set(...e||[0,0,0]),this.group.rotation.set(...t||[0,0,0]),this.totalHeight=pn.length*r+pn.length*n[1],this.createImages()}createImages(){Qe||(Qe=new Yr(1,1,8,8));const e=new Kn;pn.forEach((t,n)=>{let r;pt.has(t)?r=pt.get(t):(r=e.load(t),r.colorSpace=et,pt.set(t,r));const s={uTexture:{value:r},uScrollSpeed:{value:0},uPlaneSizes:{value:new de(this.imageSize[0],this.imageSize[1])},uImageSizes:{value:new de(1,1)},uCurveStrength:{value:this.curveStrength},uCurveFrequency:{value:this.curveFrequency}},o=new Wt({uniforms:s,vertexShader:Oo,fragmentShader:No}),l=new sn(Qe,o);l.scale.set(this.imageSize[0],this.imageSize[1],1),l.position.set(0,n*(this.imageSize[1]+this.gap),0),r.onload=()=>{s.uImageSizes.value.set(r.image.width,r.image.height)},this.group.add(l),this.meshes.push(l)})}update(){const e=this.meshes,t=e.length,n=this.totalHeight/2,r=this.totalHeight;for(let s=0;s<t;s++){const o=e[s];o.position.y=Do(o.position.y+n,r)-n}}onScroll(e){const t=e*.005*this.wheelFactor*this.wheelDirection,n=this.meshes,r=n.length;for(let s=0;s<r;s++){const o=n[s];o.position.y-=t,o.material.uniforms.uScrollSpeed.value=t}}addToScene(e){e.add(this.group)}dispose(){this.meshes.forEach(e=>{e.material.dispose()}),this.meshes=[]}}function Fo(){const i=new Ye;i.rotation.z=Math.PI/4,[new Be({position:[-1.3,0,0],imageSize:[2,1.1],gap:.05,curveFrequency:.4,curveStrength:1.2,wheelFactor:.1,wheelDirection:1}),new Be({position:[-2.3,0,0],imageSize:[.3,.4],gap:0,wheelFactor:.2,curveFrequency:.4,curveStrength:7.5,wheelDirection:-1}),new Be({position:[-.4,0,0],imageSize:[.3,.4],gap:0,wheelFactor:.2,curveFrequency:.4,curveStrength:7.5,wheelDirection:-1})].forEach(r=>{i.add(r.group),Ae.push(r)}),tt.add(i);const t=new Ye;t.rotation.z=Math.PI/4,[new Be({position:[1.3,0,0],imageSize:[2,1.1],gap:.05,curveFrequency:.4,curveStrength:-1.2,wheelFactor:.1,wheelDirection:-1}),new Be({position:[2.3,0,0],imageSize:[.3,.4],gap:0,wheelFactor:.2,curveFrequency:.4,curveStrength:-7.5,wheelDirection:1}),new Be({position:[.4,0,0],imageSize:[.3,.4],gap:0,wheelFactor:.2,curveFrequency:.4,curveStrength:-7.5,wheelDirection:1})].forEach(r=>{t.add(r.group),Ae.push(r)}),tt.add(t)}function pi(){if(!St)return;const i=Ae.length;for(let e=0;e<i;e++)Ae[e].update();U&&tt&&be&&U.render(tt,be),Ft=requestAnimationFrame(pi)}function ko(){if(St||(we=document.querySelector(".middle-img"),!we))return;const i=we.getBoundingClientRect(),e=i.width,t=i.height;St=!0,tt=new Wn,be=new Xn(75,e/t,.1,1e3),be.position.set(0,0,3),U=new qn({antialias:!1,alpha:!0,powerPreference:"high-performance"}),U.setSize(e,t),U.setPixelRatio(Math.min(window.devicePixelRatio||1,1.5)),U.setClearColor(0,0),U.domElement.style.position="absolute",U.domElement.style.top="0",U.domElement.style.left="0",U.domElement.style.width="100%",U.domElement.style.height="100%",we.innerHTML="",we.appendChild(U.domElement),Fo(),mt=()=>{if(!we||!U||!be)return;const n=we.getBoundingClientRect();be.aspect=n.width/n.height,be.updateProjectionMatrix(),U.setSize(n.width,n.height)},window.addEventListener("resize",mt),or&&(kt=or.on("scroll",({velocity:n})=>{const r=performance.now();if(!(r-gr<Io)){gr=r;for(let s=0;s<Ae.length;s++)Ae[s].onScroll(n)}})),pi()}function Uo(){St&&(St=!1,Ft&&(cancelAnimationFrame(Ft),Ft=null),mt&&(window.removeEventListener("resize",mt),mt=null),kt&&(kt(),kt=null),Ae.forEach(i=>i.dispose()),Ae=[],Qe&&(Qe.dispose(),Qe=null),pt.forEach(i=>i.dispose()),pt.clear(),U&&(U.dispose(),U.domElement&&U.domElement.parentNode&&U.domElement.parentNode.removeChild(U.domElement),U=null),tt=null,be=null,we=null)}L.registerPlugin(rt);let Ut=null;function mi(){ko();const i=document.querySelectorAll(".hero .hero-contain");i.length&&(Ut=rt.create({trigger:".hero",start:"top top",end:"bottom 85%",scrub:!0,onUpdate:e=>{L.set(i,{autoAlpha:1-e.progress})}}))}function lt(){Uo(),Ut&&(Ut.kill(),Ut=null)}document.addEventListener("DOMContentLoaded",()=>{mi()});(function(){function i(){for(var n=arguments.length,r=0;r<n;r++){var s=r<0||arguments.length<=r?void 0:arguments[r];s.nodeType===1||s.nodeType===11?this.appendChild(s):this.appendChild(document.createTextNode(String(s)))}}function e(){for(;this.lastChild;)this.removeChild(this.lastChild);arguments.length&&this.append.apply(this,arguments)}function t(){for(var n=this.parentNode,r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];var l=s.length;if(n)for(l||n.removeChild(this);l--;){var a=s[l];typeof a!="object"?a=this.ownerDocument.createTextNode(a):a.parentNode&&a.parentNode.removeChild(a),l?n.insertBefore(this.previousSibling,a):n.replaceChild(a,this)}}typeof Element<"u"&&(Element.prototype.append||(Element.prototype.append=i,DocumentFragment.prototype.append=i),Element.prototype.replaceChildren||(Element.prototype.replaceChildren=e,DocumentFragment.prototype.replaceChildren=e),Element.prototype.replaceWith||(Element.prototype.replaceWith=t,DocumentFragment.prototype.replaceWith=t))})();function Ho(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function vr(i,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,n.key,n)}}function yr(i,e,t){return e&&vr(i.prototype,e),t&&vr(i,t),i}function jo(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function wr(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),t.push.apply(t,n)}return t}function xr(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?wr(Object(t),!0).forEach(function(n){jo(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):wr(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function gi(i,e){return Go(i)||Vo(i,e)||vi(i,e)||Xo()}function z(i){return Bo(i)||zo(i)||vi(i)||Wo()}function Bo(i){if(Array.isArray(i))return Pn(i)}function Go(i){if(Array.isArray(i))return i}function zo(i){if(typeof Symbol<"u"&&Symbol.iterator in Object(i))return Array.from(i)}function Vo(i,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(i)))){var t=[],n=!0,r=!1,s=void 0;try{for(var o=i[Symbol.iterator](),l;!(n=(l=o.next()).done)&&(t.push(l.value),!(e&&t.length===e));n=!0);}catch(a){r=!0,s=a}finally{try{!n&&o.return!=null&&o.return()}finally{if(r)throw s}}return t}}function vi(i,e){if(i){if(typeof i=="string")return Pn(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Pn(i,e)}}function Pn(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=i[t];return n}function Wo(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xo(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Oe(i,e){return Object.getOwnPropertyNames(Object(i)).reduce(function(t,n){var r=Object.getOwnPropertyDescriptor(Object(i),n),s=Object.getOwnPropertyDescriptor(Object(e),n);return Object.defineProperty(t,n,s||r)},{})}function _t(i){return typeof i=="string"}function Qn(i){return Array.isArray(i)}function Lt(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=Oe(i),t;return e.types!==void 0?t=e.types:e.split!==void 0&&(t=e.split),t!==void 0&&(e.types=(_t(t)||Qn(t)?String(t):"").split(",").map(function(n){return String(n).trim()}).filter(function(n){return/((line)|(word)|(char))/i.test(n)})),(e.absolute||e.position)&&(e.absolute=e.absolute||/absolute/.test(i.position)),e}function Zn(i){var e=_t(i)||Qn(i)?String(i):"";return{none:!e,lines:/line/i.test(e),words:/word/i.test(e),chars:/char/i.test(e)}}function an(i){return i!==null&&typeof i=="object"}function qo(i){return an(i)&&/^(1|3|11)$/.test(i.nodeType)}function Ko(i){return typeof i=="number"&&i>-1&&i%1===0}function Yo(i){return an(i)&&Ko(i.length)}function He(i){return Qn(i)?i:i==null?[]:Yo(i)?Array.prototype.slice.call(i):[i]}function Tr(i){var e=i;return _t(i)&&(/^(#[a-z]\w+)$/.test(i.trim())?e=document.getElementById(i.trim().slice(1)):e=document.querySelectorAll(i)),He(e).reduce(function(t,n){return[].concat(z(t),z(He(n).filter(qo)))},[])}var $o=Object.entries,Kt="_splittype",Z={},Qo=0;function re(i,e,t){if(!an(i))return console.warn("[data.set] owner is not an object"),null;var n=i[Kt]||(i[Kt]=++Qo),r=Z[n]||(Z[n]={});return t===void 0?e&&Object.getPrototypeOf(e)===Object.prototype&&(Z[n]=xr(xr({},r),e)):e!==void 0&&(r[e]=t),t}function Ne(i,e){var t=an(i)?i[Kt]:null,n=t&&Z[t]||{};return n}function yi(i){var e=i&&i[Kt];e&&(delete i[e],delete Z[e])}function Zo(){Object.keys(Z).forEach(function(i){delete Z[i]})}function Jo(){$o(Z).forEach(function(i){var e=gi(i,2),t=e[0],n=e[1],r=n.isRoot,s=n.isSplit;(!r||!s)&&(Z[t]=null,delete Z[t])})}function ea(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:" ",t=i?String(i):"";return t.trim().replace(/\s+/g," ").split(e)}var Jn="\\ud800-\\udfff",wi="\\u0300-\\u036f\\ufe20-\\ufe23",xi="\\u20d0-\\u20f0",Ti="\\ufe0e\\ufe0f",ta="[".concat(Jn,"]"),Cn="[".concat(wi).concat(xi,"]"),In="\\ud83c[\\udffb-\\udfff]",na="(?:".concat(Cn,"|").concat(In,")"),Si="[^".concat(Jn,"]"),bi="(?:\\ud83c[\\udde6-\\uddff]){2}",Ei="[\\ud800-\\udbff][\\udc00-\\udfff]",_i="\\u200d",Ai="".concat(na,"?"),Ri="[".concat(Ti,"]?"),ra="(?:"+_i+"(?:"+[Si,bi,Ei].join("|")+")"+Ri+Ai+")*",ia=Ri+Ai+ra,sa="(?:".concat(["".concat(Si).concat(Cn,"?"),Cn,bi,Ei,ta].join("|"),`
)`),oa=RegExp("".concat(In,"(?=").concat(In,")|").concat(sa).concat(ia),"g"),aa=[_i,Jn,wi,xi,Ti],la=RegExp("[".concat(aa.join(""),"]"));function ca(i){return i.split("")}function Mi(i){return la.test(i)}function ua(i){return i.match(oa)||[]}function fa(i){return Mi(i)?ua(i):ca(i)}function ha(i){return i==null?"":String(i)}function da(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return i=ha(i),i&&_t(i)&&!e&&Mi(i)?fa(i):i.split(e)}function On(i,e){var t=document.createElement(i);return e&&Object.keys(e).forEach(function(n){var r=e[n],s=_t(r)?r.trim():r;s===null||s===""||(n==="children"?t.append.apply(t,z(He(s))):t.setAttribute(n,s))}),t}var er={splitClass:"",lineClass:"line",wordClass:"word",charClass:"char",types:["lines","words","chars"],absolute:!1,tagName:"div"};function pa(i,e){e=Oe(er,e);var t=Zn(e.types),n=e.tagName,r=i.nodeValue,s=document.createDocumentFragment(),o=[],l=[];return/^\s/.test(r)&&s.append(" "),o=ea(r).reduce(function(a,c,f,u){var h,d;return t.chars&&(d=da(c).map(function(p){var m=On(n,{class:"".concat(e.splitClass," ").concat(e.charClass),style:"display: inline-block;",children:p});return re(m,"isChar",!0),l=[].concat(z(l),[m]),m})),t.words||t.lines?(h=On(n,{class:"".concat(e.wordClass," ").concat(e.splitClass),style:"display: inline-block; ".concat(t.words&&e.absolute?"position: relative;":""),children:t.chars?d:c}),re(h,{isWord:!0,isWordStart:!0,isWordEnd:!0}),s.appendChild(h)):d.forEach(function(p){s.appendChild(p)}),f<u.length-1&&s.append(" "),t.words?a.concat(h):a},[]),/\s$/.test(r)&&s.append(" "),i.replaceWith(s),{words:o,chars:l}}function Li(i,e){var t=i.nodeType,n={words:[],chars:[]};if(!/(1|3|11)/.test(t))return n;if(t===3&&/\S/.test(i.nodeValue))return pa(i,e);var r=He(i.childNodes);if(r.length&&(re(i,"isSplit",!0),!Ne(i).isRoot)){i.style.display="inline-block",i.style.position="relative";var s=i.nextSibling,o=i.previousSibling,l=i.textContent||"",a=s?s.textContent:" ",c=o?o.textContent:" ";re(i,{isWordEnd:/\s$/.test(l)||/^\s/.test(a),isWordStart:/^\s/.test(l)||/\s$/.test(c)})}return r.reduce(function(f,u){var h=Li(u,e),d=h.words,p=h.chars;return{words:[].concat(z(f.words),z(d)),chars:[].concat(z(f.chars),z(p))}},n)}function ma(i,e,t,n){if(!t.absolute)return{top:e?i.offsetTop:null};var r=i.offsetParent,s=gi(n,2),o=s[0],l=s[1],a=0,c=0;if(r&&r!==document.body){var f=r.getBoundingClientRect();a=f.x+o,c=f.y+l}var u=i.getBoundingClientRect(),h=u.width,d=u.height,p=u.x,m=u.y,v=m+l-c,y=p+o-a;return{width:h,height:d,top:v,left:y}}function Pi(i){Ne(i).isWord?(yi(i),i.replaceWith.apply(i,z(i.childNodes))):He(i.children).forEach(function(e){return Pi(e)})}var ga=function(){return document.createDocumentFragment()};function va(i,e,t){var n=Zn(e.types),r=e.tagName,s=i.getElementsByTagName("*"),o=[],l=[],a=null,c,f,u,h=[],d=i.parentElement,p=i.nextElementSibling,m=ga(),v=window.getComputedStyle(i),y=v.textAlign,x=parseFloat(v.fontSize),T=x*.2;return e.absolute&&(u={left:i.offsetLeft,top:i.offsetTop,width:i.offsetWidth},f=i.offsetWidth,c=i.offsetHeight,re(i,{cssWidth:i.style.width,cssHeight:i.style.height})),He(s).forEach(function(w){var b=w.parentElement===i,S=ma(w,b,e,t),_=S.width,R=S.height,A=S.top,E=S.left;/^br$/i.test(w.nodeName)||(n.lines&&b&&((a===null||A-a>=T)&&(a=A,o.push(l=[])),l.push(w)),e.absolute&&re(w,{top:A,left:E,width:_,height:R}))}),d&&d.removeChild(i),n.lines&&(h=o.map(function(w){var b=On(r,{class:"".concat(e.splitClass," ").concat(e.lineClass),style:"display: block; text-align: ".concat(y,"; width: 100%;")});re(b,"isLine",!0);var S={height:0,top:1e4};return m.appendChild(b),w.forEach(function(_,R,A){var E=Ne(_),P=E.isWordEnd,M=E.top,O=E.height,C=A[R+1];S.height=Math.max(S.height,O),S.top=Math.min(S.top,M),b.appendChild(_),P&&Ne(C).isWordStart&&b.append(" ")}),e.absolute&&re(b,{height:S.height,top:S.top}),b}),n.words||Pi(m),i.replaceChildren(m)),e.absolute&&(i.style.width="".concat(i.style.width||f,"px"),i.style.height="".concat(c,"px"),He(s).forEach(function(w){var b=Ne(w),S=b.isLine,_=b.top,R=b.left,A=b.width,E=b.height,P=Ne(w.parentElement),M=!S&&P.isLine;w.style.top="".concat(M?_-P.top:_,"px"),w.style.left=S?"".concat(u.left,"px"):"".concat(R-(M?u.left:0),"px"),w.style.height="".concat(E,"px"),w.style.width=S?"".concat(u.width,"px"):"".concat(A,"px"),w.style.position="absolute"})),d&&(p?d.insertBefore(i,p):d.appendChild(i)),h}var Ge=Oe(er,{}),ya=(function(){yr(i,null,[{key:"clearData",value:function(){Zo()}},{key:"setDefaults",value:function(t){return Ge=Oe(Ge,Lt(t)),er}},{key:"revert",value:function(t){Tr(t).forEach(function(n){var r=Ne(n),s=r.isSplit,o=r.html,l=r.cssWidth,a=r.cssHeight;s&&(n.innerHTML=o,n.style.width=l||"",n.style.height=a||"",yi(n))})}},{key:"create",value:function(t,n){return new i(t,n)}},{key:"data",get:function(){return Z}},{key:"defaults",get:function(){return Ge},set:function(t){Ge=Oe(Ge,Lt(t))}}]);function i(e,t){Ho(this,i),this.isSplit=!1,this.settings=Oe(Ge,Lt(t)),this.elements=Tr(e),this.split()}return yr(i,[{key:"split",value:function(t){var n=this;this.revert(),this.elements.forEach(function(o){re(o,"html",o.innerHTML)}),this.lines=[],this.words=[],this.chars=[];var r=[window.pageXOffset,window.pageYOffset];t!==void 0&&(this.settings=Oe(this.settings,Lt(t)));var s=Zn(this.settings.types);s.none||(this.elements.forEach(function(o){re(o,"isRoot",!0);var l=Li(o,n.settings),a=l.words,c=l.chars;n.words=[].concat(z(n.words),z(a)),n.chars=[].concat(z(n.chars),z(c))}),this.elements.forEach(function(o){if(s.lines||n.settings.absolute){var l=va(o,n.settings,r);n.lines=[].concat(z(n.lines),z(l))}}),this.isSplit=!0,window.scrollTo(r[0],r[1]),Jo())}},{key:"revert",value:function(){this.isSplit&&(this.lines=null,this.words=null,this.chars=null,this.isSplit=!1),i.revert(this.elements)}}]),i})();const mn=new WeakMap,Ht=[],Xe=[];L.registerPlugin(rt);const Sr=["home","contact","work","archive","film"];function br(i,e){const t=Sr.indexOf(i),n=Sr.indexOf(e);return t===-1||n===-1||n>t?"forward":"backward"}function tr(i){return i?new Promise(e=>i.eventCallback("onComplete",e)):Promise.resolve()}function Ee(i,e={type:"lines, words, chars"}){if(!i)return null;if(mn.has(i))return mn.get(i);const t=e.type||e.types||"lines, words, chars",n={...e,types:t};delete n.type;const r=new ya(i,n);if(r.lines?.length){const s=r.lines,o=s.length,a=window.getComputedStyle(i).textIndent;a&&a!=="0px"&&(s[0].style.paddingLeft=a,i.style.textIndent="0");const f=new Array(o);for(let u=0;u<o;u++){const h=document.createElement("div");h.className="u-overflow-hidden",h.style.cssText="display:block;width:100%",f[u]=h}for(let u=0;u<o;u++){const h=s[u],d=f[u];h.parentNode.insertBefore(d,h),d.appendChild(h),h.style.cssText="display:block;width:100%;overflow:visible"}}return mn.set(i,r),Ht.push(r),r}function Ci(i,{direction:e="up",duration:t=.8,stagger:n=.03,ease:r="power2.out"}={}){const s=Ee(i);if(!s)return null;const o=e==="down"?100:-100;return L.fromTo(s.words,{y:o,opacity:0},{y:0,opacity:1,duration:t,stagger:n,ease:r})}function wa(i,{direction:e="up",duration:t=.4,stagger:n=.02,ease:r="power2.in"}={}){const s=Ee(i);if(!s?.words?.length)return null;const o=e==="up"?-100:100;return L.to(s.words,{y:o,opacity:0,duration:t,stagger:n,ease:r})}async function xa(i,e="forward"){if(!i)return;const t=i.querySelectorAll(".text-reveal-header");if(!t.length)return;const n=[];for(let r=0;r<t.length;r++){const s=t[r],o=s.classList.contains("text-reveal-reverse");let l;e==="forward"?l=o?"up":"down":l=o?"down":"up";const a=wa(s,{direction:l,duration:.35,stagger:e==="backward"?-.02:.02,ease:"power2.in"});a&&n.push(tr(a))}n.length&&await Promise.all(n)}async function Ta(i,e="forward"){if(!i)return;const t=i.querySelectorAll(".text-reveal-header");if(!t.length)return;L.set(Array.from(t),{clearProps:"all"});const n=[];for(let r=0;r<t.length;r++){const s=t[r],o=s.classList.contains("text-reveal-reverse");let l;e==="forward"?l=o?"down":"up":l=o?"up":"down";const a=Ci(s,{direction:l,duration:.8,stagger:e==="backward"?-.04:.04,ease:"power2.out"});a&&n.push(tr(a))}n.length&&await Promise.all(n)}async function Sa(i){if(!i)return;const e=i.querySelectorAll(".text-reveal-header");if(!e.length)return;const t=Array.from(e);t.length&&L.set(t,{clearProps:"all"});const n=[];for(let r=0;r<e.length;r++){const s=e[r],l=s.classList.contains("text-reveal-reverse")?"down":"up",a=Ci(s,{direction:l,duration:.8,stagger:.04});a&&n.push(tr(a))}n.length&&await Promise.all(n)}function ba(){Nn();const i=document.querySelectorAll(".text-reveal:not(.hero .text-reveal)"),e=document.querySelectorAll(".text-reveal-reverse:not(.hero .text-reveal-reverse)"),t=document.querySelectorAll(".text-reveal-header:not(.hero .text-reveal-header)"),n=document.querySelectorAll(".body-text-reveal");for(let r=0;r<i.length;r++){const s=i[r],o=Ee(s);if(!o?.words?.length)continue;const l=L.fromTo(o.words,{y:-100,opacity:0},{y:0,opacity:1,duration:1,stagger:.05,ease:"power2.out",scrollTrigger:{trigger:s,start:"top 80%",toggleActions:"play reverse play reverse"}});l.scrollTrigger&&Xe.push(l.scrollTrigger)}for(let r=0;r<e.length;r++){const s=e[r],o=Ee(s);if(!o?.words?.length)continue;const l=L.fromTo(o.words,{y:100,opacity:0},{y:0,opacity:1,duration:1,stagger:.05,ease:"power2.out",scrollTrigger:{trigger:s,start:"top 80%",toggleActions:"play reverse play reverse"}});l.scrollTrigger&&Xe.push(l.scrollTrigger)}for(let r=0;r<t.length;r++){const s=t[r],o=Ee(s);if(!o?.words?.length)continue;const a=s.classList.contains("text-reveal-reverse")?100:-100,c=L.fromTo(o.words,{y:a,opacity:0},{y:0,opacity:1,duration:1,stagger:.05,ease:"power2.out",scrollTrigger:{trigger:s,start:"top 80%",toggleActions:"play reverse play reverse"}});c.scrollTrigger&&Xe.push(c.scrollTrigger)}for(let r=0;r<n.length;r++){const s=n[r],o=Ee(s,{type:"lines"});if(!o?.lines?.length)continue;L.set(o.lines,{yPercent:100,opacity:0});const l=L.to(o.lines,{yPercent:0,opacity:1,duration:1,stagger:.1,ease:"power4.out",scrollTrigger:{trigger:s,start:"top 90%",toggleActions:"play reverse play reverse"}});l.scrollTrigger&&Xe.push(l.scrollTrigger)}}function Nn(){for(;Xe.length;){const i=Xe.pop();i&&i.kill()}}function Er(){for(let i=Ht.length-1;i>=0;i--){const e=Ht[i];e&&typeof e.revert=="function"&&e.revert()}Ht.length=0}L.registerPlugin(rt);let _r=null,Pt=[],Ar=null;const Ct=300,ct=800,ut=500,Rr=ct-ut;function Ii(){_r=L.matchMedia(),_r.add("(min-width: 992px)",()=>{document.querySelectorAll("[data-animate='font-weight'], [data-animate='font-weight-reverse']").forEach(t=>{const n=Ee(t),r=t.getAttribute("data-animate")==="font-weight-reverse",s=r?n.chars:n.words;L.set(s,{fontWeight:r?ct:ut});const o=Array.from(s).map(h=>({element:h,bounds:null,centerX:0,centerY:0})),l=()=>{o.forEach(h=>{const d=h.element.getBoundingClientRect();h.bounds=d,h.centerX=d.left+d.width/2,h.centerY=d.top+d.height/2})};l();const a={item:t,targetData:o,isReverse:r,updateBounds:l,rafId:null,mouseX:null,mouseY:null,isHovering:!1};Pt.push(a);const c=()=>{if(!a.isHovering)return;const h=a.mouseX,d=a.mouseY;o.forEach(p=>{const m=Math.hypot(p.centerX-h,p.centerY-d);let v;r?v=m<Ct?ut+m/Ct*Rr:ct:v=m<Ct?ct-m/Ct*Rr:ut,L.to(p.element,{duration:.2,ease:"power1.out",fontWeight:v,overwrite:"auto"})}),a.rafId=requestAnimationFrame(c)},f=h=>{a.mouseX=h.clientX,a.mouseY=h.clientY,a.isHovering||(a.isHovering=!0,a.rafId=requestAnimationFrame(c))},u=()=>{a.isHovering=!1,a.rafId&&(cancelAnimationFrame(a.rafId),a.rafId=null);const h=r?ct:ut;o.forEach(d=>{L.to(d.element,{duration:.5,ease:"power2.out",fontWeight:h,overwrite:"auto"})})};t.addEventListener("mousemove",f),t.addEventListener("mouseleave",u),a.onMouseMove=f,a.onMouseLeave=u});const e=()=>{clearTimeout(Ar),Ar=setTimeout(()=>{Pt.forEach(t=>t.updateBounds())},150)};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e),Pt.forEach(t=>{t.rafId&&cancelAnimationFrame(t.rafId),t.item.removeEventListener("mousemove",t.onMouseMove),t.item.removeEventListener("mouseleave",t.onMouseLeave)}),Pt=[]}})}document.addEventListener("DOMContentLoaded",()=>{Ii()});var Ea=/[achlmqstvz]|(-?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/ig,_a=/(?:(-)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/ig,Aa=/[\+\-]?\d*\.?\d+e[\+\-]?\d+/ig,Ra=/(^[#\.][a-z]|[a-y][a-z])/i,Ma=Math.PI/180,La=180/Math.PI,It=Math.sin,Ot=Math.cos,Y=Math.abs,fe=Math.sqrt,Pa=Math.atan2,Dn=1e8,Mr=function(e){return typeof e=="string"},Oi=function(e){return typeof e=="number"},Ca=function(e){return typeof e>"u"},Ia={},Oa={},Yt=1e5,Ni=function(e){return Math.round((e+Dn)%1*Yt)/Yt||(e<0?0:1)},N=function(e){return Math.round(e*Yt)/Yt||0},Lr=function(e){return Math.round(e*1e10)/1e10||0},Pr=function(e){return e.closed=Math.abs(e[0]-e[e.length-2])<.001&&Math.abs(e[1]-e[e.length-1])<.001},Cr=function(e,t,n,r){var s=e[t],o=r===1?6:Fn(s,n,r);if((o||!r)&&o+n+2<s.length)return e.splice(t,0,s.slice(0,n+o+2)),s.splice(0,n+o),1},Di=function(e,t,n){var r=e.length,s=~~(n*r);if(e[s]>t){for(;--s&&e[s]>t;);s<0&&(s=0)}else for(;e[++s]<t&&s<r;);return s<r?s:r-1},Na=function(e,t){var n=e.length;for(e.reverse();n--;)e[n].reversed||ka(e[n])},Ir=function(e,t){return t.totalLength=e.totalLength,e.samples?(t.samples=e.samples.slice(0),t.lookup=e.lookup.slice(0),t.minLength=e.minLength,t.resolution=e.resolution):e.totalPoints&&(t.totalPoints=e.totalPoints),t},Da=function(e,t){var n=e.length,r=e[n-1]||[],s=r.length;n&&t[0]===r[s-2]&&t[1]===r[s-1]&&(t=r.concat(t.slice(2)),n--),e[n]=t};function jt(i){i=Mr(i)&&Ra.test(i)&&document.querySelector(i)||i;var e=i.getAttribute?i:0,t;return e&&(i=i.getAttribute("d"))?(e._gsPath||(e._gsPath={}),t=e._gsPath[i],t&&!t._dirty?t:e._gsPath[i]=$t(i)):i?Mr(i)?$t(i):Oi(i[0])?[i]:i:console.warn("Expecting a <path> element or an SVG path data string")}function Fa(i){for(var e=[],t=0;t<i.length;t++)e[t]=Ir(i[t],i[t].slice(0));return Ir(i,e)}function ka(i){var e=0,t;for(i.reverse();e<i.length;e+=2)t=i[e],i[e]=i[e+1],i[e+1]=t;i.reversed=!i.reversed}var Ua=function(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg","path"),r=[].slice.call(e.attributes),s=r.length,o;for(t=","+t+",";--s>-1;)o=r[s].nodeName.toLowerCase(),t.indexOf(","+o+",")<0&&n.setAttributeNS(null,o,r[s].nodeValue);return n},Ha={rect:"rx,ry,x,y,width,height",circle:"r,cx,cy",ellipse:"rx,ry,cx,cy",line:"x1,x2,y1,y2"},ja=function(e,t){for(var n=t?t.split(","):[],r={},s=n.length;--s>-1;)r[n[s]]=+e.getAttribute(n[s])||0;return r};function Ba(i,e){var t=i.tagName.toLowerCase(),n=.552284749831,r,s,o,l,a,c,f,u,h,d,p,m,v,y,x,T,w,b,S,_,R,A;return t==="path"||!i.getBBox?i:(c=Ua(i,"x,y,width,height,cx,cy,rx,ry,r,x1,x2,y1,y2,points"),A=ja(i,Ha[t]),t==="rect"?(l=A.rx,a=A.ry||l,s=A.x,o=A.y,d=A.width-l*2,p=A.height-a*2,l||a?(m=s+l*(1-n),v=s+l,y=v+d,x=y+l*n,T=y+l,w=o+a*(1-n),b=o+a,S=b+p,_=S+a*n,R=S+a,r="M"+T+","+b+" V"+S+" C"+[T,_,x,R,y,R,y-(y-v)/3,R,v+(y-v)/3,R,v,R,m,R,s,_,s,S,s,S-(S-b)/3,s,b+(S-b)/3,s,b,s,w,m,o,v,o,v+(y-v)/3,o,y-(y-v)/3,o,y,o,x,o,T,w,T,b].join(",")+"z"):r="M"+(s+d)+","+o+" v"+p+" h"+-d+" v"+-p+" h"+d+"z"):t==="circle"||t==="ellipse"?(t==="circle"?(l=a=A.r,u=l*n):(l=A.rx,a=A.ry,u=a*n),s=A.cx,o=A.cy,f=l*n,r="M"+(s+l)+","+o+" C"+[s+l,o+u,s+f,o+a,s,o+a,s-f,o+a,s-l,o+u,s-l,o,s-l,o-u,s-f,o-a,s,o-a,s+f,o-a,s+l,o-u,s+l,o].join(",")+"z"):t==="line"?r="M"+A.x1+","+A.y1+" L"+A.x2+","+A.y2:(t==="polyline"||t==="polygon")&&(h=(i.getAttribute("points")+"").match(_a)||[],s=h.shift(),o=h.shift(),r="M"+s+","+o+" L"+h.join(","),t==="polygon"&&(r+=","+s+","+o+"z")),c.setAttribute("d",Ui(c._gsRawPath=$t(r))),e&&i.parentNode&&(i.parentNode.insertBefore(c,i),i.parentNode.removeChild(i)),c)}function Fi(i,e,t){var n=i[e],r=i[e+2],s=i[e+4],o;return n+=(r-n)*t,r+=(s-r)*t,n+=(r-n)*t,o=r+(s+(i[e+6]-s)*t-r)*t-n,n=i[e+1],r=i[e+3],s=i[e+5],n+=(r-n)*t,r+=(s-r)*t,n+=(r-n)*t,N(Pa(r+(s+(i[e+7]-s)*t-r)*t-n,o)*La)}function ki(i,e,t){t=Ca(t)?1:Lr(t)||0,e=Lr(e)||0;var n=Math.max(0,~~(Y(t-e)-1e-8)),r=Fa(i);if(e>t&&(e=1-e,t=1-t,Na(r),r.totalLength=0),e<0||t<0){var s=Math.abs(~~Math.min(e,t))+1;e+=s,t+=s}r.totalLength||De(r);var o=t>1,l=Or(r,e,Ia,!0),a=Or(r,t,Oa),c=a.segment,f=l.segment,u=a.segIndex,h=l.segIndex,d=a.i,p=l.i,m=h===u,v=d===p&&m,y,x,T,w,b,S,_,R;if(o||n){for(y=u<h||m&&d<p||v&&a.t<l.t,Cr(r,h,p,l.t)&&(h++,y||(u++,v?(a.t=(a.t-l.t)/(1-l.t),d=0):m&&(d-=p))),Math.abs(1-(t-e))<1e-5?u=h-1:!a.t&&u?u--:Cr(r,u,d,a.t)&&y&&h++,l.t===1&&(h=(h+1)%r.length),b=[],S=r.length,_=1+S*n,R=h,_+=(S-h+u)%S,w=0;w<_;w++)Da(b,r[R++%S]);r=b}else if(T=a.t===1?6:Fn(c,d,a.t),e!==t)for(x=Fn(f,p,v?l.t/a.t:l.t),m&&(T+=x),c.splice(d+T+2),(x||p)&&f.splice(0,p+x),w=r.length;w--;)(w<h||w>u)&&r.splice(w,1);else c.angle=Fi(c,d+T,0),d+=T,l=c[d],a=c[d+1],c.length=c.totalLength=0,c.totalPoints=r.totalPoints=8,c.push(l,a,l,a,l,a,l,a);return r.totalLength=0,r}function Ga(i,e,t){e=e||0,i.samples||(i.samples=[],i.lookup=[]);var n=~~i.resolution||12,r=1/n,s=i.length,o=i[e],l=i[e+1],a=e?e/6*n:0,c=i.samples,f=i.lookup,u=(e?i.minLength:Dn)||Dn,h=c[a+t*n-1],d=e?c[a-1]:0,p,m,v,y,x,T,w,b,S,_,R,A,E,P,M,O,C;for(c.length=f.length=0,m=e+2;m<s;m+=6){if(v=i[m+4]-o,y=i[m+2]-o,x=i[m]-o,b=i[m+5]-l,S=i[m+3]-l,_=i[m+1]-l,T=w=R=A=0,Y(v)<.01&&Y(b)<.01&&Y(x)+Y(_)<.01)i.length>8&&(i.splice(m,6),m-=6,s-=6);else for(p=1;p<=n;p++)P=r*p,E=1-P,T=w-(w=(P*P*v+3*E*(P*y+E*x))*P),R=A-(A=(P*P*b+3*E*(P*S+E*_))*P),O=fe(R*R+T*T),O<u&&(u=O),d+=O,c[a++]=d;o+=v,l+=b}if(h)for(h-=d;a<c.length;a++)c[a]+=h;if(c.length&&u){if(i.totalLength=C=c[c.length-1]||0,i.minLength=u,C/u<9999)for(O=M=0,p=0;p<C;p+=u)f[O++]=c[M]<p?++M:M}else i.totalLength=c[0]=0;return e?d-c[e/2-1]:d}function De(i,e){var t,n,r;for(r=t=n=0;r<i.length;r++)i[r].resolution=~~e||12,t+=Ga(i[r]),n+=i[r].length;return i.totalPoints=n,i.totalLength=t,i}function Fn(i,e,t){if(t<=0||t>=1)return 0;var n=i[e],r=i[e+1],s=i[e+2],o=i[e+3],l=i[e+4],a=i[e+5],c=i[e+6],f=i[e+7],u=n+(s-n)*t,h=s+(l-s)*t,d=r+(o-r)*t,p=o+(a-o)*t,m=u+(h-u)*t,v=d+(p-d)*t,y=l+(c-l)*t,x=a+(f-a)*t;return h+=(y-h)*t,p+=(x-p)*t,i.splice(e+2,4,N(u),N(d),N(m),N(v),N(m+(h-m)*t),N(v+(p-v)*t),N(h),N(p),N(y),N(x)),i.samples&&i.samples.splice(e/6*i.resolution|0,0,0,0,0,0,0,0),6}function Or(i,e,t,n){t=t||{},i.totalLength||De(i),(e<0||e>1)&&(e=Ni(e));var r=0,s=i[0],o,l,a,c,f,u,h;if(!e)h=u=r=0,s=i[0];else if(e===1)h=1,r=i.length-1,s=i[r],u=s.length-8;else{if(i.length>1){for(a=i.totalLength*e,f=u=0;(f+=i[u++].totalLength)<a;)r=u;s=i[r],c=f-s.totalLength,e=(a-c)/(f-c)||0}o=s.samples,l=s.resolution,a=s.totalLength*e,u=s.lookup.length?s.lookup[~~(a/s.minLength)]||0:Di(o,a,e),c=u?o[u-1]:0,f=o[u],f<a&&(c=f,f=o[++u]),h=1/l*((a-c)/(f-c)+u%l),u=~~(u/l)*6,n&&h===1&&(u+6<s.length?(u+=6,h=0):r+1<i.length&&(u=h=0,s=i[++r]))}return t.t=h,t.i=u,t.path=i,t.segment=s,t.segIndex=r,t}function Nr(i,e,t,n){var r=i[0],s=n||{},o,l,a,c,f,u,h,d,p;if((e<0||e>1)&&(e=Ni(e)),r.lookup||De(i),i.length>1){for(a=i.totalLength*e,f=u=0;(f+=i[u++].totalLength)<a;)r=i[u];c=f-r.totalLength,e=(a-c)/(f-c)||0}return o=r.samples,l=r.resolution,a=r.totalLength*e,u=r.lookup.length?r.lookup[e<1?~~(a/r.minLength):r.lookup.length-1]||0:Di(o,a,e),c=u?o[u-1]:0,f=o[u],f<a&&(c=f,f=o[++u]),h=1/l*((a-c)/(f-c)+u%l)||0,p=1-h,u=~~(u/l)*6,d=r[u],s.x=N((h*h*(r[u+6]-d)+3*p*(h*(r[u+4]-d)+p*(r[u+2]-d)))*h+d),s.y=N((h*h*(r[u+7]-(d=r[u+1]))+3*p*(h*(r[u+5]-d)+p*(r[u+3]-d)))*h+d),t&&(s.angle=r.totalLength?Fi(r,u,h>=1?1-1e-9:h||1e-9):r.angle||0),s}function ft(i,e,t,n,r,s,o){for(var l=i.length,a,c,f,u,h;--l>-1;)for(a=i[l],c=a.length,f=0;f<c;f+=2)u=a[f],h=a[f+1],a[f]=u*e+h*n+s,a[f+1]=u*t+h*r+o;return i._dirty=1,i}function za(i,e,t,n,r,s,o,l,a){if(!(i===l&&e===a)){t=Y(t),n=Y(n);var c=r%360*Ma,f=Ot(c),u=It(c),h=Math.PI,d=h*2,p=(i-l)/2,m=(e-a)/2,v=f*p+u*m,y=-u*p+f*m,x=v*v,T=y*y,w=x/(t*t)+T/(n*n);w>1&&(t=fe(w)*t,n=fe(w)*n);var b=t*t,S=n*n,_=(b*S-b*T-S*x)/(b*T+S*x);_<0&&(_=0);var R=(s===o?-1:1)*fe(_),A=R*(t*y/n),E=R*-(n*v/t),P=(i+l)/2,M=(e+a)/2,O=P+(f*A-u*E),C=M+(u*A+f*E),F=(v-A)/t,G=(y-E)/n,ae=(-v-A)/t,ve=(-y-E)/n,H=F*F+G*G,J=(G<0?-1:1)*Math.acos(F/fe(H)),le=(F*ve-G*ae<0?-1:1)*Math.acos((F*ae+G*ve)/fe(H*(ae*ae+ve*ve)));isNaN(le)&&(le=h),!o&&le>0?le-=d:o&&le<0&&(le+=d),J%=d,le%=d;var sr=Math.ceil(Y(le)/(d/4)),ce=[],Rt=le/sr,Mt=4/3*It(Rt/2)/(1+Ot(Rt/2)),as=f*t,ls=u*t,cs=u*-n,us=f*n,W;for(W=0;W<sr;W++)r=J+W*Rt,v=Ot(r),y=It(r),F=Ot(r+=Rt),G=It(r),ce.push(v-Mt*y,y+Mt*v,F+Mt*G,G-Mt*F,F,G);for(W=0;W<ce.length;W+=2)v=ce[W],y=ce[W+1],ce[W]=v*as+y*cs+O,ce[W+1]=v*ls+y*us+C;return ce[W-2]=l,ce[W-1]=a,ce}}function $t(i){var e=(i+"").replace(Aa,function(A){var E=+A;return E<1e-4&&E>-1e-4?0:E}).match(Ea)||[],t=[],n=0,r=0,s=2/3,o=e.length,l=0,a="ERROR: malformed path: "+i,c,f,u,h,d,p,m,v,y,x,T,w,b,S,_,R=function(E,P,M,O){x=(M-E)/3,T=(O-P)/3,m.push(E+x,P+T,M-x,O-T,M,O)};if(!i||!isNaN(e[0])||isNaN(e[1]))return console.log(a),t;for(c=0;c<o;c++)if(b=d,isNaN(e[c])?(d=e[c].toUpperCase(),p=d!==e[c]):c--,u=+e[c+1],h=+e[c+2],p&&(u+=n,h+=r),c||(v=u,y=h),d==="M")m&&(m.length<8?t.length-=1:l+=m.length,Pr(m)),n=v=u,r=y=h,m=[u,h],t.push(m),c+=2,d="L";else if(d==="C")m||(m=[0,0]),p||(n=r=0),m.push(u,h,n+e[c+3]*1,r+e[c+4]*1,n+=e[c+5]*1,r+=e[c+6]*1),c+=6;else if(d==="S")x=n,T=r,(b==="C"||b==="S")&&(x+=n-m[m.length-4],T+=r-m[m.length-3]),p||(n=r=0),m.push(x,T,u,h,n+=e[c+3]*1,r+=e[c+4]*1),c+=4;else if(d==="Q")x=n+(u-n)*s,T=r+(h-r)*s,p||(n=r=0),n+=e[c+3]*1,r+=e[c+4]*1,m.push(x,T,n+(u-n)*s,r+(h-r)*s,n,r),c+=4;else if(d==="T")x=n-m[m.length-4],T=r-m[m.length-3],m.push(n+x,r+T,u+(n+x*1.5-u)*s,h+(r+T*1.5-h)*s,n=u,r=h),c+=2;else if(d==="H")R(n,r,n=u,r),c+=1;else if(d==="V")R(n,r,n,r=u+(p?r-n:0)),c+=1;else if(d==="L"||d==="Z")d==="Z"&&(u=v,h=y,m.closed=!0),(d==="L"||Y(n-u)>.5||Y(r-h)>.5)&&(R(n,r,u,h),d==="L"&&(c+=2)),n=u,r=h;else if(d==="A"){if(S=e[c+4],_=e[c+5],x=e[c+6],T=e[c+7],f=7,S.length>1&&(S.length<3?(T=x,x=_,f--):(T=_,x=S.substr(2),f-=2),_=S.charAt(1),S=S.charAt(0)),w=za(n,r,+e[c+1],+e[c+2],+e[c+3],+S,+_,(p?n:0)+x*1,(p?r:0)+T*1),c+=f,w)for(f=0;f<w.length;f++)m.push(w[f]);n=m[m.length-2],r=m[m.length-1]}else console.log(a);return c=m.length,c<6?(t.pop(),c=0):Pr(m),t.totalPoints=l+c,t}function Va(i,e){e===void 0&&(e=1);for(var t=i[0],n=0,r=[t,n],s=2;s<i.length;s+=2)r.push(t,n,i[s],n=(i[s]-t)*e/2,t=i[s],-n);return r}function kn(i,e){Y(i[0]-i[2])<1e-4&&Y(i[1]-i[3])<1e-4&&(i=i.slice(2));var t=i.length-2,n=+i[0],r=+i[1],s=+i[2],o=+i[3],l=[n,r,n,r],a=s-n,c=o-r,f=i.nonSmooth||[],u=Math.abs(i[t]-n)<.001&&Math.abs(i[t+1]-r)<.001,h,d,p,m,v,y,x,T,w,b,S,_,R,A,E;if(!t)return[n,r,n,r,n,r,n,r];for(u&&(i.push(s,o),s=n,o=r,n=i[t-2],r=i[t-1],i.unshift(n,r),t+=4,f=[0,0].concat(f)),e=e||e===0?+e:1,p=2;p<t;p+=2)if(h=n,d=r,n=s,r=o,s=+i[p+2],o=+i[p+3],!(n===s&&r===o)){if(m=a,v=c,a=s-n,c=o-r,f[p]){l.push(n-(n-h)/4,r-(r-d)/4,n,r,n+(s-n)/4,r+(o-r)/4);continue}y=fe(m*m+v*v),x=fe(a*a+c*c),T=fe(Math.pow(a/x+m/y,2)+Math.pow(c/x+v/y,2)),w=(y+x)*e*.25/T,b=n-(n-h)*(y?w/y:0),S=n+(s-n)*(x?w/x:0),_=n-(b+((S-b)*(y*3/(y+x)+.5)/4||0)),R=r-(r-d)*(y?w/y:0),A=r+(o-r)*(x?w/x:0),E=r-(R+((A-R)*(y*3/(y+x)+.5)/4||0)),l.push(N(b+_),N(R+E),N(n),N(r),N(S+_),N(A+E))}return n!==s||r!==o||l.length<4?l.push(N(s),N(o),N(s),N(o)):l.length-=2,l.length===2?l.push(n,r,n,r,n,r):u&&(l.splice(0,6),l.length-=6),l.closed=u,l}function Ui(i){Oi(i[0])&&(i=[i]);var e="",t=i.length,n,r,s,o;for(r=0;r<t;r++){for(o=i[r],e+="M"+N(o[0])+","+N(o[1])+" C",n=o.length,s=2;s<n;s++)e+=N(o[s++])+","+N(o[s++])+" "+N(o[s++])+","+N(o[s++])+" "+N(o[s++])+","+N(o[s])+" ";o.closed&&(e+="z")}return e}var Wa="x,translateX,left,marginLeft,xPercent".split(","),Xa="y,translateY,top,marginTop,yPercent".split(","),qa=Math.PI/180,K,Hi,ze,Un,gn,Dr,Ka=function(){return K||typeof window<"u"&&(K=window.gsap)&&K.registerPlugin&&K},st=function(e,t,n,r){for(var s=t.length,o=r===2?0:r,l=0;l<s;l++)e[o]=parseFloat(t[l][n]),r===2&&(e[o+1]=0),o+=2;return e},qe=function(e,t,n){return parseFloat(e._gsap.get(e,t,n||"px"))||0},ji=function(e){var t=e[0],n=e[1],r;for(r=2;r<e.length;r+=2)t=e[r]+=t,n=e[r+1]+=n},Fr=function(e,t,n,r,s,o,l,a,c){if(l.type==="cubic")t=[t];else{l.fromCurrent!==!1&&t.unshift(qe(n,r,a),s?qe(n,s,c):0),l.relative&&ji(t);var f=s?kn:Va;t=[f(t,l.curviness)]}return t=o(Bi(t,n,l)),Qt(e,n,r,t,"x",a),s&&Qt(e,n,s,t,"y",c),De(t,l.resolution||(l.curviness===0?20:12))},Ya=function(e){return e},$a=/[-+\.]*\d+\.?(?:e-|e\+)?\d*/g,kr=function(e,t,n){var r=$e(e),s=0,o=0,l;return(e.tagName+"").toLowerCase()==="svg"?(l=e.viewBox.baseVal,l.width||(l={width:+e.getAttribute("width"),height:+e.getAttribute("height")})):l=t&&e.getBBox&&e.getBBox(),t&&t!=="auto"&&(s=t.push?t[0]*(l?l.width:e.offsetWidth||0):t.x,o=t.push?t[1]*(l?l.height:e.offsetHeight||0):t.y),n.apply(s||o?r.apply({x:s,y:o}):{x:r.e,y:r.f})},Hn=function(e,t,n,r){var s=$e(e.parentNode,!0,!0),o=s.clone().multiply($e(t)),l=kr(e,n,s),a=kr(t,r,s),c=a.x,f=a.y,u;return o.e=o.f=0,r==="auto"&&t.getTotalLength&&t.tagName.toLowerCase()==="path"&&(u=t.getAttribute("d").match($a)||[],u=o.apply({x:+u[0],y:+u[1]}),c+=u.x,f+=u.y),u&&(u=o.apply(t.getBBox()),c-=u.x,f-=u.y),o.e=c-l.x,o.f=f-l.y,o},Bi=function(e,t,n){var r=n.align,s=n.matrix,o=n.offsetX,l=n.offsetY,a=n.alignOrigin,c=e[0][0],f=e[0][1],u=qe(t,"x"),h=qe(t,"y"),d,p,m;return!e||!e.length?jt("M0,0L0,0"):(r&&(r==="self"||(d=Un(r)[0]||t)===t?ft(e,1,0,0,1,u-c,h-f):(a&&a[2]!==!1?K.set(t,{transformOrigin:a[0]*100+"% "+a[1]*100+"%"}):a=[qe(t,"xPercent")/-100,qe(t,"yPercent")/-100],p=Hn(t,d,a,"auto"),m=p.apply({x:c,y:f}),ft(e,p.a,p.b,p.c,p.d,u+p.e-(m.x-p.e),h+p.f-(m.y-p.f)))),s?ft(e,s.a,s.b,s.c,s.d,s.e,s.f):(o||l)&&ft(e,1,0,0,1,o||0,l||0),e)},Qt=function(e,t,n,r,s,o){var l=t._gsap,a=l.harness,c=a&&a.aliases&&a.aliases[n],f=c&&c.indexOf(",")<0?c:n,u=e._pt=new Hi(e._pt,t,f,0,0,Ya,0,l.set(t,f,e));u.u=ze(l.get(t,f,o))||0,u.path=r,u.pp=s,e._props.push(f)},Qa=function(e,t){return function(n){return e||t!==1?ki(n,e,t):n}},Gi={version:"3.14.2",name:"motionPath",register:function(e,t,n){K=e,ze=K.utils.getUnit,Un=K.utils.toArray,gn=K.core.getStyleSaver,Dr=K.core.reverting||function(){},Hi=n},init:function(e,t,n){if(!K)return console.warn("Please gsap.registerPlugin(MotionPathPlugin)"),!1;(!(typeof t=="object"&&!t.style)||!t.path)&&(t={path:t});var r=[],s=t,o=s.path,l=s.autoRotate,a=s.unitX,c=s.unitY,f=s.x,u=s.y,h=o[0],d=Qa(t.start,"end"in t?t.end:1),p,m;if(this.rawPaths=r,this.target=e,this.tween=n,this.styles=gn&&gn(e,"transform"),(this.rotate=l||l===0)&&(this.rOffset=parseFloat(l)||0,this.radians=!!t.useRadians,this.rProp=t.rotation||"rotation",this.rSet=e._gsap.set(e,this.rProp,this),this.ru=ze(e._gsap.get(e,this.rProp))||0),Array.isArray(o)&&!("closed"in o)&&typeof h!="number"){for(m in h)!f&&~Wa.indexOf(m)?f=m:!u&&~Xa.indexOf(m)&&(u=m);f&&u?r.push(Fr(this,st(st([],o,f,0),o,u,1),e,f,u,d,t,a||ze(o[0][f]),c||ze(o[0][u]))):f=u=0;for(m in h)m!==f&&m!==u&&r.push(Fr(this,st([],o,m,2),e,m,0,d,t,ze(o[0][m])))}else p=d(Bi(jt(t.path),e,t)),De(p,t.resolution),r.push(p),Qt(this,e,t.x||"x",p,"x",t.unitX||"px"),Qt(this,e,t.y||"y",p,"y",t.unitY||"px");n.vars.immediateRender&&this.render(n.progress(),this)},render:function(e,t){var n=t.rawPaths,r=n.length,s=t._pt;if(t.tween._time||!Dr()){for(e>1?e=1:e<0&&(e=0);r--;)Nr(n[r],e,!r&&t.rotate,n[r]);for(;s;)s.set(s.t,s.p,s.path[s.pp]+s.u,s.d,e),s=s._next;t.rotate&&t.rSet(t.target,t.rProp,n[0].angle*(t.radians?qa:1)+t.rOffset+t.ru,t,e)}else t.styles.revert()},getLength:function(e){return De(jt(e)).totalLength},sliceRawPath:ki,getRawPath:jt,pointsToSegment:kn,stringToRawPath:$t,rawPathToString:Ui,transformRawPath:ft,getGlobalMatrix:$e,getPositionOnPath:Nr,cacheRawPathMeasurements:De,convertToPath:function(e,t){return Un(e).map(function(n){return Ba(n,t!==!1)})},convertCoordinates:function(e,t,n){var r=$e(t,!0,!0).multiply($e(e));return n?r.apply(n):r},getAlignMatrix:Hn,getRelativePosition:function(e,t,n,r){var s=Hn(e,t,n,r);return{x:s.e,y:s.f}},arrayToRawPath:function(e,t){t=t||{};var n=st(st([],e,t.x||"x",0),e,t.y||"y",1);return t.relative&&ji(n),[t.type==="cubic"?n:kn(n,t.curviness)]}};Ka()&&K.registerPlugin(Gi);const ln=[{title:"Blurred Vision",image:"/work/work-1.jpg",href:"/film.html"},{title:"Silent Motion",image:"/work/work-2.jpg",href:"/archive.html"},{title:"Red Mirage",image:"/work/work-3.jpg",href:"/contact.html"},{title:"Echoed Silhouette",image:"/work/work-4.jpg",href:"/contact.html"}];L.registerPlugin(Gi,$r);const D={SLIDES_MULTIPLIER:5,EXTRA_SLIDES_MULTIPLIER:3,END_SCALE:5,SLIDE_WIDTH_RATIO:.45,SCROLL_INTENSITY:1,LERP_FACTOR:.1,SCROLL_TIMEOUT:150,MOBILE_BREAKPOINT:1e3,OVAL_RADIUS_X_MOBILE:144,OVAL_RADIUS_Y_MOBILE:336,OVAL_RADIUS_X_DESKTOP:540,OVAL_RADIUS_Y_DESKTOP:336,THUMBNAIL_OFFSET_Y:-25,OUTER_DISTANCE_MULTIPLIER:3,TAU:Math.PI*2,DRAG_SENSITIVITY:1.2,MOMENTUM_DECAY:.94,MOMENTUM_MIN_SPEED:.05},g={slider:null,slideTitle:null,thumbnailWheel:null,totalImages:ln.length,totalSlides:0,slideWidth:0,viewportCenter:0,isMobile:!1,currentX:0,targetX:0,isScrolling:!1,scrollTimeout:null,activeSlideIndex:0,isInitialized:!1,isThumbnailIntroPlaying:!1,thumbnailIntroTl:null,rafId:null,slides:null,thumbnails:null,introRadiusProgress:0,dragProxy:null,draggable:null,dragMomentum:0,lastDragTime:0,isDragging:!1};let Pe=0,nr=0,cn=0;const Ze={passive:!1},rr=()=>g.isMobile?{rx:D.OVAL_RADIUS_X_MOBILE,ry:D.OVAL_RADIUS_Y_MOBILE}:{rx:D.OVAL_RADIUS_X_DESKTOP,ry:D.OVAL_RADIUS_Y_DESKTOP},Za=()=>-(Math.abs(g.currentX)/g.slideWidth*D.TAU/g.totalSlides)+Math.PI/2;function Ja(){if(!g.slider)return;const i=document.createDocumentFragment(),e=g.totalSlides*D.EXTRA_SLIDES_MULTIPLIER;for(let t=0;t<e;t++){const n=document.createElement("div");n.className="slide";const r=document.createElement("img");r.src=ln[t%g.totalImages].image,n.appendChild(r),i.appendChild(n)}g.slider.appendChild(i),g.slides=g.slider.querySelectorAll(".slide")}function zi(){if(!g.thumbnailWheel)return;const i=document.createDocumentFragment(),{rx:e,ry:t}=rr(),n=g.viewportCenter,r=window.innerHeight*.5+D.THUMBNAIL_OFFSET_Y;for(let s=0;s<g.totalSlides;s++){const o=s/g.totalSlides*D.TAU,l=document.createElement("div");l.className="thumbnail-item";const a=document.createElement("img");a.src=ln[s%g.totalImages].image,l.appendChild(a),l._scale=1,l._angle=o;const c=e*Math.cos(o)+n,f=t*Math.sin(o)+r;L.set(l,{x:c,y:f,transformOrigin:"center center"}),i.appendChild(l)}g.thumbnailWheel.appendChild(i),g.thumbnails=g.thumbnailWheel.querySelectorAll(".thumbnail-item")}function Vi(){if(!g.slides)return;const i=new Float32Array(g.slides.length);g.slides.forEach((t,n)=>{i[n]=n*g.slideWidth-g.slideWidth}),L.set(g.slides,{x:t=>i[t]});const e=g.viewportCenter-cn;g.currentX=e,g.targetX=e}function Zt(i){const e=i.deltaY||i.detail||i.wheelDelta*-1;g.targetX-=e*D.SCROLL_INTENSITY,g.isScrolling=!0,clearTimeout(g.scrollTimeout),g.scrollTimeout=setTimeout(()=>{g.isScrolling=!1},D.SCROLL_TIMEOUT)}function Wi(i){(i.target===document||i.target===document.body)&&window.scrollTo(0,0)}function Xi(){Math.abs(g.dragMomentum)>D.MOMENTUM_MIN_SPEED?(g.targetX-=g.dragMomentum*.016,g.dragMomentum*=D.MOMENTUM_DECAY):g.isDragging||(g.dragMomentum=0),g.currentX+=(g.targetX-g.currentX)*D.LERP_FACTOR,g.currentX>0?(g.currentX-=Pe,g.targetX-=Pe):g.currentX<-Pe&&(g.currentX+=Pe,g.targetX+=Pe);let i=0,e=1/0;g.slides.forEach((o,l)=>{const a=l*g.slideWidth+g.currentX,c=a+cn,f=Math.abs(c-g.viewportCenter);o.style.transform=`translate3d(${a}px, 0, 0)`;const u=Math.min(f/nr,1),d=1+(u<.5?2*u*u:1-Math.pow(-2*u+2,2)*.5)*(D.END_SCALE-1),p=o.firstElementChild;p.style.transform=`scale(${d})`,f<e&&(e=f,i=l%g.totalSlides)});const t=Math.abs(g.currentX)/g.slideWidth,n=Math.floor(t)%g.totalSlides;n!==g.activeSlideIndex&&(g.activeSlideIndex=n);const r=i%g.totalImages,s=ln[r];g.slideTitle.textContent!==s.title&&(g.slideTitle.textContent=s.title,g.slideTitle.dataset.href=s.href||""),qi(),g.rafId=requestAnimationFrame(Xi)}function qi(){if(!g.thumbnails)return;const i=Za(),{rx:e,ry:t}=rr(),n=g.viewportCenter,r=window.innerHeight*.5+D.THUMBNAIL_OFFSET_Y;g.thumbnails.forEach(s=>{const o=typeof s._scale=="number"?s._scale:1,l=g.introRadiusProgress,a=s._angle+i,c=e*l*Math.cos(a)+n,f=t*l*Math.sin(a)+r;s.style.transform=`translate3d(${c}px, ${f}px, 0) scale(${o})`})}let jn=0;function el(){jn=g.draggable?g.draggable.x:0,g.lastDragTime=performance.now(),g.dragMomentum=0,g.isDragging=!0}function tl(){if(!g.draggable)return;const i=performance.now(),e=g.draggable.x-jn,t=Math.max((i-g.lastDragTime)/1e3,.001);jn=g.draggable.x,g.lastDragTime=i;const n=e*D.DRAG_SENSITIVITY;g.targetX-=n,g.dragMomentum=n/t}function nl(){g.isDragging=!1}function rl(){Ki();const i=document.createElement("div");i.style.position="absolute",i.style.left="0",i.style.top="0",i.style.width="1px",i.style.height="1px",i.style.pointerEvents="none",document.body.appendChild(i),g.dragProxy=i;const e=$r.create(i,{trigger:g.thumbnailWheel,type:"x",cursor:"grab",activeCursor:"grabbing",onPress:el,onDrag:tl,onRelease:nl,allowContextMenu:!0,minimumMovement:1,zIndexBoost:!1,dragResistance:.02});g.draggable=e&&e[0]?e[0]:null}function Ki(){g.draggable&&(g.draggable.kill(),g.draggable=null),g.dragProxy&&g.dragProxy.parentNode&&(g.dragProxy.parentNode.removeChild(g.dragProxy),g.dragProxy=null)}function il(){if(!g.thumbnailWheel||!g.thumbnails?.length)return;g.thumbnailIntroTl&&g.thumbnailIntroTl.kill(),g.isThumbnailIntroPlaying=!0,g.introRadiusProgress=0,g.viewportCenter,rr(),g.thumbnailWheel&&(g.thumbnailWheel.style.pointerEvents="none"),g.slider&&(g.slider.style.pointerEvents="none"),g.thumbnails.forEach((e,t)=>{e._scale=0,L.set(e,{opacity:0,zIndex:100+(g.thumbnails.length-1-t)})}),g.thumbnailIntroTl=L.timeline({onComplete:()=>{g.isThumbnailIntroPlaying=!1,g.introRadiusProgress=1,g.thumbnailWheel&&(g.thumbnailWheel.style.pointerEvents="auto"),g.slider&&(g.slider.style.pointerEvents="auto")}}),g.thumbnails.forEach((e,t)=>{const n=(g.thumbnails.length-1-t)*.08;g.thumbnailIntroTl.to(e,{opacity:1,duration:.5,ease:"power2.out"},n),g.thumbnailIntroTl.to(e,{_scale:1.3,duration:.5,ease:"power2.out"},n)}),g.thumbnailIntroTl.to({},{duration:.3}),g.thumbnailIntroTl.to(g,{introRadiusProgress:1,duration:1.2,ease:"power2.inOut"},"expand"),g.thumbnails.forEach(e=>{g.thumbnailIntroTl.to(e,{_scale:1,duration:1.2,ease:"power2.inOut"},"expand")});const i=document.querySelector(".slide-title");if(i){const e=Ee(i);e?.chars&&(L.set(i,{opacity:1}),g.thumbnailIntroTl.fromTo(e.chars,{y:100,opacity:0},{y:0,opacity:1,duration:1,stagger:{amount:.2},ease:"power2.out"},"expand+=0.2"))}}function Yi(){g.thumbnailIntroTl&&(g.thumbnailIntroTl.kill(),g.thumbnailIntroTl=null),g.isThumbnailIntroPlaying=!1,g.introRadiusProgress=1,g.isMobile=window.innerWidth<D.MOBILE_BREAKPOINT,g.slideWidth=window.innerWidth*D.SLIDE_WIDTH_RATIO,g.viewportCenter=window.innerWidth*.5,cn=g.slideWidth*.5,Pe=g.totalSlides*g.slideWidth,nr=g.slideWidth*D.OUTER_DISTANCE_MULTIPLIER,g.thumbnailWheel&&(g.thumbnailWheel.innerHTML=""),zi(),Vi(),qi()}function sl(){window.addEventListener("wheel",Zt,Ze),window.addEventListener("DOMMouseScroll",Zt,Ze),window.addEventListener("scroll",Wi,Ze),window.addEventListener("resize",Yi)}function gt(){g.thumbnailIntroTl&&(g.thumbnailIntroTl.kill(),g.thumbnailIntroTl=null),g.isThumbnailIntroPlaying=!1,g.rafId&&(cancelAnimationFrame(g.rafId),g.rafId=null),window.removeEventListener("wheel",Zt,Ze),window.removeEventListener("DOMMouseScroll",Zt,Ze),window.removeEventListener("scroll",Wi,Ze),window.removeEventListener("resize",Yi),g.slideTitle&&(g.slideTitle.onclick=null),g.slider&&(g.slider.innerHTML=""),g.thumbnailWheel&&(g.thumbnailWheel.innerHTML=""),Ki(),g.slides=null,g.thumbnails=null,g.isInitialized=!1}function ol(){gt(),g.slider=document.querySelector(".slider"),g.slideTitle=document.querySelector(".slide-title"),g.thumbnailWheel=document.querySelector(".thumbnail-wheel"),!(!g.slider||!g.slideTitle||!g.thumbnailWheel)&&(g.isMobile=window.innerWidth<D.MOBILE_BREAKPOINT,g.slideWidth=window.innerWidth*D.SLIDE_WIDTH_RATIO,g.viewportCenter=window.innerWidth*.5,g.totalSlides=g.totalImages*D.SLIDES_MULTIPLIER,cn=g.slideWidth*.5,Pe=g.totalSlides*g.slideWidth,nr=g.slideWidth*D.OUTER_DISTANCE_MULTIPLIER,Ja(),zi(),Vi(),sl(),rl(),g.slideTitle&&L.set(g.slideTitle,{opacity:0}),il(),g.slideTitle.onclick=()=>{const i=g.slideTitle.dataset.href;i&&(window.location.href=i)},Xi(),g.isInitialized=!0)}const se=[{title:"Motion Study",image:"/canvas/image-1.jpg",year:2024},{title:"Idle Form",image:"/canvas/image-2.jpg",year:2023},{title:"Blur Signal",image:"/canvas/image-3.jpg",year:2024},{title:"Still Drift",image:"/canvas/image-4.jpg",year:2023},{title:"Tidewalk",image:"/canvas/image-5.jpg",year:2024},{title:"Core Motion",image:"/canvas/image-6.jpg",year:2022},{title:"White Bloom",image:"/canvas/image-7.jpg",year:2024},{title:"Backrun",image:"/canvas/image-8.jpg",year:2023},{title:"Rushline",image:"/canvas/image-9.jpg",year:2024},{title:"Afterimage",image:"/canvas/image-1.jpg",year:2023},{title:"Shadowhead",image:"/canvas/image-2.jpg",year:2022},{title:"Opal Lace",image:"/canvas/image-3.jpg",year:2024},{title:"Glassprint",image:"/canvas/image-4.jpg",year:2024},{title:"Redshift",image:"/canvas/image-5.jpg",year:2023},{title:"White Noise",image:"/canvas/image-6.jpg",year:2023},{title:"Twin Field",image:"/canvas/image-7.jpg",year:2024},{title:"Petalloop",image:"/canvas/image-8.jpg",year:2023},{title:"Ghostwalk",image:"/canvas/image-9.jpg",year:2024},{title:"Heatwave",image:"/canvas/image-1.jpg",year:2023},{title:"Sky Drift",image:"/canvas/image-2.jpg",year:2024},{title:"Spindle",image:"/canvas/image-3.jpg",year:2022},{title:"Pacer",image:"/canvas/image-4.jpg",year:2023},{title:"Stride",image:"/canvas/image-5.jpg",year:2024},{title:"Cryo Pulse",image:"/canvas/image-6.jpg",year:2022},{title:"Velvet Blur",image:"/canvas/image-7.jpg",year:2024}],al=`
  varying vec2 vUv;
  void main() {
    vUv = uv;
    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
  }
`,ll=`
  uniform vec2 uResolution;
  uniform float uDistortion;
  uniform float uTime;
  uniform sampler2D uImageAtlas;
  uniform float uTextureCount;
  uniform vec2 uOffset;
  uniform float uCellSize;
  uniform float uFocusIndex;
  uniform float uFocusState;
  uniform float uMousePressed;
  uniform float uZoom;
  uniform float uIntroProgress;

  varying vec2 vUv;

  void main() {
    vec2 screenUV = (vUv - 0.5) * 2.0;

    // Apply zoom
    screenUV /= uZoom;

    // Fisheye distortion - flattens when mouse is pressed
    float radius = length(screenUV);
    float effectiveDistortion = mix(uDistortion, 0.0, uMousePressed);
    float distortion = 1.0 - effectiveDistortion * radius * radius;
    vec2 distortedUV = screenUV * distortion;

    vec2 aspectRatio = vec2(uResolution.x / uResolution.y, 1.0);
    // Expand from center based on intro progress
    vec2 worldCoord = (distortedUV * aspectRatio) * uIntroProgress + uOffset;

    vec2 cellPos = worldCoord / uCellSize;
    vec2 cellId = floor(cellPos);
    vec2 cellUV = fract(cellPos);

    float texIndex = mod(cellId.x + cellId.y * 3.0, uTextureCount);
    if (texIndex < 0.0) texIndex += uTextureCount;
    texIndex = floor(texIndex);

    bool isFocused = abs(texIndex - uFocusIndex) < 0.1;

    vec3 color = vec3(0.0);
    float outAlpha = 0.0;

    float baseImageSize = 0.7;
    float targetImageSize = isFocused ? 0.92 : 0.5;
    float imageSize = mix(baseImageSize, targetImageSize, uFocusState);
    
    // Scale image from center during intro
    imageSize *= smoothstep(0.0, 0.5, uIntroProgress);

    float imageBorder = (1.0 - imageSize) * 0.5;
    vec2 imageUV = (cellUV - imageBorder) / imageSize;

    float edgeSmooth = 0.02;
    vec2 imageMask = smoothstep(-edgeSmooth, edgeSmooth, imageUV) *
                    smoothstep(-edgeSmooth, edgeSmooth, 1.0 - imageUV);
    float imageAlpha = imageMask.x * imageMask.y;

    bool inImageArea = imageUV.x >= 0.0 && imageUV.x <= 1.0 && imageUV.y >= 0.0 && imageUV.y <= 1.0;

    if (inImageArea && imageAlpha > 0.0) {
      float atlasSize = ceil(sqrt(uTextureCount));
      vec2 atlasPos = vec2(mod(texIndex, atlasSize), floor(texIndex / atlasSize));

      // Chromatic Aberration - increases at edges of viewport
      float caStrength = 0.012 * pow(radius, 2.0);
      vec2 caOffset = screenUV * caStrength;

      vec2 imageUVR = imageUV - caOffset;
      vec2 atlasUVR = (atlasPos + clamp(imageUVR, 0.0, 1.0)) / atlasSize;
      atlasUVR.y = 1.0 - atlasUVR.y;

      vec2 imageUVG = imageUV;
      vec2 atlasUVG = (atlasPos + imageUVG) / atlasSize;
      atlasUVG.y = 1.0 - atlasUVG.y;

      vec2 imageUVB = imageUV + caOffset;
      vec2 atlasUVB = (atlasPos + clamp(imageUVB, 0.0, 1.0)) / atlasSize;
      atlasUVB.y = 1.0 - atlasUVB.y;

      float r = texture2D(uImageAtlas, atlasUVR).r;
      float g = texture2D(uImageAtlas, atlasUVG).g;
      float b = texture2D(uImageAtlas, atlasUVB).b;
      float a = texture2D(uImageAtlas, atlasUVG).a;

      vec3 finalImageColor = vec3(r, g, b);

      // Darken non-focused images during focus
      if (!isFocused) {
        finalImageColor *= mix(1.0, 0.15, uFocusState);
      }

      color = finalImageColor;
      outAlpha = imageAlpha * a;
    }

    // Vignette fade at edges
    float fade = 1.0 - smoothstep(1.0, 1.6, radius);
    
    // Fade in based on intro progress
    float introAlpha = smoothstep(0.0, 0.25, uIntroProgress);
    outAlpha *= (fade * introAlpha);

    gl_FragColor = vec4(color * fade * introAlpha, outAlpha);
  }
`,Q={cellSize:.65,distortion:.08,lerpFactor:.08};let bt=!1,he=null,B=null,Jt=null,en=null,k=null,Bt=null,ue={x:0,y:0},ge={x:0,y:0},tn=!1,ir=!0,$i=0,Ke={x:0,y:0},V=-1,nt={value:0},Fe={x:0,y:0},Et={value:1},_e=0,un={value:0};const cl=i=>{const e=Math.ceil(Math.sqrt(i.length)),t=512,n=document.createElement("canvas");n.width=n.height=e*t;const r=n.getContext("2d");r.fillStyle="#000",r.fillRect(0,0,n.width,n.height),i.forEach((o,l)=>{const a=l%e*t,c=Math.floor(l/e)*t;if(o.image?.complete){const f=o.image,u=f.width/f.height;let h=t,d=t,p=a,m=c;u>1?(d=t/u,m=c+(t-d)/2):(h=t*u,p=a+(t-h)/2),r.drawImage(f,p,m,h,d)}});const s=new fs(n);return s.wrapS=wt,s.wrapT=wt,s.minFilter=Ue,s.magFilter=Ue,s.flipY=!1,s},ul=()=>{const i=new Kn,e=[];let t=0;return new Promise(n=>{se.forEach(r=>{const s=i.load(r.image,()=>{++t===se.length&&n(e)});s.wrapS=wt,s.wrapT=wt,s.minFilter=Ue,s.magFilter=Ue,e.push(s)})})},fl=(i,e,t)=>{let n={x:0,y:0},r=1/0;const s=15,o=Math.round(e),l=Math.round(t);for(let a=o-s;a<=o+s;a++)for(let c=l-s;c<=l+s;c++){let f=(a+c*3)%se.length;if(f<0&&(f+=se.length),f===i){const u=(a-e)**2+(c-t)**2;u<r&&(r=u,n={x:a,y:c})}}return n},Bn=i=>i.split("").map(e=>`<span style="display:inline-block; will-change: transform;">${e===" "?"&nbsp;":e}</span>`).join(""),hl=(i,e)=>{i.querySelector("span")||(i.innerHTML=Bn(i.textContent));const t=i.querySelectorAll("span");L.to(t,{y:"100%",opacity:0,stagger:.015,duration:.25,ease:"power2.in",onComplete:()=>{i.innerHTML=Bn(e);const n=i.querySelectorAll("span");L.fromTo(n,{y:"100%",opacity:0},{y:"0%",opacity:1,stagger:.015,duration:.25,ease:"power2.out"})}})},Qi=i=>{const e=document.getElementById("archive-overlay"),t=document.getElementById("archive-title");if(i!==-1){const n=se[i].title;t&&(e.classList.contains("active")&&t.textContent.replace(/\u00a0/g," ")!==n?hl(t,n):(t.innerHTML=Bn(n),L.set(t.querySelectorAll("span"),{y:"0%",opacity:1}))),e.classList.add("active")}else e.classList.remove("active")},Gn=(i,e,t)=>{V===i&&Fe.x===e&&Fe.y===t||(V=i,Fe={x:e,y:t},k?.material?.uniforms&&(k.material.uniforms.uFocusIndex.value=i),L.to(nt,{value:1,duration:.5,ease:"power2.out",onUpdate:()=>{k?.material?.uniforms&&(k.material.uniforms.uFocusState.value=nt.value)}}),ge.x=(e+.5)*Q.cellSize,ge.y=(t+.5)*Q.cellSize,Qi(i))},ke=()=>{V!==-1&&(V=-1,L.to(nt,{value:0,duration:.4,ease:"power2.out",onUpdate:()=>{k?.material?.uniforms&&(k.material.uniforms.uFocusState.value=nt.value)}}),Qi(-1))},nn=i=>{if(V===-1)return;let e=V+i;e>=se.length&&(e=0),e<0&&(e=se.length-1);const t=fl(e,Fe.x,Fe.y);Gn(e,t.x,t.y)},dl=(i,e)=>{if(!B)return null;const t=B.domElement.getBoundingClientRect(),n=(i-t.left)/t.width*2-1,r=-((e-t.top)/t.height*2-1),s=Math.sqrt(n*n+r*r),o=1-Q.distortion*s*s,l=t.width/t.height;let a=n*o*l+ue.x,c=r*o+ue.y;const f=Math.floor(a/Q.cellSize),u=Math.floor(c/Q.cellSize),h=a/Q.cellSize-f,d=c/Q.cellSize-u,m=(1-(V===-1?.7:nt.value>.5?.92:.7))/2,v=h>m&&h<1-m&&d>m&&d<1-m;let y=(f+u*3)%se.length;return y<0&&(y+=se.length),{cellX:f,cellY:u,texIndex:y,isOnImage:v}},pl=i=>{k?.material?.uniforms?.uIntroProgress?.value<.9||i.target.closest(".nav-wrap")||i.target.closest(".nav-btn")||i.target.closest(".menu-wrap")||i.target.closest(".menu-box")||i.target.closest(".bottom-nav-wrap")||(tn=!0,ir=!0,$i=Date.now(),Ke.x=i.clientX,Ke.y=i.clientY,i.clientX,i.clientY,_e=0,L.to(un,{value:1,duration:.3,ease:"power2.out"}))},Zi=i=>{if(!tn)return;const e=i.clientX-Ke.x,t=i.clientY-Ke.y;if(_e+=Math.sqrt(e*e+t*t),_e>10){ir=!1;const r=Math.min(_e/200,1);Et.value=1-r*.2,V!==-1&&_e>50&&ke()}ge.x-=e*.002,ge.y+=t*.002,Ke.x=i.clientX,Ke.y=i.clientY},Ji=i=>{if(!tn)return;tn=!1,L.to(un,{value:0,duration:.4,ease:"power2.out"}),Et.value!==1&&L.to(Et,{value:1,duration:.3,ease:"power2.out"});const e=Date.now()-$i<250,t=_e<15;if((ir||t)&&e){const n=dl(i.clientX,i.clientY);if(!n){V!==-1&&ke();return}const{cellX:r,cellY:s,texIndex:o,isOnImage:l}=n;V===-1?l&&Gn(o,r,s):l&&(o!==V||r!==Fe.x||s!==Fe.y)?Gn(o,r,s):ke()}_e=0},ml=i=>{k?.material?.uniforms?.uIntroProgress?.value<.9||i.target.closest("#gallery")&&(i.preventDefault(),ge.x+=i.deltaX*.001,ge.y-=i.deltaY*.001,V!==-1&&(Math.abs(i.deltaX)>10||Math.abs(i.deltaY)>10)&&ke())},es=i=>{V!==-1&&(i.key==="ArrowRight"?(i.preventDefault(),nn(1)):i.key==="ArrowLeft"?(i.preventDefault(),nn(-1)):i.key==="Escape"&&(i.preventDefault(),ke()))},ts=()=>{if(!he||!B)return;const i=he.offsetWidth,e=he.offsetHeight;B.setSize(i,e),B.setPixelRatio(Math.min(window.devicePixelRatio,2)),k?.material?.uniforms&&k.material.uniforms.uResolution.value.set(i,e)},ns=()=>{bt&&(Bt=requestAnimationFrame(ns),ue.x+=(ge.x-ue.x)*Q.lerpFactor,ue.y+=(ge.y-ue.y)*Q.lerpFactor,k?.material?.uniforms&&(k.material.uniforms.uOffset.value.set(ue.x,ue.y),k.material.uniforms.uTime.value=performance.now()*.001,k.material.uniforms.uMousePressed.value=un.value,k.material.uniforms.uZoom.value=Et.value),B.render(Jt,en))},gl=async()=>{if(he=document.getElementById("gallery"),!he)return;const i=he.offsetWidth,e=he.offsetHeight;B=new qn({antialias:!0,alpha:!0}),B.setSize(i,e),B.setPixelRatio(Math.min(window.devicePixelRatio,2)),B.setClearColor(0,0),he.appendChild(B.domElement),Jt=new Wn,en=new Yn(-1,1,1,-1,.1,10),en.position.z=1;const t=await ul(),n=cl(t),r=new Yr(2,2),s=new Wt({vertexShader:al,fragmentShader:ll,uniforms:{uResolution:{value:new de(i,e)},uDistortion:{value:Q.distortion},uTime:{value:0},uImageAtlas:{value:n},uTextureCount:{value:se.length},uOffset:{value:new de(0,0)},uCellSize:{value:Q.cellSize},uFocusIndex:{value:-1},uFocusState:{value:0},uMousePressed:{value:0},uZoom:{value:1},uIntroProgress:{value:0}},transparent:!0});k=new sn(r,s),Jt.add(k),L.fromTo(s.uniforms.uIntroProgress,{value:0},{value:1,duration:1.8,ease:"power3.out",delay:.2});const o=B.domElement;o.addEventListener("pointerdown",pl),window.addEventListener("pointermove",Zi),window.addEventListener("pointerup",Ji),o.addEventListener("wheel",ml,{passive:!1}),window.addEventListener("keydown",es),window.addEventListener("resize",ts);const l=document.getElementById("archive-prev"),a=document.getElementById("archive-next");l&&l.addEventListener("click",f=>{f.stopPropagation(),nn(-1)}),a&&a.addEventListener("click",f=>{f.stopPropagation(),nn(1)});const c=document.getElementById("archive-overlay");c&&c.addEventListener("click",f=>{!f.target.closest(".archive-header")&&!f.target.closest(".archive-nav-wrap")&&!f.target.closest(".nav-btn")&&ke()}),bt=!0,ns()};async function vl(){bt||await gl()}function Gt(){bt&&(bt=!1,Bt&&(cancelAnimationFrame(Bt),Bt=null),window.removeEventListener("pointermove",Zi),window.removeEventListener("pointerup",Ji),window.removeEventListener("keydown",es),window.removeEventListener("resize",ts),B&&(B.dispose(),B.domElement?.parentNode&&B.domElement.parentNode.removeChild(B.domElement)),k?.material&&k.material.dispose(),k?.geometry&&k.geometry.dispose(),he=null,B=null,Jt=null,en=null,k=null,V=-1,nt={value:0},ue={x:0,y:0},ge={x:0,y:0},Et={value:1},_e=0,un={value:0})}function Ur(i,e){if(e===hs)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),i;if(e===Sn||e===Qr){let t=i.getIndex();if(t===null){const o=[],l=i.getAttribute("position");if(l!==void 0){for(let a=0;a<l.count;a++)o.push(a);i.setIndex(o),t=i.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),i}const n=t.count-2,r=[];if(e===Sn)for(let o=1;o<=n;o++)r.push(t.getX(0)),r.push(t.getX(o)),r.push(t.getX(o+1));else for(let o=0;o<n;o++)o%2===0?(r.push(t.getX(o)),r.push(t.getX(o+1)),r.push(t.getX(o+2))):(r.push(t.getX(o+2)),r.push(t.getX(o+1)),r.push(t.getX(o)));r.length/3!==n&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=i.clone();return s.setIndex(r),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),i}class yl extends ds{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new bl(t)}),this.register(function(t){return new El(t)}),this.register(function(t){return new Ol(t)}),this.register(function(t){return new Nl(t)}),this.register(function(t){return new Dl(t)}),this.register(function(t){return new Al(t)}),this.register(function(t){return new Rl(t)}),this.register(function(t){return new Ml(t)}),this.register(function(t){return new Ll(t)}),this.register(function(t){return new Sl(t)}),this.register(function(t){return new Pl(t)}),this.register(function(t){return new _l(t)}),this.register(function(t){return new Il(t)}),this.register(function(t){return new Cl(t)}),this.register(function(t){return new xl(t)}),this.register(function(t){return new Fl(t)}),this.register(function(t){return new kl(t)})}load(e,t,n,r){const s=this;let o;if(this.resourcePath!=="")o=this.resourcePath;else if(this.path!==""){const c=dt.extractUrlBase(e);o=dt.resolveURL(c,this.path)}else o=dt.extractUrlBase(e);this.manager.itemStart(e);const l=function(c){r?r(c):console.error(c),s.manager.itemError(e),s.manager.itemEnd(e)},a=new Zr(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(c){try{s.parse(c,o,function(f){t(f),s.manager.itemEnd(e)},l)}catch(f){l(f)}},n,l)}setDRACOLoader(e){return this.dracoLoader=e,this}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,r){let s;const o={},l={},a=new TextDecoder;if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(a.decode(new Uint8Array(e,0,4))===rs){try{o[I.KHR_BINARY_GLTF]=new Ul(e)}catch(u){r&&r(u);return}s=JSON.parse(o[I.KHR_BINARY_GLTF].content)}else s=JSON.parse(a.decode(e));else s=e;if(s.asset===void 0||s.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const c=new Ql(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let f=0;f<this.pluginCallbacks.length;f++){const u=this.pluginCallbacks[f](c);u.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),l[u.name]=u,o[u.name]=!0}if(s.extensionsUsed)for(let f=0;f<s.extensionsUsed.length;++f){const u=s.extensionsUsed[f],h=s.extensionsRequired||[];switch(u){case I.KHR_MATERIALS_UNLIT:o[u]=new Tl;break;case I.KHR_DRACO_MESH_COMPRESSION:o[u]=new Hl(s,this.dracoLoader);break;case I.KHR_TEXTURE_TRANSFORM:o[u]=new jl;break;case I.KHR_MESH_QUANTIZATION:o[u]=new Bl;break;default:h.indexOf(u)>=0&&l[u]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+u+'".')}}c.setExtensions(o),c.setPlugins(l),c.parse(n,r)}parseAsync(e,t){const n=this;return new Promise(function(r,s){n.parse(e,t,r,s)})}}function wl(){let i={};return{get:function(e){return i[e]},add:function(e,t){i[e]=t},remove:function(e){delete i[e]},removeAll:function(){i={}}}}const I={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class xl{constructor(e){this.parser=e,this.name=I.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,r=t.length;n<r;n++){const s=t[n];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let r=t.cache.get(n);if(r)return r;const s=t.json,a=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let c;const f=new pe(16777215);a.color!==void 0&&f.setRGB(a.color[0],a.color[1],a.color[2],me);const u=a.range!==void 0?a.range:0;switch(a.type){case"directional":c=new Jr(f),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new ms(f),c.distance=u;break;case"spot":c=new ps(f),c.distance=u,a.spot=a.spot||{},a.spot.innerConeAngle=a.spot.innerConeAngle!==void 0?a.spot.innerConeAngle:0,a.spot.outerConeAngle=a.spot.outerConeAngle!==void 0?a.spot.outerConeAngle:Math.PI/4,c.angle=a.spot.outerConeAngle,c.penumbra=1-a.spot.innerConeAngle/a.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+a.type)}return c.position.set(0,0,0),ee(c,a),a.intensity!==void 0&&(c.intensity=a.intensity),c.name=t.createUniqueName(a.name||"light_"+e),r=Promise.resolve(c),t.cache.add(n,r),r}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,n=this.parser,s=n.json.nodes[e],l=(s.extensions&&s.extensions[this.name]||{}).light;return l===void 0?null:this._loadLight(l).then(function(a){return n._getNodeRef(t.cache,l,a)})}}class Tl{constructor(){this.name=I.KHR_MATERIALS_UNLIT}getMaterialType(){return at}extendParams(e,t,n){const r=[];e.color=new pe(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],me),e.opacity=o[3]}s.baseColorTexture!==void 0&&r.push(n.assignTexture(e,"map",s.baseColorTexture,et))}return Promise.all(r)}}class Sl{constructor(e){this.parser=e,this.name=I.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class bl{constructor(e){this.parser=e,this.name=I.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:oe}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(n.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(n.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(n.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const l=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new de(l,l)}return Promise.all(s)}}class El{constructor(e){this.parser=e,this.name=I.KHR_MATERIALS_DISPERSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:oe}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.dispersion=s.dispersion!==void 0?s.dispersion:0,Promise.resolve()}}class _l{constructor(e){this.parser=e,this.name=I.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:oe}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(n.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(n.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class Al{constructor(e){this.parser=e,this.name=I.KHR_MATERIALS_SHEEN}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:oe}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new pe(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=r.extensions[this.name];if(o.sheenColorFactor!==void 0){const l=o.sheenColorFactor;t.sheenColor.setRGB(l[0],l[1],l[2],me)}return o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(n.assignTexture(t,"sheenColorMap",o.sheenColorTexture,et)),o.sheenRoughnessTexture!==void 0&&s.push(n.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class Rl{constructor(e){this.parser=e,this.name=I.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:oe}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(n.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class Ml{constructor(e){this.parser=e,this.name=I.KHR_MATERIALS_VOLUME}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:oe}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(n.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const l=o.attenuationColor||[1,1,1];return t.attenuationColor=new pe().setRGB(l[0],l[1],l[2],me),Promise.all(s)}}class Ll{constructor(e){this.parser=e,this.name=I.KHR_MATERIALS_IOR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:oe}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class Pl{constructor(e){this.parser=e,this.name=I.KHR_MATERIALS_SPECULAR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:oe}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(n.assignTexture(t,"specularIntensityMap",o.specularTexture));const l=o.specularColorFactor||[1,1,1];return t.specularColor=new pe().setRGB(l[0],l[1],l[2],me),o.specularColorTexture!==void 0&&s.push(n.assignTexture(t,"specularColorMap",o.specularColorTexture,et)),Promise.all(s)}}class Cl{constructor(e){this.parser=e,this.name=I.EXT_MATERIALS_BUMP}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:oe}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return t.bumpScale=o.bumpFactor!==void 0?o.bumpFactor:1,o.bumpTexture!==void 0&&s.push(n.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(s)}}class Il{constructor(e){this.parser=e,this.name=I.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:oe}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.anisotropyStrength!==void 0&&(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&s.push(n.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}}class Ol{constructor(e){this.parser=e,this.name=I.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,r=n.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class Nl{constructor(e){this.parser=e,this.name=I.EXT_TEXTURE_WEBP}loadTexture(e){const t=this.name,n=this.parser,r=n.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],l=r.images[o.source];let a=n.textureLoader;if(l.uri){const c=n.options.manager.getHandler(l.uri);c!==null&&(a=c)}return n.loadTextureImage(e,o.source,a)}}class Dl{constructor(e){this.parser=e,this.name=I.EXT_TEXTURE_AVIF}loadTexture(e){const t=this.name,n=this.parser,r=n.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],l=r.images[o.source];let a=n.textureLoader;if(l.uri){const c=n.options.manager.getHandler(l.uri);c!==null&&(a=c)}return n.loadTextureImage(e,o.source,a)}}class Fl{constructor(e){this.name=I.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const r=n.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(l){const a=r.byteOffset||0,c=r.byteLength||0,f=r.count,u=r.byteStride,h=new Uint8Array(l,a,c);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(f,u,h,r.mode,r.filter).then(function(d){return d.buffer}):o.ready.then(function(){const d=new ArrayBuffer(f*u);return o.decodeGltfBuffer(new Uint8Array(d),f,u,h,r.mode,r.filter),d})})}else return null}}class kl{constructor(e){this.name=I.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,n=t.nodes[e];if(!n.extensions||!n.extensions[this.name]||n.mesh===void 0)return null;const r=t.meshes[n.mesh];for(const c of r.primitives)if(c.mode!==q.TRIANGLES&&c.mode!==q.TRIANGLE_STRIP&&c.mode!==q.TRIANGLE_FAN&&c.mode!==void 0)return null;const o=n.extensions[this.name].attributes,l=[],a={};for(const c in o)l.push(this.parser.getDependency("accessor",o[c]).then(f=>(a[c]=f,a[c])));return l.length<1?null:(l.push(this.parser.createNodeMesh(e)),Promise.all(l).then(c=>{const f=c.pop(),u=f.isGroup?f.children:[f],h=c[0].count,d=[];for(const p of u){const m=new Xt,v=new Ve,y=new ei,x=new Ve(1,1,1),T=new gs(p.geometry,p.material,h);for(let w=0;w<h;w++)a.TRANSLATION&&v.fromBufferAttribute(a.TRANSLATION,w),a.ROTATION&&y.fromBufferAttribute(a.ROTATION,w),a.SCALE&&x.fromBufferAttribute(a.SCALE,w),T.setMatrixAt(w,m.compose(v,y,x));for(const w in a)if(w==="_COLOR_0"){const b=a[w];T.instanceColor=new vs(b.array,b.itemSize,b.normalized)}else w!=="TRANSLATION"&&w!=="ROTATION"&&w!=="SCALE"&&p.geometry.setAttribute(w,a[w]);ti.prototype.copy.call(T,p),this.parser.assignFinalMaterial(T),d.push(T)}return f.isGroup?(f.clear(),f.add(...d),f):d[0]}))}}const rs="glTF",ot=12,Hr={JSON:1313821514,BIN:5130562};class Ul{constructor(e){this.name=I.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,ot),n=new TextDecoder;if(this.header={magic:n.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==rs)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-ot,s=new DataView(e,ot);let o=0;for(;o<r;){const l=s.getUint32(o,!0);o+=4;const a=s.getUint32(o,!0);if(o+=4,a===Hr.JSON){const c=new Uint8Array(e,ot+o,l);this.content=n.decode(c)}else if(a===Hr.BIN){const c=ot+o;this.body=e.slice(c,c+l)}o+=l}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Hl{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=I.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,l={},a={},c={};for(const f in o){const u=zn[f]||f.toLowerCase();l[u]=o[f]}for(const f in e.attributes){const u=zn[f]||f.toLowerCase();if(o[f]!==void 0){const h=n.accessors[e.attributes[f]],d=Je[h.componentType];c[u]=d.name,a[u]=h.normalized===!0}}return t.getDependency("bufferView",s).then(function(f){return new Promise(function(u,h){r.decodeDracoFile(f,function(d){for(const p in d.attributes){const m=d.attributes[p],v=a[p];v!==void 0&&(m.normalized=v)}u(d)},l,c,me,h)})})}}class jl{constructor(){this.name=I.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class Bl{constructor(){this.name=I.KHR_MESH_QUANTIZATION}}class is extends js{constructor(e,t,n,r){super(e,t,n,r)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let o=0;o!==r;o++)t[o]=n[s+o];return t}interpolate_(e,t,n,r){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,a=l*2,c=l*3,f=r-t,u=(n-t)/f,h=u*u,d=h*u,p=e*c,m=p-c,v=-2*d+3*h,y=d-h,x=1-v,T=y-h+u;for(let w=0;w!==l;w++){const b=o[m+w+l],S=o[m+w+a]*f,_=o[p+w+l],R=o[p+w]*f;s[w]=x*b+T*S+v*_+y*R}return s}}const Gl=new ei;class zl extends is{interpolate_(e,t,n,r){const s=super.interpolate_(e,t,n,r);return Gl.fromArray(s).normalize().toArray(s),s}}const q={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},Je={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},jr={9728:ri,9729:Ue,9984:Ss,9985:Ts,9986:xs,9987:ni},Br={33071:wt,33648:bs,10497:bn},vn={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},zn={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},ye={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Vl={CUBICSPLINE:void 0,LINEAR:oi,STEP:ks},yn={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function Wl(i){return i.DefaultMaterial===void 0&&(i.DefaultMaterial=new ii({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Hs})),i.DefaultMaterial}function Re(i,e,t){for(const n in t.extensions)i[n]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[n]=t.extensions[n])}function ee(i,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(i.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function Xl(i,e,t){let n=!1,r=!1,s=!1;for(let c=0,f=e.length;c<f;c++){const u=e[c];if(u.POSITION!==void 0&&(n=!0),u.NORMAL!==void 0&&(r=!0),u.COLOR_0!==void 0&&(s=!0),n&&r&&s)break}if(!n&&!r&&!s)return Promise.resolve(i);const o=[],l=[],a=[];for(let c=0,f=e.length;c<f;c++){const u=e[c];if(n){const h=u.POSITION!==void 0?t.getDependency("accessor",u.POSITION):i.attributes.position;o.push(h)}if(r){const h=u.NORMAL!==void 0?t.getDependency("accessor",u.NORMAL):i.attributes.normal;l.push(h)}if(s){const h=u.COLOR_0!==void 0?t.getDependency("accessor",u.COLOR_0):i.attributes.color;a.push(h)}}return Promise.all([Promise.all(o),Promise.all(l),Promise.all(a)]).then(function(c){const f=c[0],u=c[1],h=c[2];return n&&(i.morphAttributes.position=f),r&&(i.morphAttributes.normal=u),s&&(i.morphAttributes.color=h),i.morphTargetsRelative=!0,i})}function ql(i,e){if(i.updateMorphTargets(),e.weights!==void 0)for(let t=0,n=e.weights.length;t<n;t++)i.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(i.morphTargetInfluences.length===t.length){i.morphTargetDictionary={};for(let n=0,r=t.length;n<r;n++)i.morphTargetDictionary[t[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Kl(i){let e;const t=i.extensions&&i.extensions[I.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+wn(t.attributes):e=i.indices+":"+wn(i.attributes)+":"+i.mode,i.targets!==void 0)for(let n=0,r=i.targets.length;n<r;n++)e+=":"+wn(i.targets[n]);return e}function wn(i){let e="";const t=Object.keys(i).sort();for(let n=0,r=t.length;n<r;n++)e+=t[n]+":"+i[t[n]]+";";return e}function Vn(i){switch(i){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function Yl(i){return i.search(/\.jpe?g($|\?)/i)>0||i.search(/^data\:image\/jpeg/)===0?"image/jpeg":i.search(/\.webp($|\?)/i)>0||i.search(/^data\:image\/webp/)===0?"image/webp":i.search(/\.ktx2($|\?)/i)>0||i.search(/^data\:image\/ktx2/)===0?"image/ktx2":"image/png"}const $l=new Xt;class Ql{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new wl,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,r=-1,s=!1,o=-1;if(typeof navigator<"u"){const l=navigator.userAgent;n=/^((?!chrome|android).)*safari/i.test(l)===!0;const a=l.match(/Version\/(\d+)/);r=n&&a?parseInt(a[1],10):-1,s=l.indexOf("Firefox")>-1,o=s?l.match(/Firefox\/([0-9]+)\./)[1]:-1}typeof createImageBitmap>"u"||n&&r<17||s&&o<98?this.textureLoader=new Kn(this.options.manager):this.textureLoader=new ys(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Zr(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,r=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(o){const l={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:n,userData:{}};return Re(s,l,r),ee(l,r),Promise.all(n._invokeAll(function(a){return a.afterRoot&&a.afterRoot(l)})).then(function(){for(const a of l.scenes)a.updateMatrixWorld();e(l)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let r=0,s=t.length;r<s;r++){const o=t[r].joints;for(let l=0,a=o.length;l<a;l++)e[o[l]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const o=e[r];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(n[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const r=n.clone(),s=(o,l)=>{const a=this.associations.get(o);a!=null&&this.associations.set(l,a);for(const[c,f]of o.children.entries())s(f,l.children[c])};return s(n,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const r=e(t[n]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let r=0;r<t.length;r++){const s=e(t[r]);s&&n.push(s)}return n}getDependency(e,t){const n=e+":"+t;let r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e);break}this.cache.add(n,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(r.map(function(s,o){return n.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[I.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,o){n.load(dt.resolveURL(t.uri,r.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(n){const r=t.byteLength||0,s=t.byteOffset||0;return n.slice(s,s+r)})}loadAccessor(e){const t=this,n=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){const o=vn[r.type],l=Je[r.componentType],a=r.normalized===!0,c=new l(r.count*o);return Promise.resolve(new fn(c,o,a))}const s=[];return r.bufferView!==void 0?s.push(this.getDependency("bufferView",r.bufferView)):s.push(null),r.sparse!==void 0&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(o){const l=o[0],a=vn[r.type],c=Je[r.componentType],f=c.BYTES_PER_ELEMENT,u=f*a,h=r.byteOffset||0,d=r.bufferView!==void 0?n.bufferViews[r.bufferView].byteStride:void 0,p=r.normalized===!0;let m,v;if(d&&d!==u){const y=Math.floor(h/d),x="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+y+":"+r.count;let T=t.cache.get(x);T||(m=new c(l,y*d,r.count*d/f),T=new ws(m,d/f),t.cache.add(x,T)),v=new Us(T,a,h%d/f,p)}else l===null?m=new c(r.count*a):m=new c(l,h,r.count*a),v=new fn(m,a,p);if(r.sparse!==void 0){const y=vn.SCALAR,x=Je[r.sparse.indices.componentType],T=r.sparse.indices.byteOffset||0,w=r.sparse.values.byteOffset||0,b=new x(o[1],T,r.sparse.count*y),S=new c(o[2],w,r.sparse.count*a);l!==null&&(v=new fn(v.array.slice(),v.itemSize,v.normalized)),v.normalized=!1;for(let _=0,R=b.length;_<R;_++){const A=b[_];if(v.setX(A,S[_*a]),a>=2&&v.setY(A,S[_*a+1]),a>=3&&v.setZ(A,S[_*a+2]),a>=4&&v.setW(A,S[_*a+3]),a>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}v.normalized=p}return v})}loadTexture(e){const t=this.json,n=this.options,s=t.textures[e].source,o=t.images[s];let l=this.textureLoader;if(o.uri){const a=n.manager.getHandler(o.uri);a!==null&&(l=a)}return this.loadTextureImage(e,s,l)}loadTextureImage(e,t,n){const r=this,s=this.json,o=s.textures[e],l=s.images[t],a=(l.uri||l.bufferView)+":"+o.sampler;if(this.textureCache[a])return this.textureCache[a];const c=this.loadImageSource(t,n).then(function(f){f.flipY=!1,f.name=o.name||l.name||"",f.name===""&&typeof l.uri=="string"&&l.uri.startsWith("data:image/")===!1&&(f.name=l.uri);const h=(s.samplers||{})[o.sampler]||{};return f.magFilter=jr[h.magFilter]||Ue,f.minFilter=jr[h.minFilter]||ni,f.wrapS=Br[h.wrapS]||bn,f.wrapT=Br[h.wrapT]||bn,f.generateMipmaps=!f.isCompressedTexture&&f.minFilter!==ri&&f.minFilter!==Ue,r.associations.set(f,{textures:e}),f}).catch(function(){return null});return this.textureCache[a]=c,c}loadImageSource(e,t){const n=this,r=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(u=>u.clone());const o=r.images[e],l=self.URL||self.webkitURL;let a=o.uri||"",c=!1;if(o.bufferView!==void 0)a=n.getDependency("bufferView",o.bufferView).then(function(u){c=!0;const h=new Blob([u],{type:o.mimeType});return a=l.createObjectURL(h),a});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const f=Promise.resolve(a).then(function(u){return new Promise(function(h,d){let p=h;t.isImageBitmapLoader===!0&&(p=function(m){const v=new ar(m);v.needsUpdate=!0,h(v)}),t.load(dt.resolveURL(u,s.path),p,void 0,d)})}).then(function(u){return c===!0&&l.revokeObjectURL(a),ee(u,o),u.userData.mimeType=o.mimeType||Yl(o.uri),u}).catch(function(u){throw console.error("THREE.GLTFLoader: Couldn't load texture",a),u});return this.sourceCache[e]=f,f}assignTexture(e,t,n,r){const s=this;return this.getDependency("texture",n.index).then(function(o){if(!o)return null;if(n.texCoord!==void 0&&n.texCoord>0&&(o=o.clone(),o.channel=n.texCoord),s.extensions[I.KHR_TEXTURE_TRANSFORM]){const l=n.extensions!==void 0?n.extensions[I.KHR_TEXTURE_TRANSFORM]:void 0;if(l){const a=s.associations.get(o);o=s.extensions[I.KHR_TEXTURE_TRANSFORM].extendTexture(o,l),s.associations.set(o,a)}}return r!==void 0&&(o.colorSpace=r),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const r=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const l="PointsMaterial:"+n.uuid;let a=this.cache.get(l);a||(a=new Es,hn.prototype.copy.call(a,n),a.color.copy(n.color),a.map=n.map,a.sizeAttenuation=!1,this.cache.add(l,a)),n=a}else if(e.isLine){const l="LineBasicMaterial:"+n.uuid;let a=this.cache.get(l);a||(a=new _s,hn.prototype.copy.call(a,n),a.color.copy(n.color),a.map=n.map,this.cache.add(l,a)),n=a}if(r||s||o){let l="ClonedMaterial:"+n.uuid+":";r&&(l+="derivative-tangents:"),s&&(l+="vertex-colors:"),o&&(l+="flat-shading:");let a=this.cache.get(l);a||(a=n.clone(),s&&(a.vertexColors=!0),o&&(a.flatShading=!0),r&&(a.normalScale&&(a.normalScale.y*=-1),a.clearcoatNormalScale&&(a.clearcoatNormalScale.y*=-1)),this.cache.add(l,a),this.associations.set(a,this.associations.get(n))),n=a}e.material=n}getMaterialType(){return ii}loadMaterial(e){const t=this,n=this.json,r=this.extensions,s=n.materials[e];let o;const l={},a=s.extensions||{},c=[];if(a[I.KHR_MATERIALS_UNLIT]){const u=r[I.KHR_MATERIALS_UNLIT];o=u.getMaterialType(),c.push(u.extendParams(l,s,t))}else{const u=s.pbrMetallicRoughness||{};if(l.color=new pe(1,1,1),l.opacity=1,Array.isArray(u.baseColorFactor)){const h=u.baseColorFactor;l.color.setRGB(h[0],h[1],h[2],me),l.opacity=h[3]}u.baseColorTexture!==void 0&&c.push(t.assignTexture(l,"map",u.baseColorTexture,et)),l.metalness=u.metallicFactor!==void 0?u.metallicFactor:1,l.roughness=u.roughnessFactor!==void 0?u.roughnessFactor:1,u.metallicRoughnessTexture!==void 0&&(c.push(t.assignTexture(l,"metalnessMap",u.metallicRoughnessTexture)),c.push(t.assignTexture(l,"roughnessMap",u.metallicRoughnessTexture))),o=this._invokeOne(function(h){return h.getMaterialType&&h.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(h){return h.extendMaterialParams&&h.extendMaterialParams(e,l)})))}s.doubleSided===!0&&(l.side=As);const f=s.alphaMode||yn.OPAQUE;if(f===yn.BLEND?(l.transparent=!0,l.depthWrite=!1):(l.transparent=!1,f===yn.MASK&&(l.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==at&&(c.push(t.assignTexture(l,"normalMap",s.normalTexture)),l.normalScale=new de(1,1),s.normalTexture.scale!==void 0)){const u=s.normalTexture.scale;l.normalScale.set(u,u)}if(s.occlusionTexture!==void 0&&o!==at&&(c.push(t.assignTexture(l,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(l.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==at){const u=s.emissiveFactor;l.emissive=new pe().setRGB(u[0],u[1],u[2],me)}return s.emissiveTexture!==void 0&&o!==at&&c.push(t.assignTexture(l,"emissiveMap",s.emissiveTexture,et)),Promise.all(c).then(function(){const u=new o(l);return s.name&&(u.name=s.name),ee(u,s),t.associations.set(u,{materials:e}),s.extensions&&Re(r,u,s),u})}createUniqueName(e){const t=Rs.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,n=this.extensions,r=this.primitiveCache;function s(l){return n[I.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(l,t).then(function(a){return Gr(a,l,t)})}const o=[];for(let l=0,a=e.length;l<a;l++){const c=e[l],f=Kl(c),u=r[f];if(u)o.push(u.promise);else{let h;c.extensions&&c.extensions[I.KHR_DRACO_MESH_COMPRESSION]?h=s(c):h=Gr(new si,c,t),r[f]={primitive:c,promise:h},o.push(h)}}return Promise.all(o)}loadMesh(e){const t=this,n=this.json,r=this.extensions,s=n.meshes[e],o=s.primitives,l=[];for(let a=0,c=o.length;a<c;a++){const f=o[a].material===void 0?Wl(this.cache):this.getDependency("material",o[a].material);l.push(f)}return l.push(t.loadGeometries(o)),Promise.all(l).then(function(a){const c=a.slice(0,a.length-1),f=a[a.length-1],u=[];for(let d=0,p=f.length;d<p;d++){const m=f[d],v=o[d];let y;const x=c[d];if(v.mode===q.TRIANGLES||v.mode===q.TRIANGLE_STRIP||v.mode===q.TRIANGLE_FAN||v.mode===void 0)y=s.isSkinnedMesh===!0?new Ms(m,x):new sn(m,x),y.isSkinnedMesh===!0&&y.normalizeSkinWeights(),v.mode===q.TRIANGLE_STRIP?y.geometry=Ur(y.geometry,Qr):v.mode===q.TRIANGLE_FAN&&(y.geometry=Ur(y.geometry,Sn));else if(v.mode===q.LINES)y=new Ls(m,x);else if(v.mode===q.LINE_STRIP)y=new Ps(m,x);else if(v.mode===q.LINE_LOOP)y=new Cs(m,x);else if(v.mode===q.POINTS)y=new Is(m,x);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+v.mode);Object.keys(y.geometry.morphAttributes).length>0&&ql(y,s),y.name=t.createUniqueName(s.name||"mesh_"+e),ee(y,s),v.extensions&&Re(r,y,v),t.assignFinalMaterial(y),u.push(y)}for(let d=0,p=u.length;d<p;d++)t.associations.set(u[d],{meshes:e,primitives:d});if(u.length===1)return s.extensions&&Re(r,u[0],s),u[0];const h=new Ye;s.extensions&&Re(r,h,s),t.associations.set(h,{meshes:e});for(let d=0,p=u.length;d<p;d++)h.add(u[d]);return h})}loadCamera(e){let t;const n=this.json.cameras[e],r=n[n.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return n.type==="perspective"?t=new Xn(Os.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):n.type==="orthographic"&&(t=new Yn(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),ee(t,n),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],n=[];for(let r=0,s=t.joints.length;r<s;r++)n.push(this._loadNodeShallow(t.joints[r]));return t.inverseBindMatrices!==void 0?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then(function(r){const s=r.pop(),o=r,l=[],a=[];for(let c=0,f=o.length;c<f;c++){const u=o[c];if(u){l.push(u);const h=new Xt;s!==null&&h.fromArray(s.array,c*16),a.push(h)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[c])}return new Ns(l,a)})}loadAnimation(e){const t=this.json,n=this,r=t.animations[e],s=r.name?r.name:"animation_"+e,o=[],l=[],a=[],c=[],f=[];for(let u=0,h=r.channels.length;u<h;u++){const d=r.channels[u],p=r.samplers[d.sampler],m=d.target,v=m.node,y=r.parameters!==void 0?r.parameters[p.input]:p.input,x=r.parameters!==void 0?r.parameters[p.output]:p.output;m.node!==void 0&&(o.push(this.getDependency("node",v)),l.push(this.getDependency("accessor",y)),a.push(this.getDependency("accessor",x)),c.push(p),f.push(m))}return Promise.all([Promise.all(o),Promise.all(l),Promise.all(a),Promise.all(c),Promise.all(f)]).then(function(u){const h=u[0],d=u[1],p=u[2],m=u[3],v=u[4],y=[];for(let T=0,w=h.length;T<w;T++){const b=h[T],S=d[T],_=p[T],R=m[T],A=v[T];if(b===void 0)continue;b.updateMatrix&&b.updateMatrix();const E=n._createAnimationTracks(b,S,_,R,A);if(E)for(let P=0;P<E.length;P++)y.push(E[P])}const x=new Ds(s,void 0,y);return ee(x,r),x})}createNodeMesh(e){const t=this.json,n=this,r=t.nodes[e];return r.mesh===void 0?null:n.getDependency("mesh",r.mesh).then(function(s){const o=n._getNodeRef(n.meshCache,r.mesh,s);return r.weights!==void 0&&o.traverse(function(l){if(l.isMesh)for(let a=0,c=r.weights.length;a<c;a++)l.morphTargetInfluences[a]=r.weights[a]}),o})}loadNode(e){const t=this.json,n=this,r=t.nodes[e],s=n._loadNodeShallow(e),o=[],l=r.children||[];for(let c=0,f=l.length;c<f;c++)o.push(n.getDependency("node",l[c]));const a=r.skin===void 0?Promise.resolve(null):n.getDependency("skin",r.skin);return Promise.all([s,Promise.all(o),a]).then(function(c){const f=c[0],u=c[1],h=c[2];h!==null&&f.traverse(function(d){d.isSkinnedMesh&&d.bind(h,$l)});for(let d=0,p=u.length;d<p;d++)f.add(u[d]);return f})}_loadNodeShallow(e){const t=this.json,n=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],o=s.name?r.createUniqueName(s.name):"",l=[],a=r._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return a&&l.push(a),s.camera!==void 0&&l.push(r.getDependency("camera",s.camera).then(function(c){return r._getNodeRef(r.cameraCache,s.camera,c)})),r._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){l.push(c)}),this.nodeCache[e]=Promise.all(l).then(function(c){let f;if(s.isBone===!0?f=new Fs:c.length>1?f=new Ye:c.length===1?f=c[0]:f=new ti,f!==c[0])for(let u=0,h=c.length;u<h;u++)f.add(c[u]);if(s.name&&(f.userData.name=s.name,f.name=o),ee(f,s),s.extensions&&Re(n,f,s),s.matrix!==void 0){const u=new Xt;u.fromArray(s.matrix),f.applyMatrix4(u)}else s.translation!==void 0&&f.position.fromArray(s.translation),s.rotation!==void 0&&f.quaternion.fromArray(s.rotation),s.scale!==void 0&&f.scale.fromArray(s.scale);if(!r.associations.has(f))r.associations.set(f,{});else if(s.mesh!==void 0&&r.meshCache.refs[s.mesh]>1){const u=r.associations.get(f);r.associations.set(f,{...u})}return r.associations.get(f).nodes=e,f}),this.nodeCache[e]}loadScene(e){const t=this.extensions,n=this.json.scenes[e],r=this,s=new Ye;n.name&&(s.name=r.createUniqueName(n.name)),ee(s,n),n.extensions&&Re(t,s,n);const o=n.nodes||[],l=[];for(let a=0,c=o.length;a<c;a++)l.push(r.getDependency("node",o[a]));return Promise.all(l).then(function(a){for(let f=0,u=a.length;f<u;f++)s.add(a[f]);const c=f=>{const u=new Map;for(const[h,d]of r.associations)(h instanceof hn||h instanceof ar)&&u.set(h,d);return f.traverse(h=>{const d=r.associations.get(h);d!=null&&u.set(h,d)}),u};return r.associations=c(s),s})}_createAnimationTracks(e,t,n,r,s){const o=[],l=e.name?e.name:e.uuid,a=[];ye[s.path]===ye.weights?e.traverse(function(h){h.morphTargetInfluences&&a.push(h.name?h.name:h.uuid)}):a.push(l);let c;switch(ye[s.path]){case ye.weights:c=cr;break;case ye.rotation:c=ur;break;case ye.translation:case ye.scale:c=lr;break;default:n.itemSize===1?c=cr:c=lr;break}const f=r.interpolation!==void 0?Vl[r.interpolation]:oi,u=this._getArrayFromAccessor(n);for(let h=0,d=a.length;h<d;h++){const p=new c(a[h]+"."+ye[s.path],t.array,u,f);r.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(p),o.push(p)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const n=Vn(t.constructor),r=new Float32Array(t.length);for(let s=0,o=t.length;s<o;s++)r[s]=t[s]*n;t=r}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(n){const r=this instanceof ur?zl:is;return new r(this.times,this.values,this.getValueSize()/3,n)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function Zl(i,e,t){const n=e.attributes,r=new Bs;if(n.POSITION!==void 0){const l=t.json.accessors[n.POSITION],a=l.min,c=l.max;if(a!==void 0&&c!==void 0){if(r.set(new Ve(a[0],a[1],a[2]),new Ve(c[0],c[1],c[2])),l.normalized){const f=Vn(Je[l.componentType]);r.min.multiplyScalar(f),r.max.multiplyScalar(f)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const l=new Ve,a=new Ve;for(let c=0,f=s.length;c<f;c++){const u=s[c];if(u.POSITION!==void 0){const h=t.json.accessors[u.POSITION],d=h.min,p=h.max;if(d!==void 0&&p!==void 0){if(a.setX(Math.max(Math.abs(d[0]),Math.abs(p[0]))),a.setY(Math.max(Math.abs(d[1]),Math.abs(p[1]))),a.setZ(Math.max(Math.abs(d[2]),Math.abs(p[2]))),h.normalized){const m=Vn(Je[h.componentType]);a.multiplyScalar(m)}l.max(a)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(l)}i.boundingBox=r;const o=new Gs;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,i.boundingSphere=o}function Gr(i,e,t){const n=e.attributes,r=[];function s(o,l){return t.getDependency("accessor",o).then(function(a){i.setAttribute(l,a)})}for(const o in n){const l=zn[o]||o.toLowerCase();l in i.attributes||r.push(s(n[o],l))}if(e.indices!==void 0&&!i.index){const o=t.getDependency("accessor",e.indices).then(function(l){i.setIndex(l)});r.push(o)}return En.workingColorSpace!==me&&"COLOR_0"in n&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${En.workingColorSpace}" not supported.`),ee(i,e),Zl(i,e,t),Promise.all(r).then(function(){return e.targets!==void 0?Xl(i,e.targets,t):i})}const Jl={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = opacity * texel;


		}`};class At{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const ec=new Yn(-1,1,1,-1,0,1);class tc extends si{constructor(){super(),this.setAttribute("position",new fr([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new fr([0,2,0,0,2,0],2))}}const nc=new tc;class ss{constructor(e){this._mesh=new sn(nc,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,ec)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class os extends At{constructor(e,t="tDiffuse"){super(),this.textureID=t,this.uniforms=null,this.material=null,e instanceof Wt?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=ai.clone(e.uniforms),this.material=new Wt({name:e.name!==void 0?e.name:"unspecified",defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this._fsQuad=new ss(this.material)}render(e,t,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this._fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this._fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this._fsQuad.render(e))}dispose(){this.material.dispose(),this._fsQuad.dispose()}}class zr extends At{constructor(e,t){super(),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,t,n){const r=e.getContext(),s=e.state;s.buffers.color.setMask(!1),s.buffers.depth.setMask(!1),s.buffers.color.setLocked(!0),s.buffers.depth.setLocked(!0);let o,l;this.inverse?(o=0,l=1):(o=1,l=0),s.buffers.stencil.setTest(!0),s.buffers.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),s.buffers.stencil.setFunc(r.ALWAYS,o,4294967295),s.buffers.stencil.setClear(l),s.buffers.stencil.setLocked(!0),e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),s.buffers.color.setLocked(!1),s.buffers.depth.setLocked(!1),s.buffers.color.setMask(!0),s.buffers.depth.setMask(!0),s.buffers.stencil.setLocked(!1),s.buffers.stencil.setFunc(r.EQUAL,1,4294967295),s.buffers.stencil.setOp(r.KEEP,r.KEEP,r.KEEP),s.buffers.stencil.setLocked(!0)}}class rc extends At{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class ic{constructor(e,t){if(this.renderer=e,this._pixelRatio=e.getPixelRatio(),t===void 0){const n=e.getSize(new de);this._width=n.width,this._height=n.height,t=new zs(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:Vs}),t.texture.name="EffectComposer.rt1"}else this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new os(Jl),this.copyPass.material.blending=Ws,this.clock=new Xs}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const t=this.passes.indexOf(e);t!==-1&&this.passes.splice(t,1)}isLastEnabledPass(e){for(let t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());const t=this.renderer.getRenderTarget();let n=!1;for(let r=0,s=this.passes.length;r<s;r++){const o=this.passes[r];if(o.enabled!==!1){if(o.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(r),o.render(this.renderer,this.writeBuffer,this.readBuffer,e,n),o.needsSwap){if(n){const l=this.renderer.getContext(),a=this.renderer.state.buffers.stencil;a.setFunc(l.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),a.setFunc(l.EQUAL,1,4294967295)}this.swapBuffers()}zr!==void 0&&(o instanceof zr?n=!0:o instanceof rc&&(n=!1))}}this.renderer.setRenderTarget(t)}reset(e){if(e===void 0){const t=this.renderer.getSize(new de);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,t){this._width=e,this._height=t;const n=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(n,r),this.renderTarget2.setSize(n,r);for(let s=0;s<this.passes.length;s++)this.passes[s].setSize(n,r)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class sc extends At{constructor(e,t,n=null,r=null,s=null){super(),this.scene=e,this.camera=t,this.overrideMaterial=n,this.clearColor=r,this.clearAlpha=s,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new pe}render(e,t,n){const r=e.autoClear;e.autoClear=!1;let s,o;this.overrideMaterial!==null&&(o=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor!==null&&(e.getClearColor(this._oldClearColor),e.setClearColor(this.clearColor,e.getClearAlpha())),this.clearAlpha!==null&&(s=e.getClearAlpha(),e.setClearAlpha(this.clearAlpha)),this.clearDepth==!0&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:n),this.clear===!0&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor!==null&&e.setClearColor(this._oldClearColor),this.clearAlpha!==null&&e.setClearAlpha(s),this.overrideMaterial!==null&&(this.scene.overrideMaterial=o),e.autoClear=r}}const Nt={name:"OutputShader",uniforms:{tDiffuse:{value:null},toneMappingExposure:{value:1}},vertexShader:`
		precision highp float;

		uniform mat4 modelViewMatrix;
		uniform mat4 projectionMatrix;

		attribute vec3 position;
		attribute vec2 uv;

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		precision highp float;

		uniform sampler2D tDiffuse;

		#include <tonemapping_pars_fragment>
		#include <colorspace_pars_fragment>

		varying vec2 vUv;

		void main() {

			gl_FragColor = texture2D( tDiffuse, vUv );

			// tone mapping

			#ifdef LINEAR_TONE_MAPPING

				gl_FragColor.rgb = LinearToneMapping( gl_FragColor.rgb );

			#elif defined( REINHARD_TONE_MAPPING )

				gl_FragColor.rgb = ReinhardToneMapping( gl_FragColor.rgb );

			#elif defined( CINEON_TONE_MAPPING )

				gl_FragColor.rgb = CineonToneMapping( gl_FragColor.rgb );

			#elif defined( ACES_FILMIC_TONE_MAPPING )

				gl_FragColor.rgb = ACESFilmicToneMapping( gl_FragColor.rgb );

			#elif defined( AGX_TONE_MAPPING )

				gl_FragColor.rgb = AgXToneMapping( gl_FragColor.rgb );

			#elif defined( NEUTRAL_TONE_MAPPING )

				gl_FragColor.rgb = NeutralToneMapping( gl_FragColor.rgb );

			#elif defined( CUSTOM_TONE_MAPPING )

				gl_FragColor.rgb = CustomToneMapping( gl_FragColor.rgb );

			#endif

			// color space

			#ifdef SRGB_TRANSFER

				gl_FragColor = sRGBTransferOETF( gl_FragColor );

			#endif

		}`};class oc extends At{constructor(){super(),this.uniforms=ai.clone(Nt.uniforms),this.material=new qs({name:Nt.name,uniforms:this.uniforms,vertexShader:Nt.vertexShader,fragmentShader:Nt.fragmentShader}),this._fsQuad=new ss(this.material),this._outputColorSpace=null,this._toneMapping=null}render(e,t,n){this.uniforms.tDiffuse.value=n.texture,this.uniforms.toneMappingExposure.value=e.toneMappingExposure,(this._outputColorSpace!==e.outputColorSpace||this._toneMapping!==e.toneMapping)&&(this._outputColorSpace=e.outputColorSpace,this._toneMapping=e.toneMapping,this.material.defines={},En.getTransfer(this._outputColorSpace)===Ks&&(this.material.defines.SRGB_TRANSFER=""),this._toneMapping===Ys?this.material.defines.LINEAR_TONE_MAPPING="":this._toneMapping===$s?this.material.defines.REINHARD_TONE_MAPPING="":this._toneMapping===Qs?this.material.defines.CINEON_TONE_MAPPING="":this._toneMapping===li?this.material.defines.ACES_FILMIC_TONE_MAPPING="":this._toneMapping===Zs?this.material.defines.AGX_TONE_MAPPING="":this._toneMapping===Js?this.material.defines.NEUTRAL_TONE_MAPPING="":this._toneMapping===eo&&(this.material.defines.CUSTOM_TONE_MAPPING=""),this.material.needsUpdate=!0),this.renderToScreen===!0?(e.setRenderTarget(null),this._fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this._fsQuad.render(e))}dispose(){this.material.dispose(),this._fsQuad.dispose()}}L.registerPlugin(rt);let j=null,te=null,X=null,Me=null,vt=null,yt=null,zt=null,Le=null,rn=!1,$=null,Vt=null;const ac={uniforms:{tDiffuse:{value:null},uProgress:{value:0},uColor:{value:new pe(0)},uSpread:{value:.2},uAberration:{value:1},uResolution:{value:new de}},vertexShader:`
    varying vec2 vUv;
    void main() {
      vUv = uv;
      gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
    }
  `,fragmentShader:`
    uniform sampler2D tDiffuse;
    uniform float uProgress;
    uniform vec2 uResolution;
    uniform vec3 uColor;
    uniform float uSpread;
    uniform float uAberration;
    varying vec2 vUv;
    
    // Simple noise
    float Hash(vec2 p) {
      vec3 p2 = vec3(p.xy, 1.0);
      return fract(sin(dot(p2, vec3(37.1, 61.7, 12.4))) * 3758.5453123);
    }
    
    float noise(in vec2 p) {
      vec2 i = floor(p);
      vec2 f = fract(p);
      f *= f * (3.0 - 2.0 * f);
      return mix(
        mix(Hash(i + vec2(0.0, 0.0)), Hash(i + vec2(1.0, 0.0)), f.x),
        mix(Hash(i + vec2(0.0, 1.0)), Hash(i + vec2(1.0, 1.0)), f.x),
        f.y
      );
    }
    
    float fbm(vec2 p) {
      // Simplified FBM with fewer octaves for better performance
      float v = noise(p) * 0.5 + noise(p * 2.0) * 0.25;
      return v;
    }

    void main() {
      vec2 uv = vUv;
      float aspect = uResolution.x / uResolution.y;
      vec2 centeredUv = (uv - 0.5) * vec2(aspect, 1.0);
      
      float noiseValue = fbm(centeredUv * 10.0);
      
      float dissolveBase  = (uv.y - uProgress * 1.2) + noiseValue * uSpread;
      
      float smoothFactor = 0.01;
      
      // Calculate independent dissolve states for RGB channels
      // "Glassy" look: offset dissolve timing for each channel
      float maskAb = uAberration * 0.01;
      
      float dR = dissolveBase + maskAb;
      float dG = dissolveBase;
      float dB = dissolveBase - maskAb;
      
      float aR = 1.0 - smoothstep(-smoothFactor, smoothFactor, dR);
      float aG = 1.0 - smoothstep(-smoothFactor, smoothFactor, dG);
      float aB = 1.0 - smoothstep(-smoothFactor, smoothFactor, dB);
      
      // Chromatic aberration on the TEXTURE (refraction effect)
      // Only distort near the edge
      float edgeZone = 1.0 - smoothstep(0.0, 0.2, abs(dissolveBase));
      float texAb = uAberration * 0.02 * edgeZone;
      
      vec4 texR = texture2D(tDiffuse, vUv - vec2(texAb, 0.0));
      vec4 texG = texture2D(tDiffuse, vUv);
      vec4 texB = texture2D(tDiffuse, vUv + vec2(texAb, 0.0));
      
      float r = mix(texR.r, uColor.r, aR);
      float g = mix(texG.g, uColor.g, aG);
      float b = mix(texB.b, uColor.b, aB);
      
      gl_FragColor = vec4(r, g, b, 1.0);
    }
  `};function lc(){if(rn)return;if(rn=!0,Me=new Wn,X=new Xn(100,window.innerWidth/window.innerHeight,.1,1e3),j=new qn({antialias:!1,alpha:!0,powerPreference:"high-performance"}),j.setSize(window.innerWidth,window.innerHeight),j.setPixelRatio(Math.min(window.devicePixelRatio||1,1.5)),j.toneMapping=li,j.toneMappingExposure=1,j.shadowMap.enabled=!1,Le=document.querySelector("#background"),!Le){Le=document.createElement("div"),Le.id="background";const p=document.body.firstChild;document.body.insertBefore(Le,p)}Le.appendChild(j.domElement);const i=new to(16777215,.5);Me.add(i);const e=new Jr(16777215,1);e.position.set(5,5,5),Me.add(e),new yl().load("/home/scene.glb",p=>{Me.add(p.scene)},void 0,p=>console.error("GLTF load error:",p));let r=null;vt=()=>{r&&clearTimeout(r),r=setTimeout(()=>{if(!X||!j||!te)return;const p=window.innerWidth,m=window.innerHeight;X.aspect=p/m,X.updateProjectionMatrix(),j.setSize(p,m),te.setSize(p,m),$&&$.uniforms.uResolution.value.set(p,m)},100)},window.addEventListener("resize",vt),te=new ic(j);const s=new sc(Me,X);te.addPass(s),$=new os(ac),$.uniforms.uResolution.value.set(window.innerWidth,window.innerHeight),te.addPass($);const o=new oc;te.addPass(o);const l=document.querySelector(".hero");l&&(Vt=rt.create({trigger:l,start:"top top",end:"bottom top",scrub:!0,onUpdate:p=>{$&&($.uniforms.uProgress.value=p.progress)}}));let a={x:0,y:0},c={angle:Math.PI/2,y:0},f={angle:Math.PI/2,y:0};const u=Math.sqrt(50)/2.5;let h=0;yt=p=>{const m=performance.now();m-h<33||(h=m,a.x=p.clientX/window.innerWidth*2-1,a.y=-(p.clientY/window.innerHeight)*2+1,c.angle=Math.PI/2-a.x*.1,c.y=a.y*.4)},document.addEventListener("mousemove",yt,{passive:!0});const d=()=>{f.angle+=(c.angle-f.angle)*.025,f.y+=(c.y-f.y)*.025;const p=window.scrollY,v=Math.max(.5,u-p*.001);X.position.x=Math.cos(f.angle)*v,X.position.z=Math.sin(f.angle)*v,X.position.y+=f.y+1-X.position.y,X.lookAt(0,0,0),te.render(),zt=requestAnimationFrame(d)};return d(),{scene:Me,camera:X,renderer:j}}function xn(){rn&&(rn=!1,zt&&(cancelAnimationFrame(zt),zt=null),vt&&(window.removeEventListener("resize",vt),vt=null),yt&&(document.removeEventListener("mousemove",yt),yt=null),Vt&&(Vt.kill(),Vt=null),$&&($.material&&$.material.dispose(),$=null),te&&(te.dispose(),te=null),j&&(j.dispose(),j.domElement&&j.domElement.parentNode&&j.domElement.parentNode.removeChild(j.domElement),j=null),Me=null,X=null,Le=null)}L.registerPlugin(_n);const Dt={duration:.5,ease:"power2.inOut",stagger:.02},Vr="50% 50% -10px",Wr=new WeakMap;function cc(){document.querySelectorAll(".nav-wrap a, .bottom-nav-wrap a, .btn, .btn a").forEach(e=>{if(e.id==="time"||Wr.has(e))return;const t=(e.textContent||"").trim();if(!t)return;getComputedStyle(e).display==="inline"&&(e.style.display="inline-block");const r=e.classList.contains("btn"),s=r?{display:"inline-flex",alignItems:"center",justifyContent:"center"}:{};L.set(e,{position:"relative",overflow:"hidden",perspective:800,...s});const o=t.replace(/[\s\u2800]/g,""),l=Xr(o,!1,r),a=Xr(o,!0,r);e.textContent="",e.appendChild(l),e.appendChild(a);const c=new _n(l,{type:"chars"}),f=new _n(a,{type:"chars"});r&&[c.chars,f.chars].forEach(p=>{p.forEach(m=>{(m.textContent===" "||m.textContent===""||m.textContent==="")&&L.set(m,{whiteSpace:"pre",display:"inline-block",minWidth:"0.3em"})})}),L.set(c.chars,{rotationX:0,opacity:1,transformOrigin:Vr,backfaceVisibility:"hidden"}),L.set(f.chars,{rotationX:-90,opacity:0,transformOrigin:Vr,backfaceVisibility:"hidden"});let u=null;const h=()=>{u?.kill(),u=qr(c.chars,f.chars,!0)},d=()=>{u?.kill(),u=qr(c.chars,f.chars,!1)};e.addEventListener("mouseenter",h),e.addEventListener("mouseleave",d),Wr.set(e,{originalSplit:c,italicSplit:f,handleEnter:h,handleLeave:d})})}function Xr(i,e,t){const n=document.createElement("span");return n.textContent=t?i.replace(/ /g,""):i,L.set(n,{display:t?"flex":"block",alignItems:t?"center":"initial",justifyContent:t?"center":"initial",whiteSpace:"nowrap",width:"100%",height:"100%",textAlign:"center",...e&&{position:"absolute",top:0,left:0,fontStyle:"normal",width:"100%"}}),n}function qr(i,e,t){const n=L.timeline();return t?n.to(i,{rotationX:90,opacity:0,...Dt},0).to(e,{rotationX:0,opacity:1,...Dt},0):n.to(i,{rotationX:0,opacity:1,...Dt},0).to(e,{rotationX:-90,opacity:0,...Dt},0),n}let ht=null;function Kr(){if(ht||(ht=document.getElementById("time")),ht){const i=new Date,e=String(i.getHours()).padStart(2,"0"),t=String(i.getMinutes()).padStart(2,"0"),n=String(i.getSeconds()).padStart(2,"0");ht.textContent=`${e}:${t}:${n} IST`}}function uc(){ht=null,Kr(),window.timeInterval&&clearInterval(window.timeInterval),window.timeInterval=setInterval(Kr,1e3)}function Tn(i){uc(),ro(),Ii(),ba(),cc();const e=i||document.querySelector('[data-barba="container"]')?.dataset.barbaNamespace;e==="work"?(lt(),ol(),xn(),Gt()):e==="archive"?(lt(),gt(),xn(),vl()):e==="home"||e==="contact"?(gt(),Gt(),lc(),e==="home"?mi():lt()):(lt(),gt(),Gt(),xn())}Co.init({transitions:[{name:"home-contact-reverse",from:{namespace:["home","contact"]},to:{namespace:["home","contact"]},async leave(i){hr(),Nn(),Er();const e=i?.current?.container;if(!e)return;const t=i?.current?.namespace,n=i?.next?.namespace,r=br(t,n),s=e.querySelector(".hero .hero-contain p"),o=e.querySelector(".hero .btn, .hero .btn a"),l=[s,o].filter(Boolean);l.length&&L.to(l,{opacity:0,duration:.25,ease:"power2.out"}),await xa(e,r)},enter(i){const e=i?.next?.container;if(!e)return;const t=e.querySelector(".hero .hero-contain p"),n=e.querySelector(".hero .btn, .hero .btn a"),r=[t,n].filter(Boolean);r.length&&L.set(r,{opacity:0})},async after(i){const e=i?.next?.container;if(!e)return;const t=i?.current?.namespace,n=i?.next?.namespace,r=br(t,n);Tn(n),await Ta(e,r);const s=e.querySelector(".hero .hero-contain p"),o=e.querySelector(".hero .btn, .hero .btn a"),l=[s,o].filter(Boolean);l.length&&await L.to(l,{opacity:1,duration:.35,ease:"power2.out",delay:.2})}},{name:"default",async leave(i){i?.current?.namespace==="home"&&lt(),i?.current?.namespace==="work"&&gt(),i?.current?.namespace==="archive"&&Gt(),Nn(),Er(),hr(),await no()},async enter(){await dr()},async once(i){Tn(i?.next?.namespace),await dr();const e=i?.next?.namespace;if(e==="home"||e==="contact"){const t=i?.next?.container;if(t){const n=t.querySelector(".hero .hero-contain p"),r=t.querySelector(".hero .btn, .hero .btn a"),s=[n,r].filter(Boolean);s.length&&L.set(s,{opacity:0}),await Sa(t),s.length&&await L.to(s,{opacity:1,duration:.35,ease:"power2.out",delay:.2})}}},async after(i){const e=i?.next?.namespace;e!=="home"&&e!=="contact"&&Tn(e)}}]});
