import{S as bn,P as _n,W as Rn,l as Dn,G as Be,a as vi,T as Mn,b as Ve,V as Te,c as Pt,M as zt,g as L,d as An,e as lt,f as je,D as yi,O as Ln,C as ct,L as Pe,h as gr,i as vr,j as on,k as wi,m as yr,n as it,F as Ti,o as te,p as xe,q as ce,r as wr,s as Tr,t as xi,u as Ct,v as De,I as xr,Q as Si,w as Sr,x as Ei,y as Er,B as Kt,z as br,A as bi,N as _r,E as Rr,H as Mr,J as _i,R as an,K as Ar,U as Lr,X as Yt,Y as Ir,Z as Ri,_ as Pr,$ as Qe,a0 as Cr,a1 as Mi,a2 as Nr,a3 as Or,a4 as Dr,a5 as Fr,a6 as kr,a7 as Ur,a8 as Hr,a9 as Br,aa as jr,ab as Gr,ac as Ai,ad as zr,ae as Fn,af as kn,ag as Un,ah as Hn,ai as ln,aj as Vr,ak as Xr,al as qr,am as Wr,an as Bn,ao as Li,ap as Kr,aq as Yr,ar as $r,as as Qr,at as Zr,au as Jr,av as es,aw as ts,ax as ns,ay as Ii,az as is,aA as rs,aB as ss,aC as os,aD as as,aE as jn,aF as Gn,aG as ls,aH as cs}from"./Draggable-BEuJXpet.js";function us(s,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(s,typeof(i=(function(r,o){if(typeof r!="object"||r===null)return r;var l=r[Symbol.toPrimitive];if(l!==void 0){var a=l.call(r,"string");if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)})(n.key))=="symbol"?i:String(i),n)}var i}function In(s,e,t){return e&&us(s.prototype,e),Object.defineProperty(s,"prototype",{writable:!1}),s}function Z(){return Z=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(s[n]=t[n])}return s},Z.apply(this,arguments)}function Vt(s,e){s.prototype=Object.create(e.prototype),s.prototype.constructor=s,ut(s,e)}function cn(s){return cn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},cn(s)}function ut(s,e){return ut=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},ut(s,e)}function hs(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function un(s,e,t){return un=hs()?Reflect.construct.bind():function(n,i,r){var o=[null];o.push.apply(o,i);var l=new(Function.bind.apply(n,o));return r&&ut(l,r.prototype),l},un.apply(null,arguments)}function hn(s){var e=typeof Map=="function"?new Map:void 0;return hn=function(t){if(t===null||Function.toString.call(t).indexOf("[native code]")===-1)return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return un(t,arguments,cn(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),ut(n,t)},hn(s)}function fs(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}var me,ds=function(){this.before=void 0,this.beforeLeave=void 0,this.leave=void 0,this.afterLeave=void 0,this.beforeEnter=void 0,this.enter=void 0,this.afterEnter=void 0,this.after=void 0};(function(s){s[s.off=0]="off",s[s.error=1]="error",s[s.warning=2]="warning",s[s.info=3]="info",s[s.debug=4]="debug"})(me||(me={}));var zn=me.off,Re=(function(){function s(t){this.t=void 0,this.t=t}s.getLevel=function(){return zn},s.setLevel=function(t){return zn=me[t]};var e=s.prototype;return e.error=function(){this.i(console.error,me.error,[].slice.call(arguments))},e.warn=function(){this.i(console.warn,me.warning,[].slice.call(arguments))},e.info=function(){this.i(console.info,me.info,[].slice.call(arguments))},e.debug=function(){this.i(console.log,me.debug,[].slice.call(arguments))},e.i=function(t,n,i){n<=s.getLevel()&&t.apply(console,["["+this.t+"] "].concat(i))},s})();function Ce(s){return s.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function Vn(s){return s&&s.sensitive?"":"i"}var J={container:"container",history:"history",namespace:"namespace",prefix:"data-barba",prevent:"prevent",wrapper:"wrapper"},Me=new((function(){function s(){this.o=J,this.u=void 0,this.h={after:null,before:null,parent:null}}var e=s.prototype;return e.toString=function(t){return t.outerHTML},e.toDocument=function(t){return this.u||(this.u=new DOMParser),this.u.parseFromString(t,"text/html")},e.toElement=function(t){var n=document.createElement("div");return n.innerHTML=t,n},e.getHtml=function(t){return t===void 0&&(t=document),this.toString(t.documentElement)},e.getWrapper=function(t){return t===void 0&&(t=document),t.querySelector("["+this.o.prefix+'="'+this.o.wrapper+'"]')},e.getContainer=function(t){return t===void 0&&(t=document),t.querySelector("["+this.o.prefix+'="'+this.o.container+'"]')},e.removeContainer=function(t){document.body.contains(t)&&(this.v(t),t.parentNode.removeChild(t))},e.addContainer=function(t,n){var i=this.getContainer()||this.h.before;i?this.l(t,i):this.h.after?this.h.after.parentNode.insertBefore(t,this.h.after):this.h.parent?this.h.parent.appendChild(t):n.appendChild(t)},e.getSibling=function(){return this.h},e.getNamespace=function(t){t===void 0&&(t=document);var n=t.querySelector("["+this.o.prefix+"-"+this.o.namespace+"]");return n?n.getAttribute(this.o.prefix+"-"+this.o.namespace):null},e.getHref=function(t){if(t.tagName&&t.tagName.toLowerCase()==="a"){if(typeof t.href=="string")return t.href;var n=t.getAttribute("href")||t.getAttribute("xlink:href");if(n)return this.resolveUrl(n.baseVal||n)}return null},e.resolveUrl=function(){var t=[].slice.call(arguments).length;if(t===0)throw new Error("resolveUrl requires at least one argument; got none.");var n=document.createElement("base");if(n.href=arguments[0],t===1)return n.href;var i=document.getElementsByTagName("head")[0];i.insertBefore(n,i.firstChild);for(var r,o=document.createElement("a"),l=1;l<t;l++)o.href=arguments[l],n.href=r=o.href;return i.removeChild(n),r},e.l=function(t,n){n.parentNode.insertBefore(t,n.nextSibling)},e.v=function(t){return this.h={after:t.nextElementSibling,before:t.previousElementSibling,parent:t.parentElement},this.h},s})()),ps=(function(){function s(){this.p=void 0,this.m=[],this.P=-1}var e=s.prototype;return e.init=function(t,n){this.p="barba";var i={data:{},ns:n,scroll:{x:window.scrollX,y:window.scrollY},url:t};this.P=0,this.m.push(i);var r={from:this.p,index:this.P,states:[].concat(this.m)};window.history&&window.history.replaceState(r,"",t)},e.change=function(t,n,i){if(i&&i.state){var r=i.state,o=r.index;n=this.g(this.P-o),this.replace(r.states),this.P=o}else this.add(t,n);return n},e.add=function(t,n,i,r){var o=i??this.R(n),l={data:r??{},ns:"tmp",scroll:{x:window.scrollX,y:window.scrollY},url:t};switch(o){case"push":this.P=this.size,this.m.push(l);break;case"replace":this.set(this.P,l)}var a={from:this.p,index:this.P,states:[].concat(this.m)};switch(o){case"push":window.history&&window.history.pushState(a,"",t);break;case"replace":window.history&&window.history.replaceState(a,"",t)}},e.store=function(t,n){var i=n||this.P,r=this.get(i);r.data=Z({},r.data,t),this.set(i,r);var o={from:this.p,index:this.P,states:[].concat(this.m)};window.history.replaceState(o,"")},e.update=function(t,n){var i=n||this.P,r=Z({},this.get(i),t);this.set(i,r)},e.remove=function(t){t?this.m.splice(t,1):this.m.pop(),this.P--},e.clear=function(){this.m=[],this.P=-1},e.replace=function(t){this.m=t},e.get=function(t){return this.m[t]},e.set=function(t,n){return this.m[t]=n},e.R=function(t){var n="push",i=t,r=J.prefix+"-"+J.history;return i.hasAttribute&&i.hasAttribute(r)&&(n=i.getAttribute(r)),n},e.g=function(t){return Math.abs(t)>1?t>0?"forward":"back":t===0?"popstate":t>0?"back":"forward"},In(s,[{key:"current",get:function(){return this.m[this.P]}},{key:"previous",get:function(){return this.P<1?null:this.m[this.P-1]}},{key:"size",get:function(){return this.m.length}}]),s})(),Pi=new ps,Nt=function(s,e){try{var t=(function(){if(!e.next.html)return Promise.resolve(s).then(function(n){var i=e.next;if(n){var r=Me.toElement(n.html);i.namespace=Me.getNamespace(r),i.container=Me.getContainer(r),i.url=n.url,i.html=n.html,Pi.update({ns:i.namespace});var o=Me.toDocument(n.html);document.title=o.title}})})();return Promise.resolve(t&&t.then?t.then(function(){}):void 0)}catch(n){return Promise.reject(n)}},Ci=function s(e,t,n){return e instanceof RegExp?(function(i,r){if(!r)return i;for(var o=/\((?:\?<(.*?)>)?(?!\?)/g,l=0,a=o.exec(i.source);a;)r.push({name:a[1]||l++,prefix:"",suffix:"",modifier:"",pattern:""}),a=o.exec(i.source);return i})(e,t):Array.isArray(e)?(function(i,r,o){var l=i.map(function(a){return s(a,r,o).source});return new RegExp("(?:".concat(l.join("|"),")"),Vn(o))})(e,t,n):(function(i,r,o){return(function(l,a,c){c===void 0&&(c={});for(var h=c.strict,u=h!==void 0&&h,f=c.start,d=f===void 0||f,m=c.end,g=m===void 0||m,v=c.encode,y=v===void 0?function(G){return G}:v,w=c.delimiter,T=w===void 0?"/#?":w,x=c.endsWith,b="[".concat(Ce(x===void 0?"":x),"]|$"),E="[".concat(Ce(T),"]"),_=d?"^":"",M=0,R=l;M<R.length;M++){var S=R[M];if(typeof S=="string")_+=Ce(y(S));else{var C=Ce(y(S.prefix)),A=Ce(y(S.suffix));if(S.pattern)if(a&&a.push(S),C||A)if(S.modifier==="+"||S.modifier==="*"){var O=S.modifier==="*"?"?":"";_+="(?:".concat(C,"((?:").concat(S.pattern,")(?:").concat(A).concat(C,"(?:").concat(S.pattern,"))*)").concat(A,")").concat(O)}else _+="(?:".concat(C,"(").concat(S.pattern,")").concat(A,")").concat(S.modifier);else _+=S.modifier==="+"||S.modifier==="*"?"((?:".concat(S.pattern,")").concat(S.modifier,")"):"(".concat(S.pattern,")").concat(S.modifier);else _+="(?:".concat(C).concat(A,")").concat(S.modifier)}}if(g)u||(_+="".concat(E,"?")),_+=c.endsWith?"(?=".concat(b,")"):"$";else{var P=l[l.length-1],F=typeof P=="string"?E.indexOf(P[P.length-1])>-1:P===void 0;u||(_+="(?:".concat(E,"(?=").concat(b,"))?")),F||(_+="(?=".concat(E,"|").concat(b,")"))}return new RegExp(_,Vn(c))})((function(l,a){a===void 0&&(a={});for(var c=(function(A){for(var O=[],P=0;P<A.length;){var F=A[P];if(F!=="*"&&F!=="+"&&F!=="?")if(F!=="\\")if(F!=="{")if(F!=="}")if(F!==":")if(F!=="(")O.push({type:"CHAR",index:P,value:A[P++]});else{var G=1,ne="";if(A[H=P+1]==="?")throw new TypeError('Pattern cannot start with "?" at '.concat(H));for(;H<A.length;)if(A[H]!=="\\"){if(A[H]===")"){if(--G==0){H++;break}}else if(A[H]==="("&&(G++,A[H+1]!=="?"))throw new TypeError("Capturing groups are not allowed at ".concat(H));ne+=A[H++]}else ne+=A[H++]+A[H++];if(G)throw new TypeError("Unbalanced pattern at ".concat(P));if(!ne)throw new TypeError("Missing pattern at ".concat(P));O.push({type:"PATTERN",index:P,value:ne}),P=H}else{for(var he="",H=P+1;H<A.length;){var $=A.charCodeAt(H);if(!($>=48&&$<=57||$>=65&&$<=90||$>=97&&$<=122||$===95))break;he+=A[H++]}if(!he)throw new TypeError("Missing parameter name at ".concat(P));O.push({type:"NAME",index:P,value:he}),P=H}else O.push({type:"CLOSE",index:P,value:A[P++]});else O.push({type:"OPEN",index:P,value:A[P++]});else O.push({type:"ESCAPED_CHAR",index:P++,value:A[P++]});else O.push({type:"MODIFIER",index:P,value:A[P++]})}return O.push({type:"END",index:P,value:""}),O})(l),h=a.prefixes,u=h===void 0?"./":h,f="[^".concat(Ce(a.delimiter||"/#?"),"]+?"),d=[],m=0,g=0,v="",y=function(A){if(g<c.length&&c[g].type===A)return c[g++].value},w=function(A){var O=y(A);if(O!==void 0)return O;var P=c[g],F=P.index;throw new TypeError("Unexpected ".concat(P.type," at ").concat(F,", expected ").concat(A))},T=function(){for(var A,O="";A=y("CHAR")||y("ESCAPED_CHAR");)O+=A;return O};g<c.length;){var x=y("CHAR"),b=y("NAME"),E=y("PATTERN");if(b||E)u.indexOf(M=x||"")===-1&&(v+=M,M=""),v&&(d.push(v),v=""),d.push({name:b||m++,prefix:M,suffix:"",pattern:E||f,modifier:y("MODIFIER")||""});else{var _=x||y("ESCAPED_CHAR");if(_)v+=_;else if(v&&(d.push(v),v=""),y("OPEN")){var M=T(),R=y("NAME")||"",S=y("PATTERN")||"",C=T();w("CLOSE"),d.push({name:R||(S?m++:""),pattern:R&&!S?f:S,prefix:M,suffix:C,modifier:y("MODIFIER")||""})}else w("END")}}return d})(i,o),r,o)})(e,t,n)},ms={__proto__:null,update:Nt,nextTick:function(){return new Promise(function(s){window.requestAnimationFrame(s)})},pathToRegexp:Ci},Ni=function(){return window.location.origin},ht=function(s){return s===void 0&&(s=window.location.href),ge(s).port},ge=function(s){var e,t=s.match(/:\d+/);if(t===null)/^http/.test(s)&&(e=80),/^https/.test(s)&&(e=443);else{var n=t[0].substring(1);e=parseInt(n,10)}var i,r=s.replace(Ni(),""),o={},l=r.indexOf("#");l>=0&&(i=r.slice(l+1),r=r.slice(0,l));var a=r.indexOf("?");return a>=0&&(o=Oi(r.slice(a+1)),r=r.slice(0,a)),{hash:i,path:r,port:e,query:o}},Oi=function(s){return s.split("&").reduce(function(e,t){var n=t.split("=");return e[n[0]]=n[1],e},{})},fn=function(s){return s===void 0&&(s=window.location.href),s.replace(/(\/#.*|\/|#.*)$/,"")},gs={__proto__:null,getHref:function(){return window.location.href},getAbsoluteHref:function(s,e){return e===void 0&&(e=document.baseURI),new URL(s,e).href},getOrigin:Ni,getPort:ht,getPath:function(s){return s===void 0&&(s=window.location.href),ge(s).path},getQuery:function(s,e){return e===void 0&&(e=!1),e?JSON.stringify(ge(s).query):ge(s).query},getHash:function(s){return ge(s).hash},parse:ge,parseQuery:Oi,clean:fn};function vs(s,e,t,n,i){return e===void 0&&(e=2e3),new Promise(function(r,o){var l=new XMLHttpRequest;l.onreadystatechange=function(){if(l.readyState===XMLHttpRequest.DONE){if(l.status===200){var a=l.responseURL!==""&&l.responseURL!==s?l.responseURL:s;r({html:l.responseText,url:Z({href:a},ge(a))}),n.update(s,{status:"fulfilled",target:a})}else if(l.status){var c={status:l.status,statusText:l.statusText};t(s,c),o(c),n.update(s,{status:"rejected"})}}},l.ontimeout=function(){var a=new Error("Timeout error ["+e+"]");t(s,a),o(a),n.update(s,{status:"rejected"})},l.onerror=function(){var a=new Error("Fetch error");t(s,a),o(a),n.update(s,{status:"rejected"})},l.open("GET",s),l.timeout=e,l.setRequestHeader("Accept","text/html,application/xhtml+xml,application/xml"),l.setRequestHeader("x-barba","yes"),i.all().forEach(function(a,c){l.setRequestHeader(c,a)}),l.send()})}function ys(s){return!!s&&(typeof s=="object"||typeof s=="function")&&typeof s.then=="function"}function Fe(s,e){return e===void 0&&(e={}),function(){var t=arguments,n=!1,i=new Promise(function(r,o){e.async=function(){return n=!0,function(a,c){a?o(a):r(c)}};var l=s.apply(e,[].slice.call(t));n||(ys(l)?l.then(r,o):r(l))});return i}}var pe=new((function(s){function e(){var n;return(n=s.call(this)||this).logger=new Re("@barba/core"),n.all=["ready","page","reset","currentAdded","currentRemoved","nextAdded","nextRemoved","beforeOnce","once","afterOnce","before","beforeLeave","leave","afterLeave","beforeEnter","enter","afterEnter","after"],n.registered=new Map,n.init(),n}Vt(e,s);var t=e.prototype;return t.init=function(){var n=this;this.registered.clear(),this.all.forEach(function(i){n[i]||(n[i]=function(r,o){n.registered.has(i)||n.registered.set(i,new Set),n.registered.get(i).add({ctx:o||{},fn:r})})})},t.do=function(n){var i=arguments,r=this;if(this.registered.has(n)){var o=Promise.resolve();return this.registered.get(n).forEach(function(l){o=o.then(function(){return Fe(l.fn,l.ctx).apply(void 0,[].slice.call(i,1))})}),o.catch(function(l){r.logger.debug("Hook error ["+n+"]"),r.logger.error(l)})}return Promise.resolve()},t.clear=function(){var n=this;this.all.forEach(function(i){delete n[i]}),this.init()},t.help=function(){this.logger.info("Available hooks: "+this.all.join(","));var n=[];this.registered.forEach(function(i,r){return n.push(r)}),this.logger.info("Registered hooks: "+n.join(","))},e})(ds)),Di=(function(){function s(e){if(this.k=void 0,this.O=[],typeof e=="boolean")this.k=e;else{var t=Array.isArray(e)?e:[e];this.O=t.map(function(n){return Ci(n)})}}return s.prototype.checkHref=function(e){if(typeof this.k=="boolean")return this.k;var t=ge(e).path;return this.O.some(function(n){return n.exec(t)!==null})},s})(),ws=(function(s){function e(n){var i;return(i=s.call(this,n)||this).T=new Map,i}Vt(e,s);var t=e.prototype;return t.set=function(n,i,r,o,l){return this.T.set(n,{action:r,request:i,status:o,target:l??n}),{action:r,request:i,status:o,target:l}},t.get=function(n){return this.T.get(n)},t.getRequest=function(n){return this.T.get(n).request},t.getAction=function(n){return this.T.get(n).action},t.getStatus=function(n){return this.T.get(n).status},t.getTarget=function(n){return this.T.get(n).target},t.has=function(n){return!this.checkHref(n)&&this.T.has(n)},t.delete=function(n){return this.T.delete(n)},t.update=function(n,i){var r=Z({},this.T.get(n),i);return this.T.set(n,r),r},e})(Di),Ts=(function(){function s(){this.A=new Map}var e=s.prototype;return e.set=function(t,n){return this.A.set(t,n),{name:n}},e.get=function(t){return this.A.get(t)},e.all=function(){return this.A},e.has=function(t){return this.A.has(t)},e.delete=function(t){return this.A.delete(t)},e.clear=function(){return this.A.clear()},s})(),xs=function(){return!window.history.pushState},Ss=function(s){return!s.el||!s.href},Es=function(s){var e=s.event;return e.which>1||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey},bs=function(s){var e=s.el;return e.hasAttribute("target")&&e.target==="_blank"},_s=function(s){var e=s.el;return e.protocol!==void 0&&window.location.protocol!==e.protocol||e.hostname!==void 0&&window.location.hostname!==e.hostname},Rs=function(s){var e=s.el;return e.port!==void 0&&ht()!==ht(e.href)},Ms=function(s){var e=s.el;return e.getAttribute&&typeof e.getAttribute("download")=="string"},As=function(s){return s.el.hasAttribute(J.prefix+"-"+J.prevent)},Ls=function(s){return!!s.el.closest("["+J.prefix+"-"+J.prevent+'="all"]')},Is=function(s){var e=s.href;return fn(e)===fn()&&ht(e)===ht()},Ps=(function(s){function e(n){var i;return(i=s.call(this,n)||this).suite=[],i.tests=new Map,i.init(),i}Vt(e,s);var t=e.prototype;return t.init=function(){this.add("pushState",xs),this.add("exists",Ss),this.add("newTab",Es),this.add("blank",bs),this.add("corsDomain",_s),this.add("corsPort",Rs),this.add("download",Ms),this.add("preventSelf",As),this.add("preventAll",Ls),this.add("sameUrl",Is,!1)},t.add=function(n,i,r){r===void 0&&(r=!0),this.tests.set(n,i),r&&this.suite.push(n)},t.run=function(n,i,r,o){return this.tests.get(n)({el:i,event:r,href:o})},t.checkLink=function(n,i,r){var o=this;return this.suite.some(function(l){return o.run(l,n,i,r)})},e})(Di),$t=(function(s){function e(t,n){var i;return n===void 0&&(n="Barba error"),(i=s.call.apply(s,[this].concat([].slice.call(arguments,2)))||this).error=void 0,i.label=void 0,i.error=t,i.label=n,Error.captureStackTrace&&Error.captureStackTrace(fs(i),e),i.name="BarbaError",i}return Vt(e,s),e})(hn(Error)),Cs=(function(){function s(t){t===void 0&&(t=[]),this.logger=new Re("@barba/core"),this.all=[],this.page=[],this.once=[],this.j=[{name:"namespace",type:"strings"},{name:"custom",type:"function"}],t&&(this.all=this.all.concat(t)),this.update()}var e=s.prototype;return e.add=function(t,n){t==="rule"?this.j.splice(n.position||0,0,n.value):this.all.push(n),this.update()},e.resolve=function(t,n){var i=this;n===void 0&&(n={});var r=n.once?this.once:this.page;r=r.filter(n.self?function(f){return f.name&&f.name==="self"}:function(f){return!f.name||f.name!=="self"});var o=new Map,l=r.find(function(f){var d=!0,m={};return n.self&&f.name==="self"?(o.set(f,m),!0):(i.j.reverse().forEach(function(g){d&&(d=i.M(f,g,t,m),f.from&&f.to&&(d=i.M(f,g,t,m,"from")&&i.M(f,g,t,m,"to")),f.from&&!f.to&&(d=i.M(f,g,t,m,"from")),!f.from&&f.to&&(d=i.M(f,g,t,m,"to")))}),o.set(f,m),d)}),a=o.get(l),c=[];if(c.push(n.once?"once":"page"),n.self&&c.push("self"),a){var h,u=[l];Object.keys(a).length>0&&u.push(a),(h=this.logger).info.apply(h,["Transition found ["+c.join(",")+"]"].concat(u))}else this.logger.info("No transition found ["+c.join(",")+"]");return l},e.update=function(){var t=this;this.all=this.all.map(function(n){return t.N(n)}).sort(function(n,i){return n.priority-i.priority}).reverse().map(function(n){return delete n.priority,n}),this.page=this.all.filter(function(n){return n.leave!==void 0||n.enter!==void 0}),this.once=this.all.filter(function(n){return n.once!==void 0})},e.M=function(t,n,i,r,o){var l=!0,a=!1,c=t,h=n.name,u=h,f=h,d=h,m=o?c[o]:c,g=o==="to"?i.next:i.current;if(o?m&&m[h]:m[h]){switch(n.type){case"strings":default:var v=Array.isArray(m[u])?m[u]:[m[u]];g[u]&&v.indexOf(g[u])!==-1&&(a=!0),v.indexOf(g[u])===-1&&(l=!1);break;case"object":var y=Array.isArray(m[f])?m[f]:[m[f]];g[f]?(g[f].name&&y.indexOf(g[f].name)!==-1&&(a=!0),y.indexOf(g[f].name)===-1&&(l=!1)):l=!1;break;case"function":m[d](i)?a=!0:l=!1}a&&(o?(r[o]=r[o]||{},r[o][h]=c[o][h]):r[h]=c[h])}return l},e.S=function(t,n,i){var r=0;return(t[n]||t.from&&t.from[n]||t.to&&t.to[n])&&(r+=Math.pow(10,i),t.from&&t.from[n]&&(r+=1),t.to&&t.to[n]&&(r+=2)),r},e.N=function(t){var n=this;t.priority=0;var i=0;return this.j.forEach(function(r,o){i+=n.S(t,r.name,o+1)}),t.priority=i,t},s})();function Ke(s,e){try{var t=s()}catch(n){return e(n)}return t&&t.then?t.then(void 0,e):t}var Ns=(function(){function s(t){t===void 0&&(t=[]),this.logger=new Re("@barba/core"),this.store=void 0,this.C=!1,this.store=new Cs(t)}var e=s.prototype;return e.get=function(t,n){return this.store.resolve(t,n)},e.doOnce=function(t){var n=t.data,i=t.transition;try{var r=function(){o.C=!1},o=this,l=i||{};o.C=!0;var a=Ke(function(){return Promise.resolve(o.L("beforeOnce",n,l)).then(function(){return Promise.resolve(o.once(n,l)).then(function(){return Promise.resolve(o.L("afterOnce",n,l)).then(function(){})})})},function(c){o.C=!1,o.logger.debug("Transition error [before/after/once]"),o.logger.error(c)});return Promise.resolve(a&&a.then?a.then(r):r())}catch(c){return Promise.reject(c)}},e.doPage=function(t){var n=t.data,i=t.transition,r=t.page,o=t.wrapper;try{var l=function(f){a.C=!1},a=this,c=i||{},h=c.sync===!0||!1;a.C=!0;var u=Ke(function(){function f(){return Promise.resolve(a.L("before",n,c)).then(function(){function m(v){return Promise.resolve(a.remove(n)).then(function(){return Promise.resolve(a.L("after",n,c)).then(function(){})})}var g=(function(){if(h)return Ke(function(){return Promise.resolve(a.add(n,o)).then(function(){return Promise.resolve(a.L("beforeLeave",n,c)).then(function(){return Promise.resolve(a.L("beforeEnter",n,c)).then(function(){return Promise.resolve(Promise.all([a.leave(n,c),a.enter(n,c)])).then(function(){return Promise.resolve(a.L("afterLeave",n,c)).then(function(){return Promise.resolve(a.L("afterEnter",n,c)).then(function(){})})})})})})},function(T){if(a.H(T))throw new $t(T,"Transition error [sync]")});var v=function(T){return Ke(function(){var x=(function(){if(y!==!1)return Promise.resolve(a.add(n,o)).then(function(){return Promise.resolve(a.L("beforeEnter",n,c)).then(function(){return Promise.resolve(a.enter(n,c,y)).then(function(){return Promise.resolve(a.L("afterEnter",n,c)).then(function(){})})})})})();if(x&&x.then)return x.then(function(){})},function(x){if(a.H(x))throw new $t(x,"Transition error [before/after/enter]")})},y=!1,w=Ke(function(){return Promise.resolve(a.L("beforeLeave",n,c)).then(function(){return Promise.resolve(Promise.all([a.leave(n,c),Nt(r,n)]).then(function(T){return T[0]})).then(function(T){return y=T,Promise.resolve(a.L("afterLeave",n,c)).then(function(){})})})},function(T){if(a.H(T))throw new $t(T,"Transition error [before/after/leave]")});return w&&w.then?w.then(v):v()})();return g&&g.then?g.then(m):m()})}var d=(function(){if(h)return Promise.resolve(Nt(r,n)).then(function(){})})();return d&&d.then?d.then(f):f()},function(f){throw a.C=!1,f.name&&f.name==="BarbaError"?(a.logger.debug(f.label),a.logger.error(f.error),f):(a.logger.debug("Transition error [page]"),a.logger.error(f),f)});return Promise.resolve(u&&u.then?u.then(l):l())}catch(f){return Promise.reject(f)}},e.once=function(t,n){try{return Promise.resolve(pe.do("once",t,n)).then(function(){return n.once?Fe(n.once,n)(t):Promise.resolve()})}catch(i){return Promise.reject(i)}},e.leave=function(t,n){try{return Promise.resolve(pe.do("leave",t,n)).then(function(){return n.leave?Fe(n.leave,n)(t):Promise.resolve()})}catch(i){return Promise.reject(i)}},e.enter=function(t,n,i){try{return Promise.resolve(pe.do("enter",t,n)).then(function(){return n.enter?Fe(n.enter,n)(t,i):Promise.resolve()})}catch(r){return Promise.reject(r)}},e.add=function(t,n){try{return Me.addContainer(t.next.container,n),pe.do("nextAdded",t),Promise.resolve()}catch(i){return Promise.reject(i)}},e.remove=function(t){try{return Me.removeContainer(t.current.container),pe.do("currentRemoved",t),Promise.resolve()}catch(n){return Promise.reject(n)}},e.H=function(t){return t.message?!/Timeout error|Fetch error/.test(t.message):!t.status},e.L=function(t,n,i){try{return Promise.resolve(pe.do(t,n,i)).then(function(){return i[t]?Fe(i[t],i)(n):Promise.resolve()})}catch(r){return Promise.reject(r)}},In(s,[{key:"isRunning",get:function(){return this.C},set:function(t){this.C=t}},{key:"hasOnce",get:function(){return this.store.once.length>0}},{key:"hasSelf",get:function(){return this.store.all.some(function(t){return t.name==="self"})}},{key:"shouldWait",get:function(){return this.store.all.some(function(t){return t.to&&!t.to.route||t.sync})}}]),s})(),Os=(function(){function s(e){var t=this;this.names=["beforeLeave","afterLeave","beforeEnter","afterEnter"],this.byNamespace=new Map,e.length!==0&&(e.forEach(function(n){t.byNamespace.set(n.namespace,n)}),this.names.forEach(function(n){pe[n](t._(n))}))}return s.prototype._=function(e){var t=this;return function(n){var i=e.match(/enter/i)?n.next:n.current,r=t.byNamespace.get(i.namespace);return r&&r[e]?Fe(r[e],r)(n):Promise.resolve()}},s})();Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(s){var e=this;do{if(e.matches(s))return e;e=e.parentElement||e.parentNode}while(e!==null&&e.nodeType===1);return null});var Ds={container:null,html:"",namespace:"",url:{hash:"",href:"",path:"",port:null,query:{}}},Fs=new((function(){function s(){this.version="2.10.3",this.schemaPage=Ds,this.Logger=Re,this.logger=new Re("@barba/core"),this.plugins=[],this.timeout=void 0,this.cacheIgnore=void 0,this.cacheFirstPage=void 0,this.prefetchIgnore=void 0,this.preventRunning=void 0,this.hooks=pe,this.cache=void 0,this.headers=void 0,this.prevent=void 0,this.transitions=void 0,this.views=void 0,this.dom=Me,this.helpers=ms,this.history=Pi,this.request=vs,this.url=gs,this.D=void 0,this.B=void 0,this.q=void 0,this.F=void 0}var e=s.prototype;return e.use=function(t,n){var i=this.plugins;i.indexOf(t)>-1?this.logger.warn("Plugin ["+t.name+"] already installed."):typeof t.install=="function"?(t.install(this,n),i.push(t)):this.logger.warn("Plugin ["+t.name+'] has no "install" method.')},e.init=function(t){var n=t===void 0?{}:t,i=n.transitions,r=i===void 0?[]:i,o=n.views,l=o===void 0?[]:o,a=n.schema,c=a===void 0?J:a,h=n.requestError,u=n.timeout,f=u===void 0?2e3:u,d=n.cacheIgnore,m=d!==void 0&&d,g=n.cacheFirstPage,v=g!==void 0&&g,y=n.prefetchIgnore,w=y!==void 0&&y,T=n.preventRunning,x=T!==void 0&&T,b=n.prevent,E=b===void 0?null:b,_=n.debug,M=n.logLevel;if(Re.setLevel((_!==void 0&&_)===!0?"debug":M===void 0?"off":M),this.logger.info(this.version),Object.keys(c).forEach(function(C){J[C]&&(J[C]=c[C])}),this.B=h,this.timeout=f,this.cacheIgnore=m,this.cacheFirstPage=v,this.prefetchIgnore=w,this.preventRunning=x,this.q=this.dom.getWrapper(),!this.q)throw new Error("[@barba/core] No Barba wrapper found");this.I();var R=this.data.current;if(!R.container)throw new Error("[@barba/core] No Barba container found");if(this.cache=new ws(m),this.headers=new Ts,this.prevent=new Ps(w),this.transitions=new Ns(r),this.views=new Os(l),E!==null){if(typeof E!="function")throw new Error("[@barba/core] Prevent should be a function");this.prevent.add("preventCustom",E)}this.history.init(R.url.href,R.namespace),v&&this.cache.set(R.url.href,Promise.resolve({html:R.html,url:R.url}),"init","fulfilled"),this.U=this.U.bind(this),this.$=this.$.bind(this),this.X=this.X.bind(this),this.G(),this.plugins.forEach(function(C){return C.init()});var S=this.data;S.trigger="barba",S.next=S.current,S.current=Z({},this.schemaPage),this.hooks.do("ready",S),this.once(S),this.I()},e.destroy=function(){this.I(),this.J(),this.history.clear(),this.hooks.clear(),this.plugins=[]},e.force=function(t){window.location.assign(t)},e.go=function(t,n,i){var r;if(n===void 0&&(n="barba"),this.F=null,this.transitions.isRunning)this.force(t);else if(!(r=n==="popstate"?this.history.current&&this.url.getPath(this.history.current.url)===this.url.getPath(t)&&this.url.getQuery(this.history.current.url,!0)===this.url.getQuery(t,!0):this.prevent.run("sameUrl",null,null,t))||this.transitions.hasSelf)return n=this.history.change(this.cache.has(t)?this.cache.get(t).target:t,n,i),i&&(i.stopPropagation(),i.preventDefault()),this.page(t,n,i??void 0,r)},e.once=function(t){try{var n=this;return Promise.resolve(n.hooks.do("beforeEnter",t)).then(function(){function i(){return Promise.resolve(n.hooks.do("afterEnter",t)).then(function(){})}var r=(function(){if(n.transitions.hasOnce){var o=n.transitions.get(t,{once:!0});return Promise.resolve(n.transitions.doOnce({transition:o,data:t})).then(function(){})}})();return r&&r.then?r.then(i):i()})}catch(i){return Promise.reject(i)}},e.page=function(t,n,i,r){try{var o,l=function(){var u=a.data;return Promise.resolve(a.hooks.do("page",u)).then(function(){var f=(function(d,m){try{var g=(v=a.transitions.get(u,{once:!1,self:r}),Promise.resolve(a.transitions.doPage({data:u,page:o,transition:v,wrapper:a.q})).then(function(){a.I()}))}catch{return m()}var v;return g&&g.then?g.then(void 0,m):g})(0,function(){Re.getLevel()===0&&a.force(u.next.url.href)});if(f&&f.then)return f.then(function(){})})},a=this;if(a.data.next.url=Z({href:t},a.url.parse(t)),a.data.trigger=n,a.data.event=i,a.cache.has(t))o=a.cache.update(t,{action:"click"}).request;else{var c=a.request(t,a.timeout,a.onRequestError.bind(a,n),a.cache,a.headers);c.then(function(u){u.url.href!==t&&a.history.add(u.url.href,n,"replace")}),o=a.cache.set(t,c,"click","pending").request}var h=(function(){if(a.transitions.shouldWait)return Promise.resolve(Nt(o,a.data)).then(function(){})})();return Promise.resolve(h&&h.then?h.then(l):l())}catch(u){return Promise.reject(u)}},e.onRequestError=function(t){this.transitions.isRunning=!1;var n=[].slice.call(arguments,1),i=n[0],r=n[1],o=this.cache.getAction(i);return this.cache.delete(i),this.B&&this.B(t,o,i,r)===!1||o==="click"&&this.force(i),!1},e.prefetch=function(t){var n=this;t=this.url.getAbsoluteHref(t),this.cache.has(t)||this.cache.set(t,this.request(t,this.timeout,this.onRequestError.bind(this,"barba"),this.cache,this.headers).catch(function(i){n.logger.error(i)}),"prefetch","pending")},e.G=function(){this.prefetchIgnore!==!0&&(document.addEventListener("mouseover",this.U),document.addEventListener("touchstart",this.U)),document.addEventListener("click",this.$),window.addEventListener("popstate",this.X)},e.J=function(){this.prefetchIgnore!==!0&&(document.removeEventListener("mouseover",this.U),document.removeEventListener("touchstart",this.U)),document.removeEventListener("click",this.$),window.removeEventListener("popstate",this.X)},e.U=function(t){var n=this,i=this.W(t);if(i){var r=this.url.getAbsoluteHref(this.dom.getHref(i));this.prevent.checkHref(r)||this.cache.has(r)||this.cache.set(r,this.request(r,this.timeout,this.onRequestError.bind(this,i),this.cache,this.headers).catch(function(o){n.logger.error(o)}),"enter","pending")}},e.$=function(t){var n=this.W(t);if(n){if(this.transitions.isRunning&&this.preventRunning)return t.preventDefault(),void t.stopPropagation();this.F=t,this.go(this.dom.getHref(n),n,t)}},e.X=function(t){this.go(this.url.getHref(),"popstate",t)},e.W=function(t){for(var n=t.target;n&&!this.dom.getHref(n);)n=n.parentNode;if(n&&!this.prevent.checkLink(n,t,this.dom.getHref(n)))return n},e.I=function(){var t=this.url.getHref(),n={container:this.dom.getContainer(),html:this.dom.getHtml(),namespace:this.dom.getNamespace(),url:Z({href:t},this.url.parse(t))};this.D={current:n,event:void 0,next:Z({},this.schemaPage),trigger:void 0},this.hooks.do("reset",this.data)},In(s,[{key:"data",get:function(){return this.D}},{key:"wrapper",get:function(){return this.q}}]),s})());const ks=`
uniform float uScrollSpeed;
uniform float uCurveStrength;
uniform float uCurveFrequency;

varying vec2 vUv;

#define PI 3.141592653

void main() {
  vec3 pos = position;
  vec3 worldPosition = (modelMatrix * vec4(position, 1.0)).xyz;

  // X Displacement depending on the world position Y
  float xDisplacement = uCurveStrength * cos(worldPosition.y * uCurveFrequency);
  pos.x += xDisplacement;
  pos.x -= uCurveStrength;

  // Y Displacement according to the scroll speed
  float yDisplacement = -sin(uv.x * PI) * uScrollSpeed;
  pos.y += yDisplacement;

  gl_Position = projectionMatrix * modelViewMatrix * vec4( pos, 1.0 );

  vUv = uv;
}
`,Us=`
precision highp float;

uniform sampler2D uTexture;
uniform vec2 uPlaneSizes;
uniform vec2 uImageSizes;

varying vec2 vUv;

void main() {
  vec2 ratio = vec2(
    min((uPlaneSizes.x / uPlaneSizes.y) / (uImageSizes.x / uImageSizes.y), 1.0),
    min((uPlaneSizes.y / uPlaneSizes.x) / (uImageSizes.y / uImageSizes.x), 1.0)
  );

  vec2 uv = vec2(
    vUv.x * ratio.x + (1.0 - ratio.x) * 0.5,
    vUv.y * ratio.y + (1.0 - ratio.y) * 0.5
  );

  vec4 finalColor = texture2D(uTexture, uv);
  
  gl_FragColor = finalColor;
}
`,Qt=Array.from({length:20},(s,e)=>`/middle-carousel/spotlight-${e+1}.jpg`);let U=null,Xe=null,ve=null,de=null,bt=null,ft=!1,rt=null,qe=[],_t=null;function Hs(s,e){return(s%e+e)%e}class Ne{constructor({position:e,rotation:t,imageSize:n,gap:i,wheelFactor:r,wheelDirection:o,curveStrength:l,curveFrequency:a}){this.group=new Be,this.meshes=[],this.imageSize=n,this.gap=i,this.wheelFactor=r||1,this.wheelDirection=o||1,this.curveStrength=l||0,this.curveFrequency=a||0,this.group.position.set(...e||[0,0,0]),this.group.rotation.set(...t||[0,0,0]),this.totalHeight=Qt.length*i+Qt.length*n[1],this.createImages()}createImages(){const e=new vi(1,1,16,16),t=new Mn;Qt.forEach((n,i)=>{const r=t.load(n);r.colorSpace=Ve;const o={uTexture:{value:r},uScrollSpeed:{value:0},uPlaneSizes:{value:new Te(this.imageSize[0],this.imageSize[1])},uImageSizes:{value:new Te(1,1)},uCurveStrength:{value:this.curveStrength},uCurveFrequency:{value:this.curveFrequency}},l=new Pt({uniforms:o,vertexShader:ks,fragmentShader:Us}),a=new zt(e,l);a.scale.set(this.imageSize[0],this.imageSize[1],1),a.position.set(0,i*(this.imageSize[1]+this.gap),0),r.onload=()=>{o.uImageSizes.value.set(r.image.width,r.image.height)},this.group.add(a),this.meshes.push(a)})}update(){this.meshes.forEach(e=>{e.position.y=Hs(e.position.y+this.totalHeight/2,this.totalHeight)-this.totalHeight/2})}onScroll(e){this.meshes.forEach(t=>{t.position.y-=e*.005*this.wheelFactor*this.wheelDirection,t.material.uniforms.uScrollSpeed.value=e*.005*this.wheelFactor*this.wheelDirection})}addToScene(e){e.add(this.group)}dispose(){this.meshes.forEach(e=>{e.geometry.dispose(),e.material.uniforms.uTexture.value?.dispose(),e.material.dispose()}),this.meshes=[]}}function Bs(){const s=new Be;s.rotation.z=Math.PI/4,[new Ne({position:[-1.3,0,0],imageSize:[2,1.1],gap:.05,curveFrequency:.4,curveStrength:1.2,wheelFactor:.1,wheelDirection:1}),new Ne({position:[-2.3,0,0],imageSize:[.3,.4],gap:0,wheelFactor:.2,curveFrequency:.4,curveStrength:7.5,wheelDirection:-1}),new Ne({position:[-.4,0,0],imageSize:[.3,.4],gap:0,wheelFactor:.2,curveFrequency:.4,curveStrength:7.5,wheelDirection:-1})].forEach(i=>{s.add(i.group),qe.push(i)}),Xe.add(s);const t=new Be;t.rotation.z=Math.PI/4,[new Ne({position:[1.3,0,0],imageSize:[2,1.1],gap:.05,curveFrequency:.4,curveStrength:-1.2,wheelFactor:.1,wheelDirection:-1}),new Ne({position:[2.3,0,0],imageSize:[.3,.4],gap:0,wheelFactor:.2,curveFrequency:.4,curveStrength:-7.5,wheelDirection:1}),new Ne({position:[.4,0,0],imageSize:[.3,.4],gap:0,wheelFactor:.2,curveFrequency:.4,curveStrength:-7.5,wheelDirection:1})].forEach(i=>{t.add(i.group),qe.push(i)}),Xe.add(t)}function Fi(){ft&&(qe.forEach(s=>s.update()),U&&Xe&&ve&&U.render(Xe,ve),bt=requestAnimationFrame(Fi))}function js(){if(ft||(de=document.querySelector(".middle-img"),!de))return;const s=de.getBoundingClientRect(),e=s.width,t=s.height;ft=!0,Xe=new bn,ve=new _n(75,e/t,.1,1e3),ve.position.set(0,0,3),U=new Rn({antialias:!0,alpha:!0}),U.setSize(e,t),U.setPixelRatio(Math.min(window.devicePixelRatio||1,2)),U.setClearColor(0,0),U.domElement.style.position="absolute",U.domElement.style.top="0",U.domElement.style.left="0",U.domElement.style.width="100%",U.domElement.style.height="100%",de.innerHTML="",de.appendChild(U.domElement),Bs(),rt=()=>{if(!de||!U||!ve)return;const n=de.getBoundingClientRect();ve.aspect=n.width/n.height,ve.updateProjectionMatrix(),U.setSize(n.width,n.height)},window.addEventListener("resize",rt),Dn&&(_t=Dn.on("scroll",({velocity:n})=>{qe.forEach(i=>i.onScroll(n))})),Fi()}function Gs(){ft&&(ft=!1,bt&&(cancelAnimationFrame(bt),bt=null),rt&&(window.removeEventListener("resize",rt),rt=null),_t&&(_t(),_t=null),qe.forEach(s=>s.dispose()),qe=[],U&&(U.dispose(),U.domElement&&U.domElement.parentNode&&U.domElement.parentNode.removeChild(U.domElement),U=null),Xe=null,ve=null,de=null)}L.registerPlugin(An);function ki(){js()}function Ze(){Gs()}document.addEventListener("DOMContentLoaded",()=>{ki()});const Zt=new WeakMap,Rt=[],ke=[];L.registerPlugin(lt,An);function zs(s){return s?new Promise(e=>s.eventCallback("onComplete",e)):Promise.resolve()}function ye(s,e={type:"lines, words, chars"}){if(!s)return null;if(Zt.has(s))return Zt.get(s);const t=new lt(s,e);if(t.lines?.length){const i=window.getComputedStyle(s).textIndent;i&&i!=="0px"&&t.lines.length>0&&(t.lines[0].style.paddingLeft=i,s.style.textIndent="0"),t.lines.forEach(r=>{const o=document.createElement("div");o.className="u-overflow-hidden",o.style.display="block",o.style.width="100%",r.parentNode.insertBefore(o,r),o.appendChild(r),r.style.display="block",r.style.width="100%",r.style.overflow="visible"})}return Zt.set(s,t),Rt.push(t),t}function Vs(s,{direction:e="up",duration:t=.8,stagger:n=.03,ease:i="power2.out"}={}){const r=ye(s);if(!r)return null;const o=e==="down"?100:-100;return L.fromTo(r.words,{y:o,filter:"blur(0px)",opacity:0},{y:0,filter:"blur(0px)",opacity:1,duration:t,stagger:n,ease:i})}async function Xn(s){if(!s)return;const e=s.querySelectorAll(".text-reveal-header");if(!e.length)return;const t=Array.from(e);t.length&&L.set(t,{clearProps:"all"});const n=[];for(let i=0;i<e.length;i++){const r=e[i],l=r.classList.contains("text-reveal-reverse")?"down":"up",a=Vs(r,{direction:l,duration:.8,stagger:.04});a&&n.push(zs(a))}n.length&&await Promise.all(n)}function Xs(){dn();const s=document.querySelectorAll(".text-reveal:not(.hero .text-reveal)"),e=document.querySelectorAll(".text-reveal-reverse:not(.hero .text-reveal-reverse)"),t=document.querySelectorAll(".text-reveal-header:not(.hero .text-reveal-header)"),n=document.querySelectorAll(".body-text-reveal");for(let i=0;i<s.length;i++){const r=s[i],o=ye(r);if(!o?.words?.length)continue;const l=L.fromTo(o.words,{y:-100,filter:"blur(0px)",opacity:0},{y:0,filter:"blur(0px)",opacity:1,duration:1,stagger:.05,ease:"power2.out",scrollTrigger:{trigger:r,start:"top 80%",once:!0}});l.scrollTrigger&&ke.push(l.scrollTrigger)}for(let i=0;i<e.length;i++){const r=e[i],o=ye(r);if(!o?.words?.length)continue;const l=L.fromTo(o.words,{y:100,filter:"blur(0px)",opacity:0},{y:0,filter:"blur(0px)",opacity:1,duration:1,stagger:.05,ease:"power2.out",scrollTrigger:{trigger:r,start:"top 80%",once:!0}});l.scrollTrigger&&ke.push(l.scrollTrigger)}for(let i=0;i<t.length;i++){const r=t[i],o=ye(r);if(!o?.words?.length)continue;const a=r.classList.contains("text-reveal-reverse")?100:-100,c=L.fromTo(o.words,{y:a,filter:"blur(0px)",opacity:0},{y:0,filter:"blur(0px)",opacity:1,duration:1,stagger:.05,ease:"power2.out",scrollTrigger:{trigger:r,start:"top 80%",once:!0}});c.scrollTrigger&&ke.push(c.scrollTrigger)}for(let i=0;i<n.length;i++){const r=n[i],o=ye(r,{type:"lines",linesClass:"line++"});if(!o?.lines?.length)continue;L.set(o.lines,{y:"100%"});const l=L.to(o.lines,{y:"0%",duration:1,stagger:.1,ease:"power4.out",scrollTrigger:{trigger:r,start:"top 80%",toggleActions:"play none play none"}});l.scrollTrigger&&ke.push(l.scrollTrigger)}}function dn(){for(;ke.length;){const s=ke.pop();s&&s.kill()}}function qn(){for(let s=Rt.length-1;s>=0;s--){const e=Rt[s];e&&typeof e.revert=="function"&&e.revert()}Rt.length=0}L.registerPlugin(An);let Wn=null,yt=[],Kn=null;const wt=300,Je=800,et=500,Yn=Je-et;function Ui(){Wn=L.matchMedia(),Wn.add("(min-width: 992px)",()=>{document.querySelectorAll("[data-animate='font-weight'], [data-animate='font-weight-reverse']").forEach(t=>{const n=ye(t),i=t.getAttribute("data-animate")==="font-weight-reverse",r=i?n.chars:n.words;L.set(r,{fontWeight:i?Je:et});const o=Array.from(r).map(f=>({element:f,bounds:null,centerX:0,centerY:0})),l=()=>{o.forEach(f=>{const d=f.element.getBoundingClientRect();f.bounds=d,f.centerX=d.left+d.width/2,f.centerY=d.top+d.height/2})};l();const a={item:t,targetData:o,isReverse:i,updateBounds:l,rafId:null,mouseX:null,mouseY:null,isHovering:!1};yt.push(a);const c=()=>{if(!a.isHovering)return;const f=a.mouseX,d=a.mouseY;o.forEach(m=>{const g=Math.hypot(m.centerX-f,m.centerY-d);let v;i?v=g<wt?et+g/wt*Yn:Je:v=g<wt?Je-g/wt*Yn:et,L.to(m.element,{duration:.2,ease:"power1.out",fontWeight:v,overwrite:"auto"})}),a.rafId=requestAnimationFrame(c)},h=f=>{a.mouseX=f.clientX,a.mouseY=f.clientY,a.isHovering||(a.isHovering=!0,a.rafId=requestAnimationFrame(c))},u=()=>{a.isHovering=!1,a.rafId&&(cancelAnimationFrame(a.rafId),a.rafId=null);const f=i?Je:et;o.forEach(d=>{L.to(d.element,{duration:.5,ease:"power2.out",fontWeight:f,overwrite:"auto"})})};t.addEventListener("mousemove",h),t.addEventListener("mouseleave",u),a.onMouseMove=h,a.onMouseLeave=u});const e=()=>{clearTimeout(Kn),Kn=setTimeout(()=>{yt.forEach(t=>t.updateBounds())},150)};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e),yt.forEach(t=>{t.rafId&&cancelAnimationFrame(t.rafId),t.item.removeEventListener("mousemove",t.onMouseMove),t.item.removeEventListener("mouseleave",t.onMouseLeave)}),yt=[]}})}document.addEventListener("DOMContentLoaded",()=>{Ui()});var qs=/[achlmqstvz]|(-?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/ig,Ws=/(?:(-)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/ig,Ks=/[\+\-]?\d*\.?\d+e[\+\-]?\d+/ig,Ys=/(^[#\.][a-z]|[a-y][a-z])/i,$s=Math.PI/180,Qs=180/Math.PI,Tt=Math.sin,xt=Math.cos,K=Math.abs,ae=Math.sqrt,Zs=Math.atan2,pn=1e8,$n=function(e){return typeof e=="string"},Hi=function(e){return typeof e=="number"},Js=function(e){return typeof e>"u"},eo={},to={},Ot=1e5,Bi=function(e){return Math.round((e+pn)%1*Ot)/Ot||(e<0?0:1)},N=function(e){return Math.round(e*Ot)/Ot||0},Qn=function(e){return Math.round(e*1e10)/1e10||0},Zn=function(e){return e.closed=Math.abs(e[0]-e[e.length-2])<.001&&Math.abs(e[1]-e[e.length-1])<.001},Jn=function(e,t,n,i){var r=e[t],o=i===1?6:mn(r,n,i);if((o||!i)&&o+n+2<r.length)return e.splice(t,0,r.slice(0,n+o+2)),r.splice(0,n+o),1},ji=function(e,t,n){var i=e.length,r=~~(n*i);if(e[r]>t){for(;--r&&e[r]>t;);r<0&&(r=0)}else for(;e[++r]<t&&r<i;);return r<i?r:i-1},no=function(e,t){var n=e.length;for(e.reverse();n--;)e[n].reversed||so(e[n])},ei=function(e,t){return t.totalLength=e.totalLength,e.samples?(t.samples=e.samples.slice(0),t.lookup=e.lookup.slice(0),t.minLength=e.minLength,t.resolution=e.resolution):e.totalPoints&&(t.totalPoints=e.totalPoints),t},io=function(e,t){var n=e.length,i=e[n-1]||[],r=i.length;n&&t[0]===i[r-2]&&t[1]===i[r-1]&&(t=i.concat(t.slice(2)),n--),e[n]=t};function Mt(s){s=$n(s)&&Ys.test(s)&&document.querySelector(s)||s;var e=s.getAttribute?s:0,t;return e&&(s=s.getAttribute("d"))?(e._gsPath||(e._gsPath={}),t=e._gsPath[s],t&&!t._dirty?t:e._gsPath[s]=Dt(s)):s?$n(s)?Dt(s):Hi(s[0])?[s]:s:console.warn("Expecting a <path> element or an SVG path data string")}function ro(s){for(var e=[],t=0;t<s.length;t++)e[t]=ei(s[t],s[t].slice(0));return ei(s,e)}function so(s){var e=0,t;for(s.reverse();e<s.length;e+=2)t=s[e],s[e]=s[e+1],s[e+1]=t;s.reversed=!s.reversed}var oo=function(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg","path"),i=[].slice.call(e.attributes),r=i.length,o;for(t=","+t+",";--r>-1;)o=i[r].nodeName.toLowerCase(),t.indexOf(","+o+",")<0&&n.setAttributeNS(null,o,i[r].nodeValue);return n},ao={rect:"rx,ry,x,y,width,height",circle:"r,cx,cy",ellipse:"rx,ry,cx,cy",line:"x1,x2,y1,y2"},lo=function(e,t){for(var n=t?t.split(","):[],i={},r=n.length;--r>-1;)i[n[r]]=+e.getAttribute(n[r])||0;return i};function co(s,e){var t=s.tagName.toLowerCase(),n=.552284749831,i,r,o,l,a,c,h,u,f,d,m,g,v,y,w,T,x,b,E,_,M,R;return t==="path"||!s.getBBox?s:(c=oo(s,"x,y,width,height,cx,cy,rx,ry,r,x1,x2,y1,y2,points"),R=lo(s,ao[t]),t==="rect"?(l=R.rx,a=R.ry||l,r=R.x,o=R.y,d=R.width-l*2,m=R.height-a*2,l||a?(g=r+l*(1-n),v=r+l,y=v+d,w=y+l*n,T=y+l,x=o+a*(1-n),b=o+a,E=b+m,_=E+a*n,M=E+a,i="M"+T+","+b+" V"+E+" C"+[T,_,w,M,y,M,y-(y-v)/3,M,v+(y-v)/3,M,v,M,g,M,r,_,r,E,r,E-(E-b)/3,r,b+(E-b)/3,r,b,r,x,g,o,v,o,v+(y-v)/3,o,y-(y-v)/3,o,y,o,w,o,T,x,T,b].join(",")+"z"):i="M"+(r+d)+","+o+" v"+m+" h"+-d+" v"+-m+" h"+d+"z"):t==="circle"||t==="ellipse"?(t==="circle"?(l=a=R.r,u=l*n):(l=R.rx,a=R.ry,u=a*n),r=R.cx,o=R.cy,h=l*n,i="M"+(r+l)+","+o+" C"+[r+l,o+u,r+h,o+a,r,o+a,r-h,o+a,r-l,o+u,r-l,o,r-l,o-u,r-h,o-a,r,o-a,r+h,o-a,r+l,o-u,r+l,o].join(",")+"z"):t==="line"?i="M"+R.x1+","+R.y1+" L"+R.x2+","+R.y2:(t==="polyline"||t==="polygon")&&(f=(s.getAttribute("points")+"").match(Ws)||[],r=f.shift(),o=f.shift(),i="M"+r+","+o+" L"+f.join(","),t==="polygon"&&(i+=","+r+","+o+"z")),c.setAttribute("d",Vi(c._gsRawPath=Dt(i))),e&&s.parentNode&&(s.parentNode.insertBefore(c,s),s.parentNode.removeChild(s)),c)}function Gi(s,e,t){var n=s[e],i=s[e+2],r=s[e+4],o;return n+=(i-n)*t,i+=(r-i)*t,n+=(i-n)*t,o=i+(r+(s[e+6]-r)*t-i)*t-n,n=s[e+1],i=s[e+3],r=s[e+5],n+=(i-n)*t,i+=(r-i)*t,n+=(i-n)*t,N(Zs(i+(r+(s[e+7]-r)*t-i)*t-n,o)*Qs)}function zi(s,e,t){t=Js(t)?1:Qn(t)||0,e=Qn(e)||0;var n=Math.max(0,~~(K(t-e)-1e-8)),i=ro(s);if(e>t&&(e=1-e,t=1-t,no(i),i.totalLength=0),e<0||t<0){var r=Math.abs(~~Math.min(e,t))+1;e+=r,t+=r}i.totalLength||Ae(i);var o=t>1,l=ti(i,e,eo,!0),a=ti(i,t,to),c=a.segment,h=l.segment,u=a.segIndex,f=l.segIndex,d=a.i,m=l.i,g=f===u,v=d===m&&g,y,w,T,x,b,E,_,M;if(o||n){for(y=u<f||g&&d<m||v&&a.t<l.t,Jn(i,f,m,l.t)&&(f++,y||(u++,v?(a.t=(a.t-l.t)/(1-l.t),d=0):g&&(d-=m))),Math.abs(1-(t-e))<1e-5?u=f-1:!a.t&&u?u--:Jn(i,u,d,a.t)&&y&&f++,l.t===1&&(f=(f+1)%i.length),b=[],E=i.length,_=1+E*n,M=f,_+=(E-f+u)%E,x=0;x<_;x++)io(b,i[M++%E]);i=b}else if(T=a.t===1?6:mn(c,d,a.t),e!==t)for(w=mn(h,m,v?l.t/a.t:l.t),g&&(T+=w),c.splice(d+T+2),(w||m)&&h.splice(0,m+w),x=i.length;x--;)(x<f||x>u)&&i.splice(x,1);else c.angle=Gi(c,d+T,0),d+=T,l=c[d],a=c[d+1],c.length=c.totalLength=0,c.totalPoints=i.totalPoints=8,c.push(l,a,l,a,l,a,l,a);return i.totalLength=0,i}function uo(s,e,t){e=e||0,s.samples||(s.samples=[],s.lookup=[]);var n=~~s.resolution||12,i=1/n,r=s.length,o=s[e],l=s[e+1],a=e?e/6*n:0,c=s.samples,h=s.lookup,u=(e?s.minLength:pn)||pn,f=c[a+t*n-1],d=e?c[a-1]:0,m,g,v,y,w,T,x,b,E,_,M,R,S,C,A,O,P;for(c.length=h.length=0,g=e+2;g<r;g+=6){if(v=s[g+4]-o,y=s[g+2]-o,w=s[g]-o,b=s[g+5]-l,E=s[g+3]-l,_=s[g+1]-l,T=x=M=R=0,K(v)<.01&&K(b)<.01&&K(w)+K(_)<.01)s.length>8&&(s.splice(g,6),g-=6,r-=6);else for(m=1;m<=n;m++)C=i*m,S=1-C,T=x-(x=(C*C*v+3*S*(C*y+S*w))*C),M=R-(R=(C*C*b+3*S*(C*E+S*_))*C),O=ae(M*M+T*T),O<u&&(u=O),d+=O,c[a++]=d;o+=v,l+=b}if(f)for(f-=d;a<c.length;a++)c[a]+=f;if(c.length&&u){if(s.totalLength=P=c[c.length-1]||0,s.minLength=u,P/u<9999)for(O=A=0,m=0;m<P;m+=u)h[O++]=c[A]<m?++A:A}else s.totalLength=c[0]=0;return e?d-c[e/2-1]:d}function Ae(s,e){var t,n,i;for(i=t=n=0;i<s.length;i++)s[i].resolution=~~e||12,t+=uo(s[i]),n+=s[i].length;return s.totalPoints=n,s.totalLength=t,s}function mn(s,e,t){if(t<=0||t>=1)return 0;var n=s[e],i=s[e+1],r=s[e+2],o=s[e+3],l=s[e+4],a=s[e+5],c=s[e+6],h=s[e+7],u=n+(r-n)*t,f=r+(l-r)*t,d=i+(o-i)*t,m=o+(a-o)*t,g=u+(f-u)*t,v=d+(m-d)*t,y=l+(c-l)*t,w=a+(h-a)*t;return f+=(y-f)*t,m+=(w-m)*t,s.splice(e+2,4,N(u),N(d),N(g),N(v),N(g+(f-g)*t),N(v+(m-v)*t),N(f),N(m),N(y),N(w)),s.samples&&s.samples.splice(e/6*s.resolution|0,0,0,0,0,0,0,0),6}function ti(s,e,t,n){t=t||{},s.totalLength||Ae(s),(e<0||e>1)&&(e=Bi(e));var i=0,r=s[0],o,l,a,c,h,u,f;if(!e)f=u=i=0,r=s[0];else if(e===1)f=1,i=s.length-1,r=s[i],u=r.length-8;else{if(s.length>1){for(a=s.totalLength*e,h=u=0;(h+=s[u++].totalLength)<a;)i=u;r=s[i],c=h-r.totalLength,e=(a-c)/(h-c)||0}o=r.samples,l=r.resolution,a=r.totalLength*e,u=r.lookup.length?r.lookup[~~(a/r.minLength)]||0:ji(o,a,e),c=u?o[u-1]:0,h=o[u],h<a&&(c=h,h=o[++u]),f=1/l*((a-c)/(h-c)+u%l),u=~~(u/l)*6,n&&f===1&&(u+6<r.length?(u+=6,f=0):i+1<s.length&&(u=f=0,r=s[++i]))}return t.t=f,t.i=u,t.path=s,t.segment=r,t.segIndex=i,t}function ni(s,e,t,n){var i=s[0],r=n||{},o,l,a,c,h,u,f,d,m;if((e<0||e>1)&&(e=Bi(e)),i.lookup||Ae(s),s.length>1){for(a=s.totalLength*e,h=u=0;(h+=s[u++].totalLength)<a;)i=s[u];c=h-i.totalLength,e=(a-c)/(h-c)||0}return o=i.samples,l=i.resolution,a=i.totalLength*e,u=i.lookup.length?i.lookup[e<1?~~(a/i.minLength):i.lookup.length-1]||0:ji(o,a,e),c=u?o[u-1]:0,h=o[u],h<a&&(c=h,h=o[++u]),f=1/l*((a-c)/(h-c)+u%l)||0,m=1-f,u=~~(u/l)*6,d=i[u],r.x=N((f*f*(i[u+6]-d)+3*m*(f*(i[u+4]-d)+m*(i[u+2]-d)))*f+d),r.y=N((f*f*(i[u+7]-(d=i[u+1]))+3*m*(f*(i[u+5]-d)+m*(i[u+3]-d)))*f+d),t&&(r.angle=i.totalLength?Gi(i,u,f>=1?1-1e-9:f||1e-9):i.angle||0),r}function tt(s,e,t,n,i,r,o){for(var l=s.length,a,c,h,u,f;--l>-1;)for(a=s[l],c=a.length,h=0;h<c;h+=2)u=a[h],f=a[h+1],a[h]=u*e+f*n+r,a[h+1]=u*t+f*i+o;return s._dirty=1,s}function ho(s,e,t,n,i,r,o,l,a){if(!(s===l&&e===a)){t=K(t),n=K(n);var c=i%360*$s,h=xt(c),u=Tt(c),f=Math.PI,d=f*2,m=(s-l)/2,g=(e-a)/2,v=h*m+u*g,y=-u*m+h*g,w=v*v,T=y*y,x=w/(t*t)+T/(n*n);x>1&&(t=ae(x)*t,n=ae(x)*n);var b=t*t,E=n*n,_=(b*E-b*T-E*w)/(b*T+E*w);_<0&&(_=0);var M=(r===o?-1:1)*ae(_),R=M*(t*y/n),S=M*-(n*v/t),C=(s+l)/2,A=(e+a)/2,O=C+(h*R-u*S),P=A+(u*R+h*S),F=(v-R)/t,G=(y-S)/n,ne=(-v-R)/t,he=(-y-S)/n,H=F*F+G*G,$=(G<0?-1:1)*Math.acos(F/ae(H)),ie=(F*he-G*ne<0?-1:1)*Math.acos((F*ne+G*he)/ae(H*(ne*ne+he*he)));isNaN(ie)&&(ie=f),!o&&ie>0?ie-=d:o&&ie<0&&(ie+=d),$%=d,ie%=d;var On=Math.ceil(K(ie)/(d/4)),re=[],gt=ie/On,vt=4/3*Tt(gt/2)/(1+xt(gt/2)),fr=h*t,dr=u*t,pr=u*-n,mr=h*n,V;for(V=0;V<On;V++)i=$+V*gt,v=xt(i),y=Tt(i),F=xt(i+=gt),G=Tt(i),re.push(v-vt*y,y+vt*v,F+vt*G,G-vt*F,F,G);for(V=0;V<re.length;V+=2)v=re[V],y=re[V+1],re[V]=v*fr+y*pr+O,re[V+1]=v*dr+y*mr+P;return re[V-2]=l,re[V-1]=a,re}}function Dt(s){var e=(s+"").replace(Ks,function(R){var S=+R;return S<1e-4&&S>-1e-4?0:S}).match(qs)||[],t=[],n=0,i=0,r=2/3,o=e.length,l=0,a="ERROR: malformed path: "+s,c,h,u,f,d,m,g,v,y,w,T,x,b,E,_,M=function(S,C,A,O){w=(A-S)/3,T=(O-C)/3,g.push(S+w,C+T,A-w,O-T,A,O)};if(!s||!isNaN(e[0])||isNaN(e[1]))return console.log(a),t;for(c=0;c<o;c++)if(b=d,isNaN(e[c])?(d=e[c].toUpperCase(),m=d!==e[c]):c--,u=+e[c+1],f=+e[c+2],m&&(u+=n,f+=i),c||(v=u,y=f),d==="M")g&&(g.length<8?t.length-=1:l+=g.length,Zn(g)),n=v=u,i=y=f,g=[u,f],t.push(g),c+=2,d="L";else if(d==="C")g||(g=[0,0]),m||(n=i=0),g.push(u,f,n+e[c+3]*1,i+e[c+4]*1,n+=e[c+5]*1,i+=e[c+6]*1),c+=6;else if(d==="S")w=n,T=i,(b==="C"||b==="S")&&(w+=n-g[g.length-4],T+=i-g[g.length-3]),m||(n=i=0),g.push(w,T,u,f,n+=e[c+3]*1,i+=e[c+4]*1),c+=4;else if(d==="Q")w=n+(u-n)*r,T=i+(f-i)*r,m||(n=i=0),n+=e[c+3]*1,i+=e[c+4]*1,g.push(w,T,n+(u-n)*r,i+(f-i)*r,n,i),c+=4;else if(d==="T")w=n-g[g.length-4],T=i-g[g.length-3],g.push(n+w,i+T,u+(n+w*1.5-u)*r,f+(i+T*1.5-f)*r,n=u,i=f),c+=2;else if(d==="H")M(n,i,n=u,i),c+=1;else if(d==="V")M(n,i,n,i=u+(m?i-n:0)),c+=1;else if(d==="L"||d==="Z")d==="Z"&&(u=v,f=y,g.closed=!0),(d==="L"||K(n-u)>.5||K(i-f)>.5)&&(M(n,i,u,f),d==="L"&&(c+=2)),n=u,i=f;else if(d==="A"){if(E=e[c+4],_=e[c+5],w=e[c+6],T=e[c+7],h=7,E.length>1&&(E.length<3?(T=w,w=_,h--):(T=_,w=E.substr(2),h-=2),_=E.charAt(1),E=E.charAt(0)),x=ho(n,i,+e[c+1],+e[c+2],+e[c+3],+E,+_,(m?n:0)+w*1,(m?i:0)+T*1),c+=h,x)for(h=0;h<x.length;h++)g.push(x[h]);n=g[g.length-2],i=g[g.length-1]}else console.log(a);return c=g.length,c<6?(t.pop(),c=0):Zn(g),t.totalPoints=l+c,t}function fo(s,e){e===void 0&&(e=1);for(var t=s[0],n=0,i=[t,n],r=2;r<s.length;r+=2)i.push(t,n,s[r],n=(s[r]-t)*e/2,t=s[r],-n);return i}function gn(s,e){K(s[0]-s[2])<1e-4&&K(s[1]-s[3])<1e-4&&(s=s.slice(2));var t=s.length-2,n=+s[0],i=+s[1],r=+s[2],o=+s[3],l=[n,i,n,i],a=r-n,c=o-i,h=s.nonSmooth||[],u=Math.abs(s[t]-n)<.001&&Math.abs(s[t+1]-i)<.001,f,d,m,g,v,y,w,T,x,b,E,_,M,R,S;if(!t)return[n,i,n,i,n,i,n,i];for(u&&(s.push(r,o),r=n,o=i,n=s[t-2],i=s[t-1],s.unshift(n,i),t+=4,h=[0,0].concat(h)),e=e||e===0?+e:1,m=2;m<t;m+=2)if(f=n,d=i,n=r,i=o,r=+s[m+2],o=+s[m+3],!(n===r&&i===o)){if(g=a,v=c,a=r-n,c=o-i,h[m]){l.push(n-(n-f)/4,i-(i-d)/4,n,i,n+(r-n)/4,i+(o-i)/4);continue}y=ae(g*g+v*v),w=ae(a*a+c*c),T=ae(Math.pow(a/w+g/y,2)+Math.pow(c/w+v/y,2)),x=(y+w)*e*.25/T,b=n-(n-f)*(y?x/y:0),E=n+(r-n)*(w?x/w:0),_=n-(b+((E-b)*(y*3/(y+w)+.5)/4||0)),M=i-(i-d)*(y?x/y:0),R=i+(o-i)*(w?x/w:0),S=i-(M+((R-M)*(y*3/(y+w)+.5)/4||0)),l.push(N(b+_),N(M+S),N(n),N(i),N(E+_),N(R+S))}return n!==r||i!==o||l.length<4?l.push(N(r),N(o),N(r),N(o)):l.length-=2,l.length===2?l.push(n,i,n,i,n,i):u&&(l.splice(0,6),l.length-=6),l.closed=u,l}function Vi(s){Hi(s[0])&&(s=[s]);var e="",t=s.length,n,i,r,o;for(i=0;i<t;i++){for(o=s[i],e+="M"+N(o[0])+","+N(o[1])+" C",n=o.length,r=2;r<n;r++)e+=N(o[r++])+","+N(o[r++])+" "+N(o[r++])+","+N(o[r++])+" "+N(o[r++])+","+N(o[r])+" ";o.closed&&(e+="z")}return e}var po="x,translateX,left,marginLeft,xPercent".split(","),mo="y,translateY,top,marginTop,yPercent".split(","),go=Math.PI/180,W,Xi,Oe,vn,Jt,ii,vo=function(){return W||typeof window<"u"&&(W=window.gsap)&&W.registerPlugin&&W},Ye=function(e,t,n,i){for(var r=t.length,o=i===2?0:i,l=0;l<r;l++)e[o]=parseFloat(t[l][n]),i===2&&(e[o+1]=0),o+=2;return e},Ue=function(e,t,n){return parseFloat(e._gsap.get(e,t,n||"px"))||0},qi=function(e){var t=e[0],n=e[1],i;for(i=2;i<e.length;i+=2)t=e[i]+=t,n=e[i+1]+=n},ri=function(e,t,n,i,r,o,l,a,c){if(l.type==="cubic")t=[t];else{l.fromCurrent!==!1&&t.unshift(Ue(n,i,a),r?Ue(n,r,c):0),l.relative&&qi(t);var h=r?gn:fo;t=[h(t,l.curviness)]}return t=o(Wi(t,n,l)),Ft(e,n,i,t,"x",a),r&&Ft(e,n,r,t,"y",c),Ae(t,l.resolution||(l.curviness===0?20:12))},yo=function(e){return e},wo=/[-+\.]*\d+\.?(?:e-|e\+)?\d*/g,si=function(e,t,n){var i=je(e),r=0,o=0,l;return(e.tagName+"").toLowerCase()==="svg"?(l=e.viewBox.baseVal,l.width||(l={width:+e.getAttribute("width"),height:+e.getAttribute("height")})):l=t&&e.getBBox&&e.getBBox(),t&&t!=="auto"&&(r=t.push?t[0]*(l?l.width:e.offsetWidth||0):t.x,o=t.push?t[1]*(l?l.height:e.offsetHeight||0):t.y),n.apply(r||o?i.apply({x:r,y:o}):{x:i.e,y:i.f})},yn=function(e,t,n,i){var r=je(e.parentNode,!0,!0),o=r.clone().multiply(je(t)),l=si(e,n,r),a=si(t,i,r),c=a.x,h=a.y,u;return o.e=o.f=0,i==="auto"&&t.getTotalLength&&t.tagName.toLowerCase()==="path"&&(u=t.getAttribute("d").match(wo)||[],u=o.apply({x:+u[0],y:+u[1]}),c+=u.x,h+=u.y),u&&(u=o.apply(t.getBBox()),c-=u.x,h-=u.y),o.e=c-l.x,o.f=h-l.y,o},Wi=function(e,t,n){var i=n.align,r=n.matrix,o=n.offsetX,l=n.offsetY,a=n.alignOrigin,c=e[0][0],h=e[0][1],u=Ue(t,"x"),f=Ue(t,"y"),d,m,g;return!e||!e.length?Mt("M0,0L0,0"):(i&&(i==="self"||(d=vn(i)[0]||t)===t?tt(e,1,0,0,1,u-c,f-h):(a&&a[2]!==!1?W.set(t,{transformOrigin:a[0]*100+"% "+a[1]*100+"%"}):a=[Ue(t,"xPercent")/-100,Ue(t,"yPercent")/-100],m=yn(t,d,a,"auto"),g=m.apply({x:c,y:h}),tt(e,m.a,m.b,m.c,m.d,u+m.e-(g.x-m.e),f+m.f-(g.y-m.f)))),r?tt(e,r.a,r.b,r.c,r.d,r.e,r.f):(o||l)&&tt(e,1,0,0,1,o||0,l||0),e)},Ft=function(e,t,n,i,r,o){var l=t._gsap,a=l.harness,c=a&&a.aliases&&a.aliases[n],h=c&&c.indexOf(",")<0?c:n,u=e._pt=new Xi(e._pt,t,h,0,0,yo,0,l.set(t,h,e));u.u=Oe(l.get(t,h,o))||0,u.path=i,u.pp=r,e._props.push(h)},To=function(e,t){return function(n){return e||t!==1?zi(n,e,t):n}},Ki={version:"3.14.2",name:"motionPath",register:function(e,t,n){W=e,Oe=W.utils.getUnit,vn=W.utils.toArray,Jt=W.core.getStyleSaver,ii=W.core.reverting||function(){},Xi=n},init:function(e,t,n){if(!W)return console.warn("Please gsap.registerPlugin(MotionPathPlugin)"),!1;(!(typeof t=="object"&&!t.style)||!t.path)&&(t={path:t});var i=[],r=t,o=r.path,l=r.autoRotate,a=r.unitX,c=r.unitY,h=r.x,u=r.y,f=o[0],d=To(t.start,"end"in t?t.end:1),m,g;if(this.rawPaths=i,this.target=e,this.tween=n,this.styles=Jt&&Jt(e,"transform"),(this.rotate=l||l===0)&&(this.rOffset=parseFloat(l)||0,this.radians=!!t.useRadians,this.rProp=t.rotation||"rotation",this.rSet=e._gsap.set(e,this.rProp,this),this.ru=Oe(e._gsap.get(e,this.rProp))||0),Array.isArray(o)&&!("closed"in o)&&typeof f!="number"){for(g in f)!h&&~po.indexOf(g)?h=g:!u&&~mo.indexOf(g)&&(u=g);h&&u?i.push(ri(this,Ye(Ye([],o,h,0),o,u,1),e,h,u,d,t,a||Oe(o[0][h]),c||Oe(o[0][u]))):h=u=0;for(g in f)g!==h&&g!==u&&i.push(ri(this,Ye([],o,g,2),e,g,0,d,t,Oe(o[0][g])))}else m=d(Wi(Mt(t.path),e,t)),Ae(m,t.resolution),i.push(m),Ft(this,e,t.x||"x",m,"x",t.unitX||"px"),Ft(this,e,t.y||"y",m,"y",t.unitY||"px");n.vars.immediateRender&&this.render(n.progress(),this)},render:function(e,t){var n=t.rawPaths,i=n.length,r=t._pt;if(t.tween._time||!ii()){for(e>1?e=1:e<0&&(e=0);i--;)ni(n[i],e,!i&&t.rotate,n[i]);for(;r;)r.set(r.t,r.p,r.path[r.pp]+r.u,r.d,e),r=r._next;t.rotate&&t.rSet(t.target,t.rProp,n[0].angle*(t.radians?go:1)+t.rOffset+t.ru,t,e)}else t.styles.revert()},getLength:function(e){return Ae(Mt(e)).totalLength},sliceRawPath:zi,getRawPath:Mt,pointsToSegment:gn,stringToRawPath:Dt,rawPathToString:Vi,transformRawPath:tt,getGlobalMatrix:je,getPositionOnPath:ni,cacheRawPathMeasurements:Ae,convertToPath:function(e,t){return vn(e).map(function(n){return co(n,t!==!1)})},convertCoordinates:function(e,t,n){var i=je(t,!0,!0).multiply(je(e));return n?i.apply(n):i},getAlignMatrix:yn,getRelativePosition:function(e,t,n,i){var r=yn(e,t,n,i);return{x:r.e,y:r.f}},arrayToRawPath:function(e,t){t=t||{};var n=Ye(Ye([],e,t.x||"x",0),e,t.y||"y",1);return t.relative&&qi(n),[t.type==="cubic"?n:gn(n,t.curviness)]}};vo()&&W.registerPlugin(Ki);const Xt=[{title:"Blurred Vision",image:"/work/work-1.jpg",href:"/film.html"},{title:"Silent Motion",image:"/work/work-2.jpg",href:"/archive.html"},{title:"Red Mirage",image:"/work/work-3.jpg",href:"/contact.html"},{title:"Echoed Silhouette",image:"/work/work-4.jpg",href:"/contact.html"}];L.registerPlugin(Ki,yi);const D={SLIDES_MULTIPLIER:5,EXTRA_SLIDES_MULTIPLIER:3,END_SCALE:5,SLIDE_WIDTH_RATIO:.45,SCROLL_INTENSITY:1,LERP_FACTOR:.1,SCROLL_TIMEOUT:150,MOBILE_BREAKPOINT:1e3,OVAL_RADIUS_X_MOBILE:144,OVAL_RADIUS_Y_MOBILE:336,OVAL_RADIUS_X_DESKTOP:540,OVAL_RADIUS_Y_DESKTOP:336,THUMBNAIL_OFFSET_Y:-25,OUTER_DISTANCE_MULTIPLIER:3,TAU:Math.PI*2,DRAG_SENSITIVITY:1.2,MOMENTUM_DECAY:.94,MOMENTUM_MIN_SPEED:.05},p={slider:null,slideTitle:null,thumbnailWheel:null,totalImages:Xt.length,totalSlides:0,slideWidth:0,viewportCenter:0,isMobile:!1,currentX:0,targetX:0,isScrolling:!1,scrollTimeout:null,activeSlideIndex:0,isInitialized:!1,isThumbnailIntroPlaying:!1,thumbnailIntroTl:null,rafId:null,slides:null,thumbnails:null,introRadiusProgress:0,dragProxy:null,draggable:null,dragMomentum:0,lastDragTime:0,isDragging:!1};let _e=0,Pn=0,qt=0;const Ge={passive:!1},Cn=()=>p.isMobile?{rx:D.OVAL_RADIUS_X_MOBILE,ry:D.OVAL_RADIUS_Y_MOBILE}:{rx:D.OVAL_RADIUS_X_DESKTOP,ry:D.OVAL_RADIUS_Y_DESKTOP},xo=()=>-(Math.abs(p.currentX)/p.slideWidth*D.TAU/p.totalSlides)+Math.PI/2;function So(){if(!p.slider)return;const s=document.createDocumentFragment(),e=p.totalSlides*D.EXTRA_SLIDES_MULTIPLIER;for(let t=0;t<e;t++){const n=document.createElement("div");n.className="slide";const i=document.createElement("img");i.src=Xt[t%p.totalImages].image,n.appendChild(i),s.appendChild(n)}p.slider.appendChild(s),p.slides=p.slider.querySelectorAll(".slide")}function Yi(){if(!p.thumbnailWheel)return;const s=document.createDocumentFragment(),{rx:e,ry:t}=Cn(),n=p.viewportCenter,i=window.innerHeight*.5+D.THUMBNAIL_OFFSET_Y;for(let r=0;r<p.totalSlides;r++){const o=r/p.totalSlides*D.TAU,l=document.createElement("div");l.className="thumbnail-item";const a=document.createElement("img");a.src=Xt[r%p.totalImages].image,l.appendChild(a),l._scale=1,l._angle=o;const c=e*Math.cos(o)+n,h=t*Math.sin(o)+i;L.set(l,{x:c,y:h,transformOrigin:"center center"}),s.appendChild(l)}p.thumbnailWheel.appendChild(s),p.thumbnails=p.thumbnailWheel.querySelectorAll(".thumbnail-item")}function $i(){if(!p.slides)return;const s=new Float32Array(p.slides.length);p.slides.forEach((t,n)=>{s[n]=n*p.slideWidth-p.slideWidth}),L.set(p.slides,{x:t=>s[t]});const e=p.viewportCenter-qt;p.currentX=e,p.targetX=e}function kt(s){const e=s.deltaY||s.detail||s.wheelDelta*-1;p.targetX-=e*D.SCROLL_INTENSITY,p.isScrolling=!0,clearTimeout(p.scrollTimeout),p.scrollTimeout=setTimeout(()=>{p.isScrolling=!1},D.SCROLL_TIMEOUT)}function Qi(s){(s.target===document||s.target===document.body)&&window.scrollTo(0,0)}function Zi(){Math.abs(p.dragMomentum)>D.MOMENTUM_MIN_SPEED?(p.targetX-=p.dragMomentum*.016,p.dragMomentum*=D.MOMENTUM_DECAY):p.isDragging||(p.dragMomentum=0),p.currentX+=(p.targetX-p.currentX)*D.LERP_FACTOR,p.currentX>0?(p.currentX-=_e,p.targetX-=_e):p.currentX<-_e&&(p.currentX+=_e,p.targetX+=_e);let s=0,e=1/0;p.slides.forEach((o,l)=>{const a=l*p.slideWidth+p.currentX,c=a+qt,h=Math.abs(c-p.viewportCenter);o.style.transform=`translate3d(${a}px, 0, 0)`;const u=Math.min(h/Pn,1),d=1+(u<.5?2*u*u:1-Math.pow(-2*u+2,2)*.5)*(D.END_SCALE-1),m=o.firstElementChild;m.style.transform=`scale(${d})`,h<e&&(e=h,s=l%p.totalSlides)});const t=Math.abs(p.currentX)/p.slideWidth,n=Math.floor(t)%p.totalSlides;n!==p.activeSlideIndex&&(p.activeSlideIndex=n);const i=s%p.totalImages,r=Xt[i];p.slideTitle.textContent!==r.title&&(p.slideTitle.textContent=r.title,p.slideTitle.dataset.href=r.href||""),Ji(),p.rafId=requestAnimationFrame(Zi)}function Ji(){if(!p.thumbnails)return;const s=xo(),{rx:e,ry:t}=Cn(),n=p.viewportCenter,i=window.innerHeight*.5+D.THUMBNAIL_OFFSET_Y;p.thumbnails.forEach(r=>{const o=typeof r._scale=="number"?r._scale:1,l=p.introRadiusProgress,a=r._angle+s,c=e*l*Math.cos(a)+n,h=t*l*Math.sin(a)+i;r.style.transform=`translate3d(${c}px, ${h}px, 0) scale(${o})`})}let wn=0;function Eo(){wn=p.draggable?p.draggable.x:0,p.lastDragTime=performance.now(),p.dragMomentum=0,p.isDragging=!0}function bo(){if(!p.draggable)return;const s=performance.now(),e=p.draggable.x-wn,t=Math.max((s-p.lastDragTime)/1e3,.001);wn=p.draggable.x,p.lastDragTime=s;const n=e*D.DRAG_SENSITIVITY;p.targetX-=n,p.dragMomentum=n/t}function _o(){p.isDragging=!1}function Ro(){er();const s=document.createElement("div");s.style.position="absolute",s.style.left="0",s.style.top="0",s.style.width="1px",s.style.height="1px",s.style.pointerEvents="none",document.body.appendChild(s),p.dragProxy=s;const e=yi.create(s,{trigger:p.thumbnailWheel,type:"x",cursor:"grab",activeCursor:"grabbing",onPress:Eo,onDrag:bo,onRelease:_o,allowContextMenu:!0,minimumMovement:1,zIndexBoost:!1,dragResistance:.02});p.draggable=e&&e[0]?e[0]:null}function er(){p.draggable&&(p.draggable.kill(),p.draggable=null),p.dragProxy&&p.dragProxy.parentNode&&(p.dragProxy.parentNode.removeChild(p.dragProxy),p.dragProxy=null)}function Mo(){if(!p.thumbnailWheel||!p.thumbnails?.length)return;p.thumbnailIntroTl&&p.thumbnailIntroTl.kill(),p.isThumbnailIntroPlaying=!0,p.introRadiusProgress=0,p.viewportCenter,Cn(),p.thumbnailWheel&&(p.thumbnailWheel.style.pointerEvents="none"),p.slider&&(p.slider.style.pointerEvents="none"),p.thumbnails.forEach((e,t)=>{e._scale=0,L.set(e,{opacity:0,zIndex:100+(p.thumbnails.length-1-t)})}),p.thumbnailIntroTl=L.timeline({onComplete:()=>{p.isThumbnailIntroPlaying=!1,p.introRadiusProgress=1,p.thumbnailWheel&&(p.thumbnailWheel.style.pointerEvents="auto"),p.slider&&(p.slider.style.pointerEvents="auto")}}),p.thumbnails.forEach((e,t)=>{const n=(p.thumbnails.length-1-t)*.08;p.thumbnailIntroTl.to(e,{opacity:1,duration:.5,ease:"power2.out"},n),p.thumbnailIntroTl.to(e,{_scale:1.3,duration:.5,ease:"power2.out"},n)}),p.thumbnailIntroTl.to({},{duration:.3}),p.thumbnailIntroTl.to(p,{introRadiusProgress:1,duration:1.2,ease:"power2.inOut"},"expand"),p.thumbnails.forEach(e=>{p.thumbnailIntroTl.to(e,{_scale:1,duration:1.2,ease:"power2.inOut"},"expand")});const s=document.querySelector(".slide-title");if(s){const e=ye(s);e?.chars&&(L.set(s,{opacity:1}),p.thumbnailIntroTl.fromTo(e.chars,{y:100,opacity:0},{y:0,opacity:1,duration:1,stagger:{amount:.2},ease:"power2.out"},"expand+=0.2"))}}function tr(){p.thumbnailIntroTl&&(p.thumbnailIntroTl.kill(),p.thumbnailIntroTl=null),p.isThumbnailIntroPlaying=!1,p.introRadiusProgress=1,p.isMobile=window.innerWidth<D.MOBILE_BREAKPOINT,p.slideWidth=window.innerWidth*D.SLIDE_WIDTH_RATIO,p.viewportCenter=window.innerWidth*.5,qt=p.slideWidth*.5,_e=p.totalSlides*p.slideWidth,Pn=p.slideWidth*D.OUTER_DISTANCE_MULTIPLIER,p.thumbnailWheel&&(p.thumbnailWheel.innerHTML=""),Yi(),$i(),Ji()}function Ao(){window.addEventListener("wheel",kt,Ge),window.addEventListener("DOMMouseScroll",kt,Ge),window.addEventListener("scroll",Qi,Ge),window.addEventListener("resize",tr)}function st(){p.thumbnailIntroTl&&(p.thumbnailIntroTl.kill(),p.thumbnailIntroTl=null),p.isThumbnailIntroPlaying=!1,p.rafId&&(cancelAnimationFrame(p.rafId),p.rafId=null),window.removeEventListener("wheel",kt,Ge),window.removeEventListener("DOMMouseScroll",kt,Ge),window.removeEventListener("scroll",Qi,Ge),window.removeEventListener("resize",tr),p.slideTitle&&(p.slideTitle.onclick=null),p.slider&&(p.slider.innerHTML=""),p.thumbnailWheel&&(p.thumbnailWheel.innerHTML=""),er(),p.slides=null,p.thumbnails=null,p.isInitialized=!1}function Lo(){st(),p.slider=document.querySelector(".slider"),p.slideTitle=document.querySelector(".slide-title"),p.thumbnailWheel=document.querySelector(".thumbnail-wheel"),!(!p.slider||!p.slideTitle||!p.thumbnailWheel)&&(p.isMobile=window.innerWidth<D.MOBILE_BREAKPOINT,p.slideWidth=window.innerWidth*D.SLIDE_WIDTH_RATIO,p.viewportCenter=window.innerWidth*.5,p.totalSlides=p.totalImages*D.SLIDES_MULTIPLIER,qt=p.slideWidth*.5,_e=p.totalSlides*p.slideWidth,Pn=p.slideWidth*D.OUTER_DISTANCE_MULTIPLIER,So(),Yi(),$i(),Ao(),Ro(),p.slideTitle&&L.set(p.slideTitle,{opacity:0}),Mo(),p.slideTitle.onclick=()=>{const s=p.slideTitle.dataset.href;s&&(window.location.href=s)},Zi(),p.isInitialized=!0)}const ee=[{title:"Motion Study",image:"/canvas/image-1.jpg",year:2024},{title:"Idle Form",image:"/canvas/image-2.jpg",year:2023},{title:"Blur Signal",image:"/canvas/image-3.jpg",year:2024},{title:"Still Drift",image:"/canvas/image-4.jpg",year:2023},{title:"Tidewalk",image:"/canvas/image-5.jpg",year:2024},{title:"Core Motion",image:"/canvas/image-6.jpg",year:2022},{title:"White Bloom",image:"/canvas/image-7.jpg",year:2024},{title:"Backrun",image:"/canvas/image-8.jpg",year:2023},{title:"Rushline",image:"/canvas/image-9.jpg",year:2024},{title:"Afterimage",image:"/canvas/image-1.jpg",year:2023},{title:"Shadowhead",image:"/canvas/image-2.jpg",year:2022},{title:"Opal Lace",image:"/canvas/image-3.jpg",year:2024},{title:"Glassprint",image:"/canvas/image-4.jpg",year:2024},{title:"Redshift",image:"/canvas/image-5.jpg",year:2023},{title:"White Noise",image:"/canvas/image-6.jpg",year:2023},{title:"Twin Field",image:"/canvas/image-7.jpg",year:2024},{title:"Petalloop",image:"/canvas/image-8.jpg",year:2023},{title:"Ghostwalk",image:"/canvas/image-9.jpg",year:2024},{title:"Heatwave",image:"/canvas/image-1.jpg",year:2023},{title:"Sky Drift",image:"/canvas/image-2.jpg",year:2024},{title:"Spindle",image:"/canvas/image-3.jpg",year:2022},{title:"Pacer",image:"/canvas/image-4.jpg",year:2023},{title:"Stride",image:"/canvas/image-5.jpg",year:2024},{title:"Cryo Pulse",image:"/canvas/image-6.jpg",year:2022},{title:"Velvet Blur",image:"/canvas/image-7.jpg",year:2024}],Io=`
  varying vec2 vUv;
  void main() {
    vUv = uv;
    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
  }
`,Po=`
  uniform vec2 uResolution;
  uniform float uDistortion;
  uniform float uTime;
  uniform sampler2D uImageAtlas;
  uniform float uTextureCount;
  uniform vec2 uOffset;
  uniform float uCellSize;
  uniform float uFocusIndex;
  uniform float uFocusState;
  uniform float uMousePressed;
  uniform float uZoom;
  uniform float uIntroProgress;

  varying vec2 vUv;

  void main() {
    vec2 screenUV = (vUv - 0.5) * 2.0;

    // Apply zoom
    screenUV /= uZoom;

    // Fisheye distortion - flattens when mouse is pressed
    float radius = length(screenUV);
    float effectiveDistortion = mix(uDistortion, 0.0, uMousePressed);
    float distortion = 1.0 - effectiveDistortion * radius * radius;
    vec2 distortedUV = screenUV * distortion;

    vec2 aspectRatio = vec2(uResolution.x / uResolution.y, 1.0);
    // Expand from center based on intro progress
    vec2 worldCoord = (distortedUV * aspectRatio) * uIntroProgress + uOffset;

    vec2 cellPos = worldCoord / uCellSize;
    vec2 cellId = floor(cellPos);
    vec2 cellUV = fract(cellPos);

    float texIndex = mod(cellId.x + cellId.y * 3.0, uTextureCount);
    if (texIndex < 0.0) texIndex += uTextureCount;
    texIndex = floor(texIndex);

    bool isFocused = abs(texIndex - uFocusIndex) < 0.1;

    vec3 color = vec3(0.0);
    float outAlpha = 0.0;

    float baseImageSize = 0.7;
    float targetImageSize = isFocused ? 0.92 : 0.5;
    float imageSize = mix(baseImageSize, targetImageSize, uFocusState);
    
    // Scale image from center during intro
    imageSize *= smoothstep(0.0, 0.5, uIntroProgress);

    float imageBorder = (1.0 - imageSize) * 0.5;
    vec2 imageUV = (cellUV - imageBorder) / imageSize;

    float edgeSmooth = 0.02;
    vec2 imageMask = smoothstep(-edgeSmooth, edgeSmooth, imageUV) *
                    smoothstep(-edgeSmooth, edgeSmooth, 1.0 - imageUV);
    float imageAlpha = imageMask.x * imageMask.y;

    bool inImageArea = imageUV.x >= 0.0 && imageUV.x <= 1.0 && imageUV.y >= 0.0 && imageUV.y <= 1.0;

    if (inImageArea && imageAlpha > 0.0) {
      float atlasSize = ceil(sqrt(uTextureCount));
      vec2 atlasPos = vec2(mod(texIndex, atlasSize), floor(texIndex / atlasSize));

      // Chromatic Aberration - increases at edges of viewport
      float caStrength = 0.012 * pow(radius, 2.0);
      vec2 caOffset = screenUV * caStrength;

      vec2 imageUVR = imageUV - caOffset;
      vec2 atlasUVR = (atlasPos + clamp(imageUVR, 0.0, 1.0)) / atlasSize;
      atlasUVR.y = 1.0 - atlasUVR.y;

      vec2 imageUVG = imageUV;
      vec2 atlasUVG = (atlasPos + imageUVG) / atlasSize;
      atlasUVG.y = 1.0 - atlasUVG.y;

      vec2 imageUVB = imageUV + caOffset;
      vec2 atlasUVB = (atlasPos + clamp(imageUVB, 0.0, 1.0)) / atlasSize;
      atlasUVB.y = 1.0 - atlasUVB.y;

      float r = texture2D(uImageAtlas, atlasUVR).r;
      float g = texture2D(uImageAtlas, atlasUVG).g;
      float b = texture2D(uImageAtlas, atlasUVB).b;
      float a = texture2D(uImageAtlas, atlasUVG).a;

      vec3 finalImageColor = vec3(r, g, b);

      // Darken non-focused images during focus
      if (!isFocused) {
        finalImageColor *= mix(1.0, 0.15, uFocusState);
      }

      color = finalImageColor;
      outAlpha = imageAlpha * a;
    }

    // Vignette fade at edges
    float fade = 1.0 - smoothstep(1.0, 1.6, radius);
    
    // Fade in based on intro progress
    float introAlpha = smoothstep(0.0, 0.25, uIntroProgress);
    outAlpha *= (fade * introAlpha);

    gl_FragColor = vec4(color * fade * introAlpha, outAlpha);
  }
`,Y={cellSize:.65,distortion:.08,lerpFactor:.08};let dt=!1,le=null,j=null,Ut=null,Ht=null,k=null,At=null,se={x:0,y:0},ue={x:0,y:0},Bt=!1,Nn=!0,nr=0,He={x:0,y:0},z=-1,We={value:0},Le={x:0,y:0},pt={value:1},we=0,Wt={value:0};const Co=s=>{const e=Math.ceil(Math.sqrt(s.length)),t=512,n=document.createElement("canvas");n.width=n.height=e*t;const i=n.getContext("2d");i.fillStyle="#000",i.fillRect(0,0,n.width,n.height),s.forEach((o,l)=>{const a=l%e*t,c=Math.floor(l/e)*t;if(o.image?.complete){const h=o.image,u=h.width/h.height;let f=t,d=t,m=a,g=c;u>1?(d=t/u,g=c+(t-d)/2):(f=t*u,m=a+(t-f)/2),i.drawImage(h,m,g,f,d)}});const r=new gr(n);return r.wrapS=ct,r.wrapT=ct,r.minFilter=Pe,r.magFilter=Pe,r.flipY=!1,r},No=()=>{const s=new Mn,e=[];let t=0;return new Promise(n=>{ee.forEach(i=>{const r=s.load(i.image,()=>{++t===ee.length&&n(e)});r.wrapS=ct,r.wrapT=ct,r.minFilter=Pe,r.magFilter=Pe,e.push(r)})})},Oo=(s,e,t)=>{let n={x:0,y:0},i=1/0;const r=15,o=Math.round(e),l=Math.round(t);for(let a=o-r;a<=o+r;a++)for(let c=l-r;c<=l+r;c++){let h=(a+c*3)%ee.length;if(h<0&&(h+=ee.length),h===s){const u=(a-e)**2+(c-t)**2;u<i&&(i=u,n={x:a,y:c})}}return n},Tn=s=>s.split("").map(e=>`<span style="display:inline-block; will-change: transform;">${e===" "?"&nbsp;":e}</span>`).join(""),Do=(s,e)=>{s.querySelector("span")||(s.innerHTML=Tn(s.textContent));const t=s.querySelectorAll("span");L.to(t,{y:"100%",opacity:0,stagger:.015,duration:.25,ease:"power2.in",onComplete:()=>{s.innerHTML=Tn(e);const n=s.querySelectorAll("span");L.fromTo(n,{y:"100%",opacity:0},{y:"0%",opacity:1,stagger:.015,duration:.25,ease:"power2.out"})}})},ir=s=>{const e=document.getElementById("archive-overlay"),t=document.getElementById("archive-title");if(s!==-1){const n=ee[s].title;t&&(e.classList.contains("active")&&t.textContent.replace(/\u00a0/g," ")!==n?Do(t,n):(t.innerHTML=Tn(n),L.set(t.querySelectorAll("span"),{y:"0%",opacity:1}))),e.classList.add("active")}else e.classList.remove("active")},xn=(s,e,t)=>{z===s&&Le.x===e&&Le.y===t||(z=s,Le={x:e,y:t},k?.material?.uniforms&&(k.material.uniforms.uFocusIndex.value=s),L.to(We,{value:1,duration:.5,ease:"power2.out",onUpdate:()=>{k?.material?.uniforms&&(k.material.uniforms.uFocusState.value=We.value)}}),ue.x=(e+.5)*Y.cellSize,ue.y=(t+.5)*Y.cellSize,ir(s))},Ie=()=>{z!==-1&&(z=-1,L.to(We,{value:0,duration:.4,ease:"power2.out",onUpdate:()=>{k?.material?.uniforms&&(k.material.uniforms.uFocusState.value=We.value)}}),ir(-1))},jt=s=>{if(z===-1)return;let e=z+s;e>=ee.length&&(e=0),e<0&&(e=ee.length-1);const t=Oo(e,Le.x,Le.y);xn(e,t.x,t.y)},Fo=(s,e)=>{if(!j)return null;const t=j.domElement.getBoundingClientRect(),n=(s-t.left)/t.width*2-1,i=-((e-t.top)/t.height*2-1),r=Math.sqrt(n*n+i*i),o=1-Y.distortion*r*r,l=t.width/t.height;let a=n*o*l+se.x,c=i*o+se.y;const h=Math.floor(a/Y.cellSize),u=Math.floor(c/Y.cellSize),f=a/Y.cellSize-h,d=c/Y.cellSize-u,g=(1-(z===-1?.7:We.value>.5?.92:.7))/2,v=f>g&&f<1-g&&d>g&&d<1-g;let y=(h+u*3)%ee.length;return y<0&&(y+=ee.length),{cellX:h,cellY:u,texIndex:y,isOnImage:v}},ko=s=>{k?.material?.uniforms?.uIntroProgress?.value<.9||s.target.closest(".nav-wrap")||s.target.closest(".nav-btn")||s.target.closest(".menu-wrap")||s.target.closest(".menu-box")||s.target.closest(".bottom-nav-wrap")||(Bt=!0,Nn=!0,nr=Date.now(),He.x=s.clientX,He.y=s.clientY,s.clientX,s.clientY,we=0,L.to(Wt,{value:1,duration:.3,ease:"power2.out"}))},rr=s=>{if(!Bt)return;const e=s.clientX-He.x,t=s.clientY-He.y;if(we+=Math.sqrt(e*e+t*t),we>10){Nn=!1;const i=Math.min(we/200,1);pt.value=1-i*.2,z!==-1&&we>50&&Ie()}ue.x-=e*.002,ue.y+=t*.002,He.x=s.clientX,He.y=s.clientY},sr=s=>{if(!Bt)return;Bt=!1,L.to(Wt,{value:0,duration:.4,ease:"power2.out"}),pt.value!==1&&L.to(pt,{value:1,duration:.3,ease:"power2.out"});const e=Date.now()-nr<250,t=we<15;if((Nn||t)&&e){const n=Fo(s.clientX,s.clientY);if(!n){z!==-1&&Ie();return}const{cellX:i,cellY:r,texIndex:o,isOnImage:l}=n;z===-1?l&&xn(o,i,r):l&&(o!==z||i!==Le.x||r!==Le.y)?xn(o,i,r):Ie()}we=0},Uo=s=>{k?.material?.uniforms?.uIntroProgress?.value<.9||s.target.closest("#gallery")&&(s.preventDefault(),ue.x+=s.deltaX*.001,ue.y-=s.deltaY*.001,z!==-1&&(Math.abs(s.deltaX)>10||Math.abs(s.deltaY)>10)&&Ie())},or=s=>{z!==-1&&(s.key==="ArrowRight"?(s.preventDefault(),jt(1)):s.key==="ArrowLeft"?(s.preventDefault(),jt(-1)):s.key==="Escape"&&(s.preventDefault(),Ie()))},ar=()=>{if(!le||!j)return;const s=le.offsetWidth,e=le.offsetHeight;j.setSize(s,e),j.setPixelRatio(Math.min(window.devicePixelRatio,2)),k?.material?.uniforms&&k.material.uniforms.uResolution.value.set(s,e)},lr=()=>{dt&&(At=requestAnimationFrame(lr),se.x+=(ue.x-se.x)*Y.lerpFactor,se.y+=(ue.y-se.y)*Y.lerpFactor,k?.material?.uniforms&&(k.material.uniforms.uOffset.value.set(se.x,se.y),k.material.uniforms.uTime.value=performance.now()*.001,k.material.uniforms.uMousePressed.value=Wt.value,k.material.uniforms.uZoom.value=pt.value),j.render(Ut,Ht))},Ho=async()=>{if(le=document.getElementById("gallery"),!le)return;const s=le.offsetWidth,e=le.offsetHeight;j=new Rn({antialias:!0,alpha:!0}),j.setSize(s,e),j.setPixelRatio(Math.min(window.devicePixelRatio,2)),j.setClearColor(0,0),le.appendChild(j.domElement),Ut=new bn,Ht=new Ln(-1,1,1,-1,.1,10),Ht.position.z=1;const t=await No(),n=Co(t),i=new vi(2,2),r=new Pt({vertexShader:Io,fragmentShader:Po,uniforms:{uResolution:{value:new Te(s,e)},uDistortion:{value:Y.distortion},uTime:{value:0},uImageAtlas:{value:n},uTextureCount:{value:ee.length},uOffset:{value:new Te(0,0)},uCellSize:{value:Y.cellSize},uFocusIndex:{value:-1},uFocusState:{value:0},uMousePressed:{value:0},uZoom:{value:1},uIntroProgress:{value:0}},transparent:!0});k=new zt(i,r),Ut.add(k),L.fromTo(r.uniforms.uIntroProgress,{value:0},{value:1,duration:1.8,ease:"power3.out",delay:.2});const o=j.domElement;o.addEventListener("pointerdown",ko),window.addEventListener("pointermove",rr),window.addEventListener("pointerup",sr),o.addEventListener("wheel",Uo,{passive:!1}),window.addEventListener("keydown",or),window.addEventListener("resize",ar);const l=document.getElementById("archive-prev"),a=document.getElementById("archive-next");l&&l.addEventListener("click",h=>{h.stopPropagation(),jt(-1)}),a&&a.addEventListener("click",h=>{h.stopPropagation(),jt(1)});const c=document.getElementById("archive-overlay");c&&c.addEventListener("click",h=>{!h.target.closest(".archive-header")&&!h.target.closest(".archive-nav-wrap")&&!h.target.closest(".nav-btn")&&Ie()}),dt=!0,lr()};async function Bo(){dt||await Ho()}function Lt(){dt&&(dt=!1,At&&(cancelAnimationFrame(At),At=null),window.removeEventListener("pointermove",rr),window.removeEventListener("pointerup",sr),window.removeEventListener("keydown",or),window.removeEventListener("resize",ar),j&&(j.dispose(),j.domElement?.parentNode&&j.domElement.parentNode.removeChild(j.domElement)),k?.material&&k.material.dispose(),k?.geometry&&k.geometry.dispose(),le=null,j=null,Ut=null,Ht=null,k=null,z=-1,We={value:0},se={x:0,y:0},ue={x:0,y:0},pt={value:1},we=0,Wt={value:0})}function oi(s,e){if(e===vr)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),s;if(e===on||e===wi){let t=s.getIndex();if(t===null){const o=[],l=s.getAttribute("position");if(l!==void 0){for(let a=0;a<l.count;a++)o.push(a);s.setIndex(o),t=s.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),s}const n=t.count-2,i=[];if(e===on)for(let o=1;o<=n;o++)i.push(t.getX(0)),i.push(t.getX(o)),i.push(t.getX(o+1));else for(let o=0;o<n;o++)o%2===0?(i.push(t.getX(o)),i.push(t.getX(o+1)),i.push(t.getX(o+2))):(i.push(t.getX(o+2)),i.push(t.getX(o+1)),i.push(t.getX(o)));i.length/3!==n&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const r=s.clone();return r.setIndex(i),r.clearGroups(),r}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),s}class jo extends yr{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new qo(t)}),this.register(function(t){return new Wo(t)}),this.register(function(t){return new na(t)}),this.register(function(t){return new ia(t)}),this.register(function(t){return new ra(t)}),this.register(function(t){return new Yo(t)}),this.register(function(t){return new $o(t)}),this.register(function(t){return new Qo(t)}),this.register(function(t){return new Zo(t)}),this.register(function(t){return new Xo(t)}),this.register(function(t){return new Jo(t)}),this.register(function(t){return new Ko(t)}),this.register(function(t){return new ta(t)}),this.register(function(t){return new ea(t)}),this.register(function(t){return new zo(t)}),this.register(function(t){return new sa(t)}),this.register(function(t){return new oa(t)})}load(e,t,n,i){const r=this;let o;if(this.resourcePath!=="")o=this.resourcePath;else if(this.path!==""){const c=it.extractUrlBase(e);o=it.resolveURL(c,this.path)}else o=it.extractUrlBase(e);this.manager.itemStart(e);const l=function(c){i?i(c):console.error(c),r.manager.itemError(e),r.manager.itemEnd(e)},a=new Ti(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(c){try{r.parse(c,o,function(h){t(h),r.manager.itemEnd(e)},l)}catch(h){l(h)}},n,l)}setDRACOLoader(e){return this.dracoLoader=e,this}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,i){let r;const o={},l={},a=new TextDecoder;if(typeof e=="string")r=JSON.parse(e);else if(e instanceof ArrayBuffer)if(a.decode(new Uint8Array(e,0,4))===cr){try{o[I.KHR_BINARY_GLTF]=new aa(e)}catch(u){i&&i(u);return}r=JSON.parse(o[I.KHR_BINARY_GLTF].content)}else r=JSON.parse(a.decode(e));else r=e;if(r.asset===void 0||r.asset.version[0]<2){i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const c=new Ta(r,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let h=0;h<this.pluginCallbacks.length;h++){const u=this.pluginCallbacks[h](c);u.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),l[u.name]=u,o[u.name]=!0}if(r.extensionsUsed)for(let h=0;h<r.extensionsUsed.length;++h){const u=r.extensionsUsed[h],f=r.extensionsRequired||[];switch(u){case I.KHR_MATERIALS_UNLIT:o[u]=new Vo;break;case I.KHR_DRACO_MESH_COMPRESSION:o[u]=new la(r,this.dracoLoader);break;case I.KHR_TEXTURE_TRANSFORM:o[u]=new ca;break;case I.KHR_MESH_QUANTIZATION:o[u]=new ua;break;default:f.indexOf(u)>=0&&l[u]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+u+'".')}}c.setExtensions(o),c.setPlugins(l),c.parse(n,i)}parseAsync(e,t){const n=this;return new Promise(function(i,r){n.parse(e,t,i,r)})}}function Go(){let s={};return{get:function(e){return s[e]},add:function(e,t){s[e]=t},remove:function(e){delete s[e]},removeAll:function(){s={}}}}const I={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class zo{constructor(e){this.parser=e,this.name=I.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,i=t.length;n<i;n++){const r=t[n];r.extensions&&r.extensions[this.name]&&r.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,r.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let i=t.cache.get(n);if(i)return i;const r=t.json,a=((r.extensions&&r.extensions[this.name]||{}).lights||[])[e];let c;const h=new xe(16777215);a.color!==void 0&&h.setRGB(a.color[0],a.color[1],a.color[2],ce);const u=a.range!==void 0?a.range:0;switch(a.type){case"directional":c=new xi(h),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new Tr(h),c.distance=u;break;case"spot":c=new wr(h),c.distance=u,a.spot=a.spot||{},a.spot.innerConeAngle=a.spot.innerConeAngle!==void 0?a.spot.innerConeAngle:0,a.spot.outerConeAngle=a.spot.outerConeAngle!==void 0?a.spot.outerConeAngle:Math.PI/4,c.angle=a.spot.outerConeAngle,c.penumbra=1-a.spot.innerConeAngle/a.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+a.type)}return c.position.set(0,0,0),Q(c,a),a.intensity!==void 0&&(c.intensity=a.intensity),c.name=t.createUniqueName(a.name||"light_"+e),i=Promise.resolve(c),t.cache.add(n,i),i}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,n=this.parser,r=n.json.nodes[e],l=(r.extensions&&r.extensions[this.name]||{}).light;return l===void 0?null:this._loadLight(l).then(function(a){return n._getNodeRef(t.cache,l,a)})}}class Vo{constructor(){this.name=I.KHR_MATERIALS_UNLIT}getMaterialType(){return Qe}extendParams(e,t,n){const i=[];e.color=new xe(1,1,1),e.opacity=1;const r=t.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){const o=r.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],ce),e.opacity=o[3]}r.baseColorTexture!==void 0&&i.push(n.assignTexture(e,"map",r.baseColorTexture,Ve))}return Promise.all(i)}}class Xo{constructor(e){this.parser=e,this.name=I.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=i.extensions[this.name].emissiveStrength;return r!==void 0&&(t.emissiveIntensity=r),Promise.resolve()}}class qo{constructor(e){this.parser=e,this.name=I.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:te}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],o=i.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&r.push(n.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&r.push(n.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(r.push(n.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const l=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Te(l,l)}return Promise.all(r)}}class Wo{constructor(e){this.parser=e,this.name=I.KHR_MATERIALS_DISPERSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:te}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=i.extensions[this.name];return t.dispersion=r.dispersion!==void 0?r.dispersion:0,Promise.resolve()}}class Ko{constructor(e){this.parser=e,this.name=I.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:te}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],o=i.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&r.push(n.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&r.push(n.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(r)}}class Yo{constructor(e){this.parser=e,this.name=I.KHR_MATERIALS_SHEEN}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:te}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[];t.sheenColor=new xe(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=i.extensions[this.name];if(o.sheenColorFactor!==void 0){const l=o.sheenColorFactor;t.sheenColor.setRGB(l[0],l[1],l[2],ce)}return o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&r.push(n.assignTexture(t,"sheenColorMap",o.sheenColorTexture,Ve)),o.sheenRoughnessTexture!==void 0&&r.push(n.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(r)}}class $o{constructor(e){this.parser=e,this.name=I.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:te}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],o=i.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&r.push(n.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(r)}}class Qo{constructor(e){this.parser=e,this.name=I.KHR_MATERIALS_VOLUME}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:te}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],o=i.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&r.push(n.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const l=o.attenuationColor||[1,1,1];return t.attenuationColor=new xe().setRGB(l[0],l[1],l[2],ce),Promise.all(r)}}class Zo{constructor(e){this.parser=e,this.name=I.KHR_MATERIALS_IOR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:te}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=i.extensions[this.name];return t.ior=r.ior!==void 0?r.ior:1.5,Promise.resolve()}}class Jo{constructor(e){this.parser=e,this.name=I.KHR_MATERIALS_SPECULAR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:te}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],o=i.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&r.push(n.assignTexture(t,"specularIntensityMap",o.specularTexture));const l=o.specularColorFactor||[1,1,1];return t.specularColor=new xe().setRGB(l[0],l[1],l[2],ce),o.specularColorTexture!==void 0&&r.push(n.assignTexture(t,"specularColorMap",o.specularColorTexture,Ve)),Promise.all(r)}}class ea{constructor(e){this.parser=e,this.name=I.EXT_MATERIALS_BUMP}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:te}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],o=i.extensions[this.name];return t.bumpScale=o.bumpFactor!==void 0?o.bumpFactor:1,o.bumpTexture!==void 0&&r.push(n.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(r)}}class ta{constructor(e){this.parser=e,this.name=I.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:te}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],o=i.extensions[this.name];return o.anisotropyStrength!==void 0&&(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&r.push(n.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(r)}}class na{constructor(e){this.parser=e,this.name=I.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,i=n.textures[e];if(!i.extensions||!i.extensions[this.name])return null;const r=i.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,r.source,o)}}class ia{constructor(e){this.parser=e,this.name=I.EXT_TEXTURE_WEBP}loadTexture(e){const t=this.name,n=this.parser,i=n.json,r=i.textures[e];if(!r.extensions||!r.extensions[t])return null;const o=r.extensions[t],l=i.images[o.source];let a=n.textureLoader;if(l.uri){const c=n.options.manager.getHandler(l.uri);c!==null&&(a=c)}return n.loadTextureImage(e,o.source,a)}}class ra{constructor(e){this.parser=e,this.name=I.EXT_TEXTURE_AVIF}loadTexture(e){const t=this.name,n=this.parser,i=n.json,r=i.textures[e];if(!r.extensions||!r.extensions[t])return null;const o=r.extensions[t],l=i.images[o.source];let a=n.textureLoader;if(l.uri){const c=n.options.manager.getHandler(l.uri);c!==null&&(a=c)}return n.loadTextureImage(e,o.source,a)}}class sa{constructor(e){this.name=I.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const i=n.extensions[this.name],r=this.parser.getDependency("buffer",i.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return r.then(function(l){const a=i.byteOffset||0,c=i.byteLength||0,h=i.count,u=i.byteStride,f=new Uint8Array(l,a,c);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(h,u,f,i.mode,i.filter).then(function(d){return d.buffer}):o.ready.then(function(){const d=new ArrayBuffer(h*u);return o.decodeGltfBuffer(new Uint8Array(d),h,u,f,i.mode,i.filter),d})})}else return null}}class oa{constructor(e){this.name=I.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,n=t.nodes[e];if(!n.extensions||!n.extensions[this.name]||n.mesh===void 0)return null;const i=t.meshes[n.mesh];for(const c of i.primitives)if(c.mode!==q.TRIANGLES&&c.mode!==q.TRIANGLE_STRIP&&c.mode!==q.TRIANGLE_FAN&&c.mode!==void 0)return null;const o=n.extensions[this.name].attributes,l=[],a={};for(const c in o)l.push(this.parser.getDependency("accessor",o[c]).then(h=>(a[c]=h,a[c])));return l.length<1?null:(l.push(this.parser.createNodeMesh(e)),Promise.all(l).then(c=>{const h=c.pop(),u=h.isGroup?h.children:[h],f=c[0].count,d=[];for(const m of u){const g=new Ct,v=new De,y=new Si,w=new De(1,1,1),T=new xr(m.geometry,m.material,f);for(let x=0;x<f;x++)a.TRANSLATION&&v.fromBufferAttribute(a.TRANSLATION,x),a.ROTATION&&y.fromBufferAttribute(a.ROTATION,x),a.SCALE&&w.fromBufferAttribute(a.SCALE,x),T.setMatrixAt(x,g.compose(v,y,w));for(const x in a)if(x==="_COLOR_0"){const b=a[x];T.instanceColor=new Sr(b.array,b.itemSize,b.normalized)}else x!=="TRANSLATION"&&x!=="ROTATION"&&x!=="SCALE"&&m.geometry.setAttribute(x,a[x]);Ei.prototype.copy.call(T,m),this.parser.assignFinalMaterial(T),d.push(T)}return h.isGroup?(h.clear(),h.add(...d),h):d[0]}))}}const cr="glTF",$e=12,ai={JSON:1313821514,BIN:5130562};class aa{constructor(e){this.name=I.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,$e),n=new TextDecoder;if(this.header={magic:n.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==cr)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-$e,r=new DataView(e,$e);let o=0;for(;o<i;){const l=r.getUint32(o,!0);o+=4;const a=r.getUint32(o,!0);if(o+=4,a===ai.JSON){const c=new Uint8Array(e,$e+o,l);this.content=n.decode(c)}else if(a===ai.BIN){const c=$e+o;this.body=e.slice(c,c+l)}o+=l}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class la{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=I.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,i=this.dracoLoader,r=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,l={},a={},c={};for(const h in o){const u=Sn[h]||h.toLowerCase();l[u]=o[h]}for(const h in e.attributes){const u=Sn[h]||h.toLowerCase();if(o[h]!==void 0){const f=n.accessors[e.attributes[h]],d=ze[f.componentType];c[u]=d.name,a[u]=f.normalized===!0}}return t.getDependency("bufferView",r).then(function(h){return new Promise(function(u,f){i.decodeDracoFile(h,function(d){for(const m in d.attributes){const g=d.attributes[m],v=a[m];v!==void 0&&(g.normalized=v)}u(d)},l,c,ce,f)})})}}class ca{constructor(){this.name=I.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class ua{constructor(){this.name=I.KHR_MESH_QUANTIZATION}}class ur extends Xr{constructor(e,t,n,i){super(e,t,n,i)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=e*i*3+i;for(let o=0;o!==i;o++)t[o]=n[r+o];return t}interpolate_(e,t,n,i){const r=this.resultBuffer,o=this.sampleValues,l=this.valueSize,a=l*2,c=l*3,h=i-t,u=(n-t)/h,f=u*u,d=f*u,m=e*c,g=m-c,v=-2*d+3*f,y=d-f,w=1-v,T=y-f+u;for(let x=0;x!==l;x++){const b=o[g+x+l],E=o[g+x+a]*h,_=o[m+x+l],M=o[m+x]*h;r[x]=w*b+T*E+v*_+y*M}return r}}const ha=new Si;class fa extends ur{interpolate_(e,t,n,i){const r=super.interpolate_(e,t,n,i);return ha.fromArray(r).normalize().toArray(r),r}}const q={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},ze={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},li={9728:_i,9729:Pe,9984:Mr,9985:Rr,9986:_r,9987:bi},ci={33071:ct,33648:Ar,10497:an},en={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Sn={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},fe={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},da={CUBICSPLINE:void 0,LINEAR:Ai,STEP:Gr},tn={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function pa(s){return s.DefaultMaterial===void 0&&(s.DefaultMaterial=new Ri({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Vr})),s.DefaultMaterial}function Se(s,e,t){for(const n in t.extensions)s[n]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[n]=t.extensions[n])}function Q(s,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(s.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function ma(s,e,t){let n=!1,i=!1,r=!1;for(let c=0,h=e.length;c<h;c++){const u=e[c];if(u.POSITION!==void 0&&(n=!0),u.NORMAL!==void 0&&(i=!0),u.COLOR_0!==void 0&&(r=!0),n&&i&&r)break}if(!n&&!i&&!r)return Promise.resolve(s);const o=[],l=[],a=[];for(let c=0,h=e.length;c<h;c++){const u=e[c];if(n){const f=u.POSITION!==void 0?t.getDependency("accessor",u.POSITION):s.attributes.position;o.push(f)}if(i){const f=u.NORMAL!==void 0?t.getDependency("accessor",u.NORMAL):s.attributes.normal;l.push(f)}if(r){const f=u.COLOR_0!==void 0?t.getDependency("accessor",u.COLOR_0):s.attributes.color;a.push(f)}}return Promise.all([Promise.all(o),Promise.all(l),Promise.all(a)]).then(function(c){const h=c[0],u=c[1],f=c[2];return n&&(s.morphAttributes.position=h),i&&(s.morphAttributes.normal=u),r&&(s.morphAttributes.color=f),s.morphTargetsRelative=!0,s})}function ga(s,e){if(s.updateMorphTargets(),e.weights!==void 0)for(let t=0,n=e.weights.length;t<n;t++)s.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(s.morphTargetInfluences.length===t.length){s.morphTargetDictionary={};for(let n=0,i=t.length;n<i;n++)s.morphTargetDictionary[t[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function va(s){let e;const t=s.extensions&&s.extensions[I.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+nn(t.attributes):e=s.indices+":"+nn(s.attributes)+":"+s.mode,s.targets!==void 0)for(let n=0,i=s.targets.length;n<i;n++)e+=":"+nn(s.targets[n]);return e}function nn(s){let e="";const t=Object.keys(s).sort();for(let n=0,i=t.length;n<i;n++)e+=t[n]+":"+s[t[n]]+";";return e}function En(s){switch(s){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function ya(s){return s.search(/\.jpe?g($|\?)/i)>0||s.search(/^data\:image\/jpeg/)===0?"image/jpeg":s.search(/\.webp($|\?)/i)>0||s.search(/^data\:image\/webp/)===0?"image/webp":s.search(/\.ktx2($|\?)/i)>0||s.search(/^data\:image\/ktx2/)===0?"image/ktx2":"image/png"}const wa=new Ct;class Ta{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new Go,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,i=-1,r=!1,o=-1;if(typeof navigator<"u"){const l=navigator.userAgent;n=/^((?!chrome|android).)*safari/i.test(l)===!0;const a=l.match(/Version\/(\d+)/);i=n&&a?parseInt(a[1],10):-1,r=l.indexOf("Firefox")>-1,o=r?l.match(/Firefox\/([0-9]+)\./)[1]:-1}typeof createImageBitmap>"u"||n&&i<17||r&&o<98?this.textureLoader=new Mn(this.options.manager):this.textureLoader=new Er(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Ti(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,i=this.json,r=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(o){const l={scene:o[0][i.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:i.asset,parser:n,userData:{}};return Se(r,l,i),Q(l,i),Promise.all(n._invokeAll(function(a){return a.afterRoot&&a.afterRoot(l)})).then(function(){for(const a of l.scenes)a.updateMatrixWorld();e(l)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let i=0,r=t.length;i<r;i++){const o=t[i].joints;for(let l=0,a=o.length;l<a;l++)e[o[l]].isBone=!0}for(let i=0,r=e.length;i<r;i++){const o=e[i];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(n[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const i=n.clone(),r=(o,l)=>{const a=this.associations.get(o);a!=null&&this.associations.set(l,a);for(const[c,h]of o.children.entries())r(h,l.children[c])};return r(n,i),i.name+="_instance_"+e.uses[t]++,i}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const i=e(t[n]);if(i)return i}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let i=0;i<t.length;i++){const r=e(t[i]);r&&n.push(r)}return n}getDependency(e,t){const n=e+":"+t;let i=this.cache.get(n);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this._invokeOne(function(r){return r.loadNode&&r.loadNode(t)});break;case"mesh":i=this._invokeOne(function(r){return r.loadMesh&&r.loadMesh(t)});break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this._invokeOne(function(r){return r.loadBufferView&&r.loadBufferView(t)});break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this._invokeOne(function(r){return r.loadMaterial&&r.loadMaterial(t)});break;case"texture":i=this._invokeOne(function(r){return r.loadTexture&&r.loadTexture(t)});break;case"skin":i=this.loadSkin(t);break;case"animation":i=this._invokeOne(function(r){return r.loadAnimation&&r.loadAnimation(t)});break;case"camera":i=this.loadCamera(t);break;default:if(i=this._invokeOne(function(r){return r!=this&&r.getDependency&&r.getDependency(e,t)}),!i)throw new Error("Unknown type: "+e);break}this.cache.add(n,i)}return i}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,i=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(i.map(function(r,o){return n.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[I.KHR_BINARY_GLTF].body);const i=this.options;return new Promise(function(r,o){n.load(it.resolveURL(t.uri,i.path),r,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(n){const i=t.byteLength||0,r=t.byteOffset||0;return n.slice(r,r+i)})}loadAccessor(e){const t=this,n=this.json,i=this.json.accessors[e];if(i.bufferView===void 0&&i.sparse===void 0){const o=en[i.type],l=ze[i.componentType],a=i.normalized===!0,c=new l(i.count*o);return Promise.resolve(new Kt(c,o,a))}const r=[];return i.bufferView!==void 0?r.push(this.getDependency("bufferView",i.bufferView)):r.push(null),i.sparse!==void 0&&(r.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),r.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(r).then(function(o){const l=o[0],a=en[i.type],c=ze[i.componentType],h=c.BYTES_PER_ELEMENT,u=h*a,f=i.byteOffset||0,d=i.bufferView!==void 0?n.bufferViews[i.bufferView].byteStride:void 0,m=i.normalized===!0;let g,v;if(d&&d!==u){const y=Math.floor(f/d),w="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+y+":"+i.count;let T=t.cache.get(w);T||(g=new c(l,y*d,i.count*d/h),T=new br(g,d/h),t.cache.add(w,T)),v=new zr(T,a,f%d/h,m)}else l===null?g=new c(i.count*a):g=new c(l,f,i.count*a),v=new Kt(g,a,m);if(i.sparse!==void 0){const y=en.SCALAR,w=ze[i.sparse.indices.componentType],T=i.sparse.indices.byteOffset||0,x=i.sparse.values.byteOffset||0,b=new w(o[1],T,i.sparse.count*y),E=new c(o[2],x,i.sparse.count*a);l!==null&&(v=new Kt(v.array.slice(),v.itemSize,v.normalized)),v.normalized=!1;for(let _=0,M=b.length;_<M;_++){const R=b[_];if(v.setX(R,E[_*a]),a>=2&&v.setY(R,E[_*a+1]),a>=3&&v.setZ(R,E[_*a+2]),a>=4&&v.setW(R,E[_*a+3]),a>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}v.normalized=m}return v})}loadTexture(e){const t=this.json,n=this.options,r=t.textures[e].source,o=t.images[r];let l=this.textureLoader;if(o.uri){const a=n.manager.getHandler(o.uri);a!==null&&(l=a)}return this.loadTextureImage(e,r,l)}loadTextureImage(e,t,n){const i=this,r=this.json,o=r.textures[e],l=r.images[t],a=(l.uri||l.bufferView)+":"+o.sampler;if(this.textureCache[a])return this.textureCache[a];const c=this.loadImageSource(t,n).then(function(h){h.flipY=!1,h.name=o.name||l.name||"",h.name===""&&typeof l.uri=="string"&&l.uri.startsWith("data:image/")===!1&&(h.name=l.uri);const f=(r.samplers||{})[o.sampler]||{};return h.magFilter=li[f.magFilter]||Pe,h.minFilter=li[f.minFilter]||bi,h.wrapS=ci[f.wrapS]||an,h.wrapT=ci[f.wrapT]||an,h.generateMipmaps=!h.isCompressedTexture&&h.minFilter!==_i&&h.minFilter!==Pe,i.associations.set(h,{textures:e}),h}).catch(function(){return null});return this.textureCache[a]=c,c}loadImageSource(e,t){const n=this,i=this.json,r=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(u=>u.clone());const o=i.images[e],l=self.URL||self.webkitURL;let a=o.uri||"",c=!1;if(o.bufferView!==void 0)a=n.getDependency("bufferView",o.bufferView).then(function(u){c=!0;const f=new Blob([u],{type:o.mimeType});return a=l.createObjectURL(f),a});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const h=Promise.resolve(a).then(function(u){return new Promise(function(f,d){let m=f;t.isImageBitmapLoader===!0&&(m=function(g){const v=new Fn(g);v.needsUpdate=!0,f(v)}),t.load(it.resolveURL(u,r.path),m,void 0,d)})}).then(function(u){return c===!0&&l.revokeObjectURL(a),Q(u,o),u.userData.mimeType=o.mimeType||ya(o.uri),u}).catch(function(u){throw console.error("THREE.GLTFLoader: Couldn't load texture",a),u});return this.sourceCache[e]=h,h}assignTexture(e,t,n,i){const r=this;return this.getDependency("texture",n.index).then(function(o){if(!o)return null;if(n.texCoord!==void 0&&n.texCoord>0&&(o=o.clone(),o.channel=n.texCoord),r.extensions[I.KHR_TEXTURE_TRANSFORM]){const l=n.extensions!==void 0?n.extensions[I.KHR_TEXTURE_TRANSFORM]:void 0;if(l){const a=r.associations.get(o);o=r.extensions[I.KHR_TEXTURE_TRANSFORM].extendTexture(o,l),r.associations.set(o,a)}}return i!==void 0&&(o.colorSpace=i),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const i=t.attributes.tangent===void 0,r=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const l="PointsMaterial:"+n.uuid;let a=this.cache.get(l);a||(a=new Lr,Yt.prototype.copy.call(a,n),a.color.copy(n.color),a.map=n.map,a.sizeAttenuation=!1,this.cache.add(l,a)),n=a}else if(e.isLine){const l="LineBasicMaterial:"+n.uuid;let a=this.cache.get(l);a||(a=new Ir,Yt.prototype.copy.call(a,n),a.color.copy(n.color),a.map=n.map,this.cache.add(l,a)),n=a}if(i||r||o){let l="ClonedMaterial:"+n.uuid+":";i&&(l+="derivative-tangents:"),r&&(l+="vertex-colors:"),o&&(l+="flat-shading:");let a=this.cache.get(l);a||(a=n.clone(),r&&(a.vertexColors=!0),o&&(a.flatShading=!0),i&&(a.normalScale&&(a.normalScale.y*=-1),a.clearcoatNormalScale&&(a.clearcoatNormalScale.y*=-1)),this.cache.add(l,a),this.associations.set(a,this.associations.get(n))),n=a}e.material=n}getMaterialType(){return Ri}loadMaterial(e){const t=this,n=this.json,i=this.extensions,r=n.materials[e];let o;const l={},a=r.extensions||{},c=[];if(a[I.KHR_MATERIALS_UNLIT]){const u=i[I.KHR_MATERIALS_UNLIT];o=u.getMaterialType(),c.push(u.extendParams(l,r,t))}else{const u=r.pbrMetallicRoughness||{};if(l.color=new xe(1,1,1),l.opacity=1,Array.isArray(u.baseColorFactor)){const f=u.baseColorFactor;l.color.setRGB(f[0],f[1],f[2],ce),l.opacity=f[3]}u.baseColorTexture!==void 0&&c.push(t.assignTexture(l,"map",u.baseColorTexture,Ve)),l.metalness=u.metallicFactor!==void 0?u.metallicFactor:1,l.roughness=u.roughnessFactor!==void 0?u.roughnessFactor:1,u.metallicRoughnessTexture!==void 0&&(c.push(t.assignTexture(l,"metalnessMap",u.metallicRoughnessTexture)),c.push(t.assignTexture(l,"roughnessMap",u.metallicRoughnessTexture))),o=this._invokeOne(function(f){return f.getMaterialType&&f.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(f){return f.extendMaterialParams&&f.extendMaterialParams(e,l)})))}r.doubleSided===!0&&(l.side=Pr);const h=r.alphaMode||tn.OPAQUE;if(h===tn.BLEND?(l.transparent=!0,l.depthWrite=!1):(l.transparent=!1,h===tn.MASK&&(l.alphaTest=r.alphaCutoff!==void 0?r.alphaCutoff:.5)),r.normalTexture!==void 0&&o!==Qe&&(c.push(t.assignTexture(l,"normalMap",r.normalTexture)),l.normalScale=new Te(1,1),r.normalTexture.scale!==void 0)){const u=r.normalTexture.scale;l.normalScale.set(u,u)}if(r.occlusionTexture!==void 0&&o!==Qe&&(c.push(t.assignTexture(l,"aoMap",r.occlusionTexture)),r.occlusionTexture.strength!==void 0&&(l.aoMapIntensity=r.occlusionTexture.strength)),r.emissiveFactor!==void 0&&o!==Qe){const u=r.emissiveFactor;l.emissive=new xe().setRGB(u[0],u[1],u[2],ce)}return r.emissiveTexture!==void 0&&o!==Qe&&c.push(t.assignTexture(l,"emissiveMap",r.emissiveTexture,Ve)),Promise.all(c).then(function(){const u=new o(l);return r.name&&(u.name=r.name),Q(u,r),t.associations.set(u,{materials:e}),r.extensions&&Se(i,u,r),u})}createUniqueName(e){const t=Cr.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,n=this.extensions,i=this.primitiveCache;function r(l){return n[I.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(l,t).then(function(a){return ui(a,l,t)})}const o=[];for(let l=0,a=e.length;l<a;l++){const c=e[l],h=va(c),u=i[h];if(u)o.push(u.promise);else{let f;c.extensions&&c.extensions[I.KHR_DRACO_MESH_COMPRESSION]?f=r(c):f=ui(new Mi,c,t),i[h]={primitive:c,promise:f},o.push(f)}}return Promise.all(o)}loadMesh(e){const t=this,n=this.json,i=this.extensions,r=n.meshes[e],o=r.primitives,l=[];for(let a=0,c=o.length;a<c;a++){const h=o[a].material===void 0?pa(this.cache):this.getDependency("material",o[a].material);l.push(h)}return l.push(t.loadGeometries(o)),Promise.all(l).then(function(a){const c=a.slice(0,a.length-1),h=a[a.length-1],u=[];for(let d=0,m=h.length;d<m;d++){const g=h[d],v=o[d];let y;const w=c[d];if(v.mode===q.TRIANGLES||v.mode===q.TRIANGLE_STRIP||v.mode===q.TRIANGLE_FAN||v.mode===void 0)y=r.isSkinnedMesh===!0?new Nr(g,w):new zt(g,w),y.isSkinnedMesh===!0&&y.normalizeSkinWeights(),v.mode===q.TRIANGLE_STRIP?y.geometry=oi(y.geometry,wi):v.mode===q.TRIANGLE_FAN&&(y.geometry=oi(y.geometry,on));else if(v.mode===q.LINES)y=new Or(g,w);else if(v.mode===q.LINE_STRIP)y=new Dr(g,w);else if(v.mode===q.LINE_LOOP)y=new Fr(g,w);else if(v.mode===q.POINTS)y=new kr(g,w);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+v.mode);Object.keys(y.geometry.morphAttributes).length>0&&ga(y,r),y.name=t.createUniqueName(r.name||"mesh_"+e),Q(y,r),v.extensions&&Se(i,y,v),t.assignFinalMaterial(y),u.push(y)}for(let d=0,m=u.length;d<m;d++)t.associations.set(u[d],{meshes:e,primitives:d});if(u.length===1)return r.extensions&&Se(i,u[0],r),u[0];const f=new Be;r.extensions&&Se(i,f,r),t.associations.set(f,{meshes:e});for(let d=0,m=u.length;d<m;d++)f.add(u[d]);return f})}loadCamera(e){let t;const n=this.json.cameras[e],i=n[n.type];if(!i){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return n.type==="perspective"?t=new _n(Ur.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):n.type==="orthographic"&&(t=new Ln(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),Q(t,n),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],n=[];for(let i=0,r=t.joints.length;i<r;i++)n.push(this._loadNodeShallow(t.joints[i]));return t.inverseBindMatrices!==void 0?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then(function(i){const r=i.pop(),o=i,l=[],a=[];for(let c=0,h=o.length;c<h;c++){const u=o[c];if(u){l.push(u);const f=new Ct;r!==null&&f.fromArray(r.array,c*16),a.push(f)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[c])}return new Hr(l,a)})}loadAnimation(e){const t=this.json,n=this,i=t.animations[e],r=i.name?i.name:"animation_"+e,o=[],l=[],a=[],c=[],h=[];for(let u=0,f=i.channels.length;u<f;u++){const d=i.channels[u],m=i.samplers[d.sampler],g=d.target,v=g.node,y=i.parameters!==void 0?i.parameters[m.input]:m.input,w=i.parameters!==void 0?i.parameters[m.output]:m.output;g.node!==void 0&&(o.push(this.getDependency("node",v)),l.push(this.getDependency("accessor",y)),a.push(this.getDependency("accessor",w)),c.push(m),h.push(g))}return Promise.all([Promise.all(o),Promise.all(l),Promise.all(a),Promise.all(c),Promise.all(h)]).then(function(u){const f=u[0],d=u[1],m=u[2],g=u[3],v=u[4],y=[];for(let T=0,x=f.length;T<x;T++){const b=f[T],E=d[T],_=m[T],M=g[T],R=v[T];if(b===void 0)continue;b.updateMatrix&&b.updateMatrix();const S=n._createAnimationTracks(b,E,_,M,R);if(S)for(let C=0;C<S.length;C++)y.push(S[C])}const w=new Br(r,void 0,y);return Q(w,i),w})}createNodeMesh(e){const t=this.json,n=this,i=t.nodes[e];return i.mesh===void 0?null:n.getDependency("mesh",i.mesh).then(function(r){const o=n._getNodeRef(n.meshCache,i.mesh,r);return i.weights!==void 0&&o.traverse(function(l){if(l.isMesh)for(let a=0,c=i.weights.length;a<c;a++)l.morphTargetInfluences[a]=i.weights[a]}),o})}loadNode(e){const t=this.json,n=this,i=t.nodes[e],r=n._loadNodeShallow(e),o=[],l=i.children||[];for(let c=0,h=l.length;c<h;c++)o.push(n.getDependency("node",l[c]));const a=i.skin===void 0?Promise.resolve(null):n.getDependency("skin",i.skin);return Promise.all([r,Promise.all(o),a]).then(function(c){const h=c[0],u=c[1],f=c[2];f!==null&&h.traverse(function(d){d.isSkinnedMesh&&d.bind(f,wa)});for(let d=0,m=u.length;d<m;d++)h.add(u[d]);return h})}_loadNodeShallow(e){const t=this.json,n=this.extensions,i=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const r=t.nodes[e],o=r.name?i.createUniqueName(r.name):"",l=[],a=i._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return a&&l.push(a),r.camera!==void 0&&l.push(i.getDependency("camera",r.camera).then(function(c){return i._getNodeRef(i.cameraCache,r.camera,c)})),i._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){l.push(c)}),this.nodeCache[e]=Promise.all(l).then(function(c){let h;if(r.isBone===!0?h=new jr:c.length>1?h=new Be:c.length===1?h=c[0]:h=new Ei,h!==c[0])for(let u=0,f=c.length;u<f;u++)h.add(c[u]);if(r.name&&(h.userData.name=r.name,h.name=o),Q(h,r),r.extensions&&Se(n,h,r),r.matrix!==void 0){const u=new Ct;u.fromArray(r.matrix),h.applyMatrix4(u)}else r.translation!==void 0&&h.position.fromArray(r.translation),r.rotation!==void 0&&h.quaternion.fromArray(r.rotation),r.scale!==void 0&&h.scale.fromArray(r.scale);if(!i.associations.has(h))i.associations.set(h,{});else if(r.mesh!==void 0&&i.meshCache.refs[r.mesh]>1){const u=i.associations.get(h);i.associations.set(h,{...u})}return i.associations.get(h).nodes=e,h}),this.nodeCache[e]}loadScene(e){const t=this.extensions,n=this.json.scenes[e],i=this,r=new Be;n.name&&(r.name=i.createUniqueName(n.name)),Q(r,n),n.extensions&&Se(t,r,n);const o=n.nodes||[],l=[];for(let a=0,c=o.length;a<c;a++)l.push(i.getDependency("node",o[a]));return Promise.all(l).then(function(a){for(let h=0,u=a.length;h<u;h++)r.add(a[h]);const c=h=>{const u=new Map;for(const[f,d]of i.associations)(f instanceof Yt||f instanceof Fn)&&u.set(f,d);return h.traverse(f=>{const d=i.associations.get(f);d!=null&&u.set(f,d)}),u};return i.associations=c(r),r})}_createAnimationTracks(e,t,n,i,r){const o=[],l=e.name?e.name:e.uuid,a=[];fe[r.path]===fe.weights?e.traverse(function(f){f.morphTargetInfluences&&a.push(f.name?f.name:f.uuid)}):a.push(l);let c;switch(fe[r.path]){case fe.weights:c=Un;break;case fe.rotation:c=Hn;break;case fe.translation:case fe.scale:c=kn;break;default:n.itemSize===1?c=Un:c=kn;break}const h=i.interpolation!==void 0?da[i.interpolation]:Ai,u=this._getArrayFromAccessor(n);for(let f=0,d=a.length;f<d;f++){const m=new c(a[f]+"."+fe[r.path],t.array,u,h);i.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(m),o.push(m)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const n=En(t.constructor),i=new Float32Array(t.length);for(let r=0,o=t.length;r<o;r++)i[r]=t[r]*n;t=i}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(n){const i=this instanceof Hn?fa:ur;return new i(this.times,this.values,this.getValueSize()/3,n)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function xa(s,e,t){const n=e.attributes,i=new qr;if(n.POSITION!==void 0){const l=t.json.accessors[n.POSITION],a=l.min,c=l.max;if(a!==void 0&&c!==void 0){if(i.set(new De(a[0],a[1],a[2]),new De(c[0],c[1],c[2])),l.normalized){const h=En(ze[l.componentType]);i.min.multiplyScalar(h),i.max.multiplyScalar(h)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const r=e.targets;if(r!==void 0){const l=new De,a=new De;for(let c=0,h=r.length;c<h;c++){const u=r[c];if(u.POSITION!==void 0){const f=t.json.accessors[u.POSITION],d=f.min,m=f.max;if(d!==void 0&&m!==void 0){if(a.setX(Math.max(Math.abs(d[0]),Math.abs(m[0]))),a.setY(Math.max(Math.abs(d[1]),Math.abs(m[1]))),a.setZ(Math.max(Math.abs(d[2]),Math.abs(m[2]))),f.normalized){const g=En(ze[f.componentType]);a.multiplyScalar(g)}l.max(a)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(l)}s.boundingBox=i;const o=new Wr;i.getCenter(o.center),o.radius=i.min.distanceTo(i.max)/2,s.boundingSphere=o}function ui(s,e,t){const n=e.attributes,i=[];function r(o,l){return t.getDependency("accessor",o).then(function(a){s.setAttribute(l,a)})}for(const o in n){const l=Sn[o]||o.toLowerCase();l in s.attributes||i.push(r(n[o],l))}if(e.indices!==void 0&&!s.index){const o=t.getDependency("accessor",e.indices).then(function(l){s.setIndex(l)});i.push(o)}return ln.workingColorSpace!==ce&&"COLOR_0"in n&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${ln.workingColorSpace}" not supported.`),Q(s,e),xa(s,e,t),Promise.all(i).then(function(){return e.targets!==void 0?ma(s,e.targets,t):s})}const Sa={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = opacity * texel;


		}`};class mt{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const Ea=new Ln(-1,1,1,-1,0,1);class ba extends Mi{constructor(){super(),this.setAttribute("position",new Bn([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new Bn([0,2,0,0,2,0],2))}}const _a=new ba;class hr{constructor(e){this._mesh=new zt(_a,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,Ea)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class Ra extends mt{constructor(e,t="tDiffuse"){super(),this.textureID=t,this.uniforms=null,this.material=null,e instanceof Pt?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=Li.clone(e.uniforms),this.material=new Pt({name:e.name!==void 0?e.name:"unspecified",defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this._fsQuad=new hr(this.material)}render(e,t,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this._fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this._fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this._fsQuad.render(e))}dispose(){this.material.dispose(),this._fsQuad.dispose()}}class hi extends mt{constructor(e,t){super(),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,t,n){const i=e.getContext(),r=e.state;r.buffers.color.setMask(!1),r.buffers.depth.setMask(!1),r.buffers.color.setLocked(!0),r.buffers.depth.setLocked(!0);let o,l;this.inverse?(o=0,l=1):(o=1,l=0),r.buffers.stencil.setTest(!0),r.buffers.stencil.setOp(i.REPLACE,i.REPLACE,i.REPLACE),r.buffers.stencil.setFunc(i.ALWAYS,o,4294967295),r.buffers.stencil.setClear(l),r.buffers.stencil.setLocked(!0),e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),r.buffers.color.setLocked(!1),r.buffers.depth.setLocked(!1),r.buffers.color.setMask(!0),r.buffers.depth.setMask(!0),r.buffers.stencil.setLocked(!1),r.buffers.stencil.setFunc(i.EQUAL,1,4294967295),r.buffers.stencil.setOp(i.KEEP,i.KEEP,i.KEEP),r.buffers.stencil.setLocked(!0)}}class Ma extends mt{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class Aa{constructor(e,t){if(this.renderer=e,this._pixelRatio=e.getPixelRatio(),t===void 0){const n=e.getSize(new Te);this._width=n.width,this._height=n.height,t=new Kr(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:Yr}),t.texture.name="EffectComposer.rt1"}else this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new Ra(Sa),this.copyPass.material.blending=$r,this.clock=new Qr}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const t=this.passes.indexOf(e);t!==-1&&this.passes.splice(t,1)}isLastEnabledPass(e){for(let t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());const t=this.renderer.getRenderTarget();let n=!1;for(let i=0,r=this.passes.length;i<r;i++){const o=this.passes[i];if(o.enabled!==!1){if(o.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(i),o.render(this.renderer,this.writeBuffer,this.readBuffer,e,n),o.needsSwap){if(n){const l=this.renderer.getContext(),a=this.renderer.state.buffers.stencil;a.setFunc(l.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),a.setFunc(l.EQUAL,1,4294967295)}this.swapBuffers()}hi!==void 0&&(o instanceof hi?n=!0:o instanceof Ma&&(n=!1))}}this.renderer.setRenderTarget(t)}reset(e){if(e===void 0){const t=this.renderer.getSize(new Te);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,t){this._width=e,this._height=t;const n=this._width*this._pixelRatio,i=this._height*this._pixelRatio;this.renderTarget1.setSize(n,i),this.renderTarget2.setSize(n,i);for(let r=0;r<this.passes.length;r++)this.passes[r].setSize(n,i)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class La extends mt{constructor(e,t,n=null,i=null,r=null){super(),this.scene=e,this.camera=t,this.overrideMaterial=n,this.clearColor=i,this.clearAlpha=r,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new xe}render(e,t,n){const i=e.autoClear;e.autoClear=!1;let r,o;this.overrideMaterial!==null&&(o=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor!==null&&(e.getClearColor(this._oldClearColor),e.setClearColor(this.clearColor,e.getClearAlpha())),this.clearAlpha!==null&&(r=e.getClearAlpha(),e.setClearAlpha(this.clearAlpha)),this.clearDepth==!0&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:n),this.clear===!0&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor!==null&&e.setClearColor(this._oldClearColor),this.clearAlpha!==null&&e.setClearAlpha(r),this.overrideMaterial!==null&&(this.scene.overrideMaterial=o),e.autoClear=i}}const St={name:"OutputShader",uniforms:{tDiffuse:{value:null},toneMappingExposure:{value:1}},vertexShader:`
		precision highp float;

		uniform mat4 modelViewMatrix;
		uniform mat4 projectionMatrix;

		attribute vec3 position;
		attribute vec2 uv;

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		precision highp float;

		uniform sampler2D tDiffuse;

		#include <tonemapping_pars_fragment>
		#include <colorspace_pars_fragment>

		varying vec2 vUv;

		void main() {

			gl_FragColor = texture2D( tDiffuse, vUv );

			// tone mapping

			#ifdef LINEAR_TONE_MAPPING

				gl_FragColor.rgb = LinearToneMapping( gl_FragColor.rgb );

			#elif defined( REINHARD_TONE_MAPPING )

				gl_FragColor.rgb = ReinhardToneMapping( gl_FragColor.rgb );

			#elif defined( CINEON_TONE_MAPPING )

				gl_FragColor.rgb = CineonToneMapping( gl_FragColor.rgb );

			#elif defined( ACES_FILMIC_TONE_MAPPING )

				gl_FragColor.rgb = ACESFilmicToneMapping( gl_FragColor.rgb );

			#elif defined( AGX_TONE_MAPPING )

				gl_FragColor.rgb = AgXToneMapping( gl_FragColor.rgb );

			#elif defined( NEUTRAL_TONE_MAPPING )

				gl_FragColor.rgb = NeutralToneMapping( gl_FragColor.rgb );

			#elif defined( CUSTOM_TONE_MAPPING )

				gl_FragColor.rgb = CustomToneMapping( gl_FragColor.rgb );

			#endif

			// color space

			#ifdef SRGB_TRANSFER

				gl_FragColor = sRGBTransferOETF( gl_FragColor );

			#endif

		}`};class Ia extends mt{constructor(){super(),this.uniforms=Li.clone(St.uniforms),this.material=new Zr({name:St.name,uniforms:this.uniforms,vertexShader:St.vertexShader,fragmentShader:St.fragmentShader}),this._fsQuad=new hr(this.material),this._outputColorSpace=null,this._toneMapping=null}render(e,t,n){this.uniforms.tDiffuse.value=n.texture,this.uniforms.toneMappingExposure.value=e.toneMappingExposure,(this._outputColorSpace!==e.outputColorSpace||this._toneMapping!==e.toneMapping)&&(this._outputColorSpace=e.outputColorSpace,this._toneMapping=e.toneMapping,this.material.defines={},ln.getTransfer(this._outputColorSpace)===Jr&&(this.material.defines.SRGB_TRANSFER=""),this._toneMapping===es?this.material.defines.LINEAR_TONE_MAPPING="":this._toneMapping===ts?this.material.defines.REINHARD_TONE_MAPPING="":this._toneMapping===ns?this.material.defines.CINEON_TONE_MAPPING="":this._toneMapping===Ii?this.material.defines.ACES_FILMIC_TONE_MAPPING="":this._toneMapping===is?this.material.defines.AGX_TONE_MAPPING="":this._toneMapping===rs?this.material.defines.NEUTRAL_TONE_MAPPING="":this._toneMapping===ss&&(this.material.defines.CUSTOM_TONE_MAPPING=""),this.material.needsUpdate=!0),this.renderToScreen===!0?(e.setRenderTarget(null),this._fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this._fsQuad.render(e))}dispose(){this.material.dispose(),this._fsQuad.dispose()}}let B=null,oe=null,X=null,Ee=null,ot=null,at=null,It=null,be=null,Gt=!1;function Pa(){if(Gt)return;if(Gt=!0,Ee=new bn,X=new _n(100,window.innerWidth/window.innerHeight,.1,1e3),B=new Rn({antialias:!0,alpha:!0}),B.setSize(window.innerWidth,window.innerHeight),B.setPixelRatio(Math.min(window.devicePixelRatio||1,2)),B.toneMapping=Ii,B.toneMappingExposure=1,B.shadowMap.enabled=!0,B.shadowMap.type=os,be=document.querySelector("#background"),!be){be=document.createElement("div"),be.id="background";const u=document.body.firstChild;document.body.insertBefore(be,u)}be.appendChild(B.domElement);const s=new as(16777215,.5);Ee.add(s);const e=new xi(16777215,1);e.position.set(5,5,5),Ee.add(e),new jo().load("/home/scene.glb",u=>{Ee.add(u.scene)},void 0,u=>console.error("GLTF load error:",u)),ot=()=>{!X||!B||!oe||(X.aspect=window.innerWidth/window.innerHeight,X.updateProjectionMatrix(),B.setSize(window.innerWidth,window.innerHeight),oe.setSize(window.innerWidth,window.innerHeight))},window.addEventListener("resize",ot),oe=new Aa(B);const i=new La(Ee,X);oe.addPass(i);const r=new Ia;oe.addPass(r);let o={x:0,y:0},l={angle:Math.PI/2,y:0},a={angle:Math.PI/2,y:0};const c=Math.sqrt(50)/2.5;at=u=>{o.x=u.clientX/window.innerWidth*2-1,o.y=-(u.clientY/window.innerHeight)*2+1,l.angle=Math.PI/2-o.x*.1,l.y=o.y*.4},document.addEventListener("mousemove",at);const h=()=>{a.angle+=(l.angle-a.angle)*.025,a.y+=(l.y-a.y)*.025;const u=window.scrollY,d=Math.max(.5,c-u*.001);X.position.x=Math.cos(a.angle)*d,X.position.z=Math.sin(a.angle)*d,X.position.y+=a.y+1-X.position.y,X.lookAt(0,0,0),oe.render(),It=requestAnimationFrame(h)};return h(),{scene:Ee,camera:X,renderer:B}}function rn(){Gt&&(Gt=!1,It&&(cancelAnimationFrame(It),It=null),ot&&(window.removeEventListener("resize",ot),ot=null),at&&(document.removeEventListener("mousemove",at),at=null),oe&&(oe.dispose(),oe=null),B&&(B.dispose(),B.domElement&&B.domElement.parentNode&&B.domElement.parentNode.removeChild(B.domElement),B=null),Ee=null,X=null,be=null)}L.registerPlugin(lt);const Et={duration:.5,ease:"power2.inOut",stagger:.02},fi="50% 50% -10px",di=new WeakMap;function Ca(){document.querySelectorAll(".nav-wrap a, .bottom-nav-wrap a, .btn, .btn a").forEach(e=>{if(e.id==="time"||di.has(e))return;const t=(e.textContent||"").trim();if(!t)return;getComputedStyle(e).display==="inline"&&(e.style.display="inline-block");const i=e.classList.contains("btn"),r=i?{display:"inline-flex",alignItems:"center",justifyContent:"center"}:{};L.set(e,{position:"relative",overflow:"hidden",perspective:800,...r});const o=pi(t,!1,i),l=pi(t,!0,i);e.textContent="",e.appendChild(o),e.appendChild(l);const a=new lt(o,{type:"chars"}),c=new lt(l,{type:"chars"});i&&[a.chars,c.chars].forEach(d=>{d.forEach(m=>{(m.textContent===" "||m.textContent==="")&&L.set(m,{whiteSpace:"pre",display:"inline-block"})})}),L.set(a.chars,{rotationX:0,opacity:1,transformOrigin:fi,backfaceVisibility:"hidden"}),L.set(c.chars,{rotationX:-90,opacity:0,transformOrigin:fi,backfaceVisibility:"hidden"});let h=null;const u=()=>{h?.kill(),h=mi(a.chars,c.chars,!0)},f=()=>{h?.kill(),h=mi(a.chars,c.chars,!1)};e.addEventListener("mouseenter",u),e.addEventListener("mouseleave",f),di.set(e,{originalSplit:a,italicSplit:c,handleEnter:u,handleLeave:f})})}function pi(s,e,t){const n=document.createElement("span");return n.textContent=s,L.set(n,{display:t?"flex":"block",alignItems:t?"center":"initial",justifyContent:t?"center":"initial",whiteSpace:"nowrap",width:"100%",height:"100%",textAlign:"center",...e&&{position:"absolute",top:0,left:0,fontStyle:"normal",width:"100%"}}),n}function mi(s,e,t){const n=L.timeline();return t?n.to(s,{rotationX:90,opacity:0,...Et},0).to(e,{rotationX:0,opacity:1,...Et},0):n.to(s,{rotationX:0,opacity:1,...Et},0).to(e,{rotationX:-90,opacity:0,...Et},0),n}let nt=null;function gi(){if(nt||(nt=document.getElementById("time")),nt){const s=new Date,e=String(s.getHours()).padStart(2,"0"),t=String(s.getMinutes()).padStart(2,"0"),n=String(s.getSeconds()).padStart(2,"0");nt.textContent=`${e}:${t}:${n} IST`}}function Na(){nt=null,gi(),window.timeInterval&&clearInterval(window.timeInterval),window.timeInterval=setInterval(gi,1e3)}function sn(s){Na(),cs(),Ui(),Xs(),Ca();const e=s||document.querySelector('[data-barba="container"]')?.dataset.barbaNamespace;e==="work"?(Ze(),Lo(),rn(),Lt()):e==="archive"?(Ze(),st(),rn(),Bo()):e==="home"||e==="contact"?(st(),Lt(),Pa(),e==="home"?ki():Ze()):(Ze(),st(),Lt(),rn())}Fs.init({transitions:[{name:"home-contact-reverse",from:{namespace:["home","contact"]},to:{namespace:["home","contact"]},async leave(s){jn(),dn(),qn();const e=s?.current?.container;if(!e)return;const t=e.querySelectorAll(".text-reveal-header"),n=e.querySelector(".hero .hero-contain p"),i=e.querySelector(".hero .btn, .hero .btn a"),r=[];for(let l=0;l<t.length;l++){const a=t[l],c=ye(a);if(c?.words?.length){const h=a.classList.contains("text-reveal-reverse");r.push(L.to(c.words,{y:h?100:-100,opacity:0,duration:.35,stagger:.02,ease:"power2.in"}))}}r.length&&await Promise.all(r.map(l=>new Promise(a=>l.eventCallback("onComplete",a))));const o=[n,i].filter(Boolean);o.length&&await L.to(o,{opacity:0,duration:.25,ease:"power2.out"})},async enter(s){const e=s?.next?.container;if(!e)return;const t=e.querySelector(".hero .hero-contain p"),n=e.querySelector(".hero .btn, .hero .btn a"),i=[t,n].filter(Boolean);i.length&&L.set(i,{opacity:0})},async after(s){const e=s?.next?.container;if(!e)return;sn(s?.next?.namespace),await Xn(e);const t=e.querySelector(".hero .hero-contain p"),n=e.querySelector(".hero .btn, .hero .btn a"),i=[t,n].filter(Boolean);i.length&&await L.to(i,{opacity:1,duration:.35,ease:"power2.out",delay:.2})}},{name:"default",async leave(s){s?.current?.namespace==="home"&&Ze(),s?.current?.namespace==="work"&&st(),s?.current?.namespace==="archive"&&Lt(),dn(),qn(),jn(),await ls()},async enter(){await Gn()},async once(s){sn(s?.next?.namespace),await Gn();const e=s?.next?.namespace;if(e==="home"||e==="contact"){const t=s?.next?.container;if(t){const n=t.querySelector(".hero .hero-contain p"),i=t.querySelector(".hero .btn, .hero .btn a"),r=[n,i].filter(Boolean);r.length&&L.set(r,{opacity:0}),await Xn(t),r.length&&await L.to(r,{opacity:1,duration:.35,ease:"power2.out",delay:.2})}}},async after(s){const e=s?.next?.namespace;e!=="home"&&e!=="contact"&&sn(e)}}]});
